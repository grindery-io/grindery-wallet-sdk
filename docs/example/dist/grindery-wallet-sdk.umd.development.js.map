{"version":3,"file":"grindery-wallet-sdk.umd.development.js","sources":["../src/enums.ts","../src/provider/WalletProviderEventEmitter.ts","../src/provider/WalletProviderLocalStorage.ts","../src/provider/WalletProviderError.ts","../src/provider/WalletProvider.ts","../src/provider/GrinderyWalletProvider.ts","../src/sdk/GrinderyWalletSDK.ts","../src/index.ts"],"sourcesContent":["export enum ProviderEvents {\n  accountsChanged = 'accountsChanged',\n  pair = 'pair',\n  connect = 'connect',\n  disconnect = 'disconnect',\n  chainChanged = 'chainChanged',\n  message = 'message',\n}\n\nexport enum ProviderStorageKeys {\n  pairingToken = 'pairingToken',\n  sessionId = 'sessionId',\n  connectUrl = 'connectUrl',\n  connectUrlBrowser = 'connectUrlBrowser',\n  shortToken = 'shortToken',\n}\n\nexport enum GrinderyRpcMethodNames {\n  checkout_requestPairing = 'checkout_requestPairing',\n  checkout_waitForPairingResult = 'checkout_waitForPairingResult',\n  checkout_request = 'checkout_request',\n  checkout_waitForRequestResult = 'checkout_waitForRequestResult',\n}\n\nexport enum GrinderyRpcProviderRequestMethodNames {\n  eth_requestAccounts = 'eth_requestAccounts',\n  eth_accounts = 'eth_accounts',\n  personal_sign = 'personal_sign',\n  eth_sendTransaction = 'eth_sendTransaction',\n}\n","import { ProviderEvent } from '../types';\n\n/**\n * @summary A class for emitting provider events\n * @since 0.1.0\n */\nexport class WalletProviderEventEmitter {\n  /**\n   * @summary A map of events and their listeners\n   * @public\n   */\n  public events: Map<ProviderEvent, Array<Function>>;\n\n  constructor() {\n    this.events = new Map();\n  }\n\n  /**\n   * @summary Adds a listener to the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public on(event: ProviderEvent, callback: Function) {\n    if (!this.events.has(event)) {\n      this.events.set(event, []);\n    }\n    this.events.get(event)!.push(callback);\n    return this;\n  }\n\n  /**\n   * @summary Removes a listener from the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public removeListener(event: ProviderEvent, callback: Function) {\n    if (this.events.has(event)) {\n      const callbacks = this.events.get(event)!.filter(cb => cb !== callback);\n      this.events.set(event, callbacks);\n    }\n    return this;\n  }\n\n  /**\n   * @summary Emits an event\n   * @public\n   * @param {string} event Event name\n   * @param data Event data\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  protected emit(event: ProviderEvent, ...data: any[]) {\n    if (this.events.has(event)) {\n      console.log('[Grindery.WalletSDK] > Event:', event, data);\n      this.events.get(event)!.forEach(callback => {\n        callback(...data);\n      });\n    }\n    return this;\n  }\n}\n","import { ProviderStorage, ProviderStorageKey } from '../types';\nimport { WalletProviderEventEmitter } from './WalletProviderEventEmitter';\n\nconst LOCALSTORAGE_KEY = 'GrinderyWalletProvider';\n\n/**\n * @summary A local storage class for the provider\n * @since 0.1.0\n * @extends WalletProviderEventEmitter\n */\nexport class WalletProviderLocalStorage extends WalletProviderEventEmitter {\n  /**\n   * @summary Gets the value of the storage by the key\n   * @protected\n   * @param {ProviderStorageKey} key Provider storage key\n   * @returns {string} The value of the storage by the key\n   */\n  protected getStorageValue(key: ProviderStorageKey): string {\n    const value = this.getStorage()[key] || '';\n    return value;\n  }\n\n  /**\n   * @summary Sets the value of the storage by the key\n   * @protected\n   * @param {ProviderStorageKey} key Provider storage key\n   * @param {string} value The value to set\n   * @returns {void}\n   */\n  protected setStorageValue(key: ProviderStorageKey, value: string): void {\n    const storage = this.getStorage();\n    storage[key] = value;\n    this.saveStorage(storage);\n  }\n\n  /**\n   * @summary Clears the storage\n   * @protected\n   * @returns {void}\n   */\n  protected clearStorage(): void {\n    this.saveStorage({});\n  }\n\n  /**\n   * @summary Gets the provider storage\n   * @returns {ProviderStorage} The provider storage\n   */\n  private getStorage(): ProviderStorage {\n    try {\n      return JSON.parse(\n        localStorage.getItem(LOCALSTORAGE_KEY) || '{}'\n      ) as ProviderStorage;\n    } catch (error) {\n      localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify({}));\n      throw new Error('Error parsing storage');\n    }\n  }\n\n  /**\n   * @summary Saves the provider storage\n   * @param {ProviderStorage} storage Provider storage object\n   */\n  private saveStorage(storage: ProviderStorage): void {\n    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(storage));\n  }\n}\n","/**\n * @summary Error class for WalletProvider\n * @since 0.1.0\n * @extends Error\n */\nexport class WalletProviderError extends Error {\n  name: string = 'GrinderyWalletProviderError';\n  code?: number;\n  data?: unknown;\n\n  constructor(message: string, code?: number, data?: unknown) {\n    super(message);\n    this.code = code;\n    this.data = data;\n  }\n}\n\nexport const WalletProviderErrors = {\n  PairingFailed: new WalletProviderError('Pairing failed', 4900),\n  Disconnected: new WalletProviderError('Disconnected', 4900),\n  UnsupportedMethod: new WalletProviderError('Unsupported Method', 4200),\n  Unauthorized: new WalletProviderError('Unauthorized', 4900),\n  NoResult: new WalletProviderError('No result', 4900),\n};\n","import { WalletProviderLocalStorage } from './WalletProviderLocalStorage';\nimport {\n  Address,\n  ChainId,\n  GrinderyRpcApiRequestResults,\n  GrinderyRpcMethodName,\n  GrinderyRpcProviderRequestMethodName,\n  ProviderMethods,\n  ProviderRequestResult,\n  RequestArguments,\n  RequestArgumentsParams,\n  RequestToken,\n} from '../types';\nimport {\n  WalletProviderError,\n  WalletProviderErrors,\n} from './WalletProviderError';\nimport {\n  GrinderyRpcMethodNames,\n  ProviderEvents,\n  ProviderStorageKeys,\n} from '../enums';\n\n/**\n * @summary The base wallet provider class\n * @since 0.1.0\n * @extends WalletProviderLocalStorage\n */\nexport class WalletProvider extends WalletProviderLocalStorage {\n  constructor() {\n    super();\n\n    this.injectProvider();\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server.\n   */\n  public isConnected(): boolean {\n    return !!this.chainId;\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet.\n   */\n  public isWalletConnected(): boolean {\n    return (\n      this.isConnected() &&\n      !!this.getStorageValue(ProviderStorageKeys.sessionId)\n    );\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet pairing is in progress (pending).\n   */\n  public isWalletConnectionPending(): boolean {\n    return (\n      this.isConnected() &&\n      !!this.getStorageValue(ProviderStorageKeys.pairingToken) &&\n      !this.getStorageValue(ProviderStorageKeys.sessionId)\n    );\n  }\n\n  /**\n   * @summary Gets the connected chain ID in hex format\n   * @public\n   * @returns {ChainId} The chain ID in hex format\n   */\n  public getChain(): ChainId {\n    return `0x${parseFloat(this.chainId.split(':')[1]).toString(16)}`;\n  }\n\n  /**\n   * @summary Gets the connected user's wallet address\n   * @public\n   * @returns {Address} The ethereum wallet address\n   */\n  public getAddress(): Address {\n    return this.accounts[0] || '';\n  }\n\n  /**\n   * @summary Sends a request to the provider\n   * @public\n   * @param {RequestArguments} args Request arguments\n   * @param {string} args.method The method name\n   * @param {RequestArgumentsParams} args.params The method parameters\n   * @returns {T} The result of the request\n   */\n  public async request<T>({ method, params }: RequestArguments): Promise<T> {\n    if (!this.chainId) {\n      this.emit(ProviderEvents.disconnect, WalletProviderErrors.Disconnected);\n      throw WalletProviderErrors.Disconnected;\n    }\n    if (!this.methods[method]) {\n      throw WalletProviderErrors.UnsupportedMethod;\n    }\n\n    try {\n      if (this.methods[method]?.sessionRequired && !this.isWalletConnected()) {\n        throw WalletProviderErrors.Unauthorized;\n      }\n\n      return (await this.methods[method]?.execute(params)) as T;\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Sends a provider request to the Grindery RPC API and waits for the result.\n   * @public\n   * @param {GrinderyRpcProviderRequestMethodName} method Provider request method name\n   * @param {Array} params Provider request parameters\n   * @param {number} timeout Optional. The time in milliseconds to wait for the request result. Default is 30000.\n   * @returns The result of the provider request\n   */\n  public async sendAndWaitGrinderyRpcProviderRequest<T>(\n    method: GrinderyRpcProviderRequestMethodName,\n    params?: readonly unknown[],\n    timeout?: number\n  ): Promise<T> {\n    const request = await this.sendGrinderyRpcProviderRequest(method, params);\n    return await this.waitGrinderyRpcProviderRequest(\n      request.requestToken,\n      timeout\n    );\n  }\n\n  /**\n   * @summary The application ID.\n   * @protected\n   */\n  protected appId: string = document.title || 'Grindery Wallet Provider';\n\n  /**\n   * @summary The chain ID in CAIP-2 format; e.g. \"eip155:1\".\n   * @protected\n   */\n  protected chainId: ChainId = 'eip155:137';\n\n  /**\n   * @summary The list of supported provider methods.\n   * @protected\n   */\n  protected methods: Partial<ProviderMethods> = {};\n\n  /**\n   * @summary The user's wallet addresses list.\n   * @protected\n   */\n  protected accounts: Address[] = [];\n\n  protected setAccounts(accounts: Address[]): Address[] {\n    if (JSON.stringify(accounts) !== JSON.stringify(this.accounts)) {\n      this.emit(ProviderEvents.accountsChanged, accounts);\n    }\n    this.accounts = accounts;\n    return this.accounts;\n  }\n\n  /**\n   * @summary Registers the provider methods.\n   * @protected\n   * @param {ProviderMethods} methods A map of supported provider methods.\n   * @returns {void}\n   */\n  protected registerProviderMethods(methods: Partial<ProviderMethods>): void {\n    this.methods = methods;\n  }\n\n  /**\n   * @summary Sends a provider request to the Grindery RPC API.\n   * @protected\n   * @param {GrinderyRpcProviderRequestMethodName} method Provider request method name\n   * @param {Array} params Provider request parameters\n   * @returns {ProviderRequestResult} The request token to use in the `waitGrinderyRpcProviderRequest` method\n   */\n  protected async sendGrinderyRpcProviderRequest(\n    method: GrinderyRpcProviderRequestMethodName,\n    params?: readonly unknown[]\n  ): Promise<ProviderRequestResult> {\n    if (!this.getStorageValue(ProviderStorageKeys.sessionId)) {\n      throw WalletProviderErrors.Unauthorized;\n    }\n    try {\n      return await this.sendGrinderyRpcApiRequest<\n        GrinderyRpcApiRequestResults.checkout_request\n      >(GrinderyRpcMethodNames.checkout_request, {\n        sessionId: this.getStorageValue(ProviderStorageKeys.sessionId),\n        scope: this.chainId,\n        request: {\n          method,\n          params,\n        },\n      });\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Waits for the result of the provider request.\n   * @protected\n   * @param {RequestToken} requestToken A token to identify provider request. Recieved in the results of `sendGrinderyRpcProviderRequest` method.\n   * @param {number} timeout Optional. The time in milliseconds to wait for the request result. Default is 30000.\n   * @returns The result of the provider request\n   */\n  protected async waitGrinderyRpcProviderRequest<T>(\n    requestToken: RequestToken,\n    timeout?: number\n  ): Promise<T> {\n    if (!this.getStorageValue(ProviderStorageKeys.sessionId)) {\n      throw WalletProviderErrors.Unauthorized;\n    }\n    try {\n      return await this.sendGrinderyRpcApiRequest<T>(\n        GrinderyRpcMethodNames.checkout_waitForRequestResult,\n        {\n          requestToken,\n          timeout,\n        }\n      );\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Sends a request to the Grindery Walletconnect RPC API.\n   * @protected\n   * @param {GrinderyRpcMethodName} method Request method name\n   * @param {RequestArgumentsParams} params Request parameters\n   * @returns {T} The result of the request\n   */\n  protected async sendGrinderyRpcApiRequest<T>(\n    method: GrinderyRpcMethodName,\n    params?: RequestArgumentsParams\n  ): Promise<T> {\n    try {\n      const response = await fetch('https://walletconnect-api.grindery.com', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          jsonrpc: '2.0',\n          id: 1,\n          method,\n          params: params || [],\n        }),\n      });\n      const data = await response.json();\n      if (data.error) {\n        throw new WalletProviderError(data.error.message, data.error.code);\n      }\n      if (!data.result) {\n        throw WalletProviderErrors.NoResult;\n      }\n      return data.result;\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Creates a provider error from an unknown error\n   * @protected\n   * @param {unknown} error Optional. Error object.\n   * @returns {WalletProviderError} The provider error\n   */\n  protected createProviderRpcError(error?: unknown): WalletProviderError {\n    let errorResponse: WalletProviderError;\n    if (error instanceof WalletProviderError) {\n      errorResponse = new WalletProviderError(\n        error.message || 'Unknown error',\n        error.code || 4900,\n        error.data\n      );\n    } else if (error instanceof Error) {\n      errorResponse = new WalletProviderError(\n        error.message || 'Unknown error',\n        4900,\n        error\n      );\n    } else {\n      errorResponse = new WalletProviderError('Unknown error', 4900, error);\n    }\n    return errorResponse;\n  }\n\n  /**\n   * @summary Injects the provider into the window object\n   * @private\n   * @returns {void}\n   */\n  private injectProvider(): void {\n    if (!window.ethereum) {\n      window.ethereum = this;\n    } else {\n      if (\n        window.ethereum.providers &&\n        Array.isArray(window.ethereum.providers)\n      ) {\n        window.ethereum.providers.push(this);\n      } else {\n        window.ethereum.providers = [window.ethereum, this];\n      }\n    }\n  }\n}\n","import {\n  GrinderyRpcMethodNames,\n  GrinderyRpcProviderRequestMethodNames,\n  ProviderEvents,\n  ProviderStorageKeys,\n} from '../enums';\nimport {\n  GrinderyRpcApiRequestResults,\n  GrinderyRpcProviderRequestResults,\n  ProviderInterface,\n  RequestArgumentsParams,\n} from '../types';\nimport { WalletProvider } from './WalletProvider';\nimport { WalletProviderErrors } from './WalletProviderError';\n\n/**\n * @summary The Grindery Wallet Ethereum Injected Provider Class.\n * @extends WalletProvider\n * @implements ProviderInterface\n */\nexport class GrinderyWalletProvider extends WalletProvider\n  implements ProviderInterface {\n  /**\n   * @summary Indicates that the provider is a Grindery Wallet.\n   */\n  public readonly isGrinderyWallet: boolean = true;\n\n  constructor() {\n    super();\n\n    this.registerProviderMethods({\n      [GrinderyRpcProviderRequestMethodNames.eth_requestAccounts]: {\n        sessionRequired: false,\n        execute: async (\n          params?: RequestArgumentsParams\n        ): Promise<GrinderyRpcProviderRequestResults.eth_requestAccounts> => {\n          if (this.isWalletConnected()) {\n            try {\n              return await this.request<\n                GrinderyRpcProviderRequestResults.eth_accounts\n              >({\n                method: GrinderyRpcProviderRequestMethodNames.eth_accounts,\n                params: params || [],\n              });\n            } catch (error) {\n              this.setStorageValue(ProviderStorageKeys.sessionId, '');\n              // skip failed request and continue with pairing\n            }\n          }\n          if (this.isWalletConnectionPending()) {\n            try {\n              const pairResult = await this.sendGrinderyRpcApiRequest<\n                GrinderyRpcApiRequestResults.checkout_waitForPairingResult\n              >(GrinderyRpcMethodNames.checkout_waitForPairingResult, {\n                pairingToken: this.getStorageValue(\n                  ProviderStorageKeys.pairingToken\n                ),\n              });\n\n              this.clearStorage();\n              this.setStorageValue(\n                ProviderStorageKeys.sessionId,\n                pairResult.session.sessionId\n              );\n\n              if (!pairResult.session.sessionId) {\n                throw WalletProviderErrors.PairingFailed;\n              }\n\n              return await this.request<\n                GrinderyRpcProviderRequestResults.eth_accounts\n              >({\n                method: GrinderyRpcProviderRequestMethodNames.eth_accounts,\n                params: params || [],\n              });\n            } catch (error) {\n              this.clearStorage();\n              // skip failed request and continue with pairing\n            }\n          }\n          try {\n            const result = await this.sendGrinderyRpcApiRequest<\n              GrinderyRpcApiRequestResults.checkout_requestPairing\n            >(GrinderyRpcMethodNames.checkout_requestPairing, {\n              appId: this.appId,\n            });\n\n            if (!result.pairingToken || !result.connectUrl) {\n              throw WalletProviderErrors.PairingFailed;\n            }\n\n            this.setStorageValue(\n              ProviderStorageKeys.pairingToken,\n              result.pairingToken\n            );\n            this.setStorageValue(\n              ProviderStorageKeys.connectUrl,\n              result.connectUrl\n            );\n            this.setStorageValue(\n              ProviderStorageKeys.connectUrlBrowser,\n              result.connectUrlBrowser\n            );\n            this.setStorageValue(\n              ProviderStorageKeys.shortToken,\n              result.shortToken\n            );\n            this.emit(ProviderEvents.pair, {\n              shortToken: result.shortToken,\n              connectUrl: result.connectUrl,\n              connectUrlBrowser: result.connectUrlBrowser,\n            });\n            const pairResult = await this.sendGrinderyRpcApiRequest<\n              GrinderyRpcApiRequestResults.checkout_waitForPairingResult\n            >(GrinderyRpcMethodNames.checkout_waitForPairingResult, {\n              pairingToken: result.pairingToken,\n            });\n\n            this.setStorageValue(\n              ProviderStorageKeys.sessionId,\n              pairResult.session.sessionId\n            );\n\n            if (!pairResult.session.sessionId) {\n              throw WalletProviderErrors.PairingFailed;\n            }\n            this.setStorageValue(ProviderStorageKeys.pairingToken, '');\n            this.setStorageValue(ProviderStorageKeys.connectUrl, '');\n            this.setStorageValue(ProviderStorageKeys.connectUrlBrowser, '');\n            this.setStorageValue(ProviderStorageKeys.shortToken, '');\n\n            return await this.request({\n              method: GrinderyRpcProviderRequestMethodNames.eth_accounts,\n              params: params || [],\n            });\n          } catch (error) {\n            throw this.createProviderRpcError(error);\n          }\n        },\n      },\n      [GrinderyRpcProviderRequestMethodNames.eth_accounts]: {\n        sessionRequired: true,\n        execute: async (\n          params?: RequestArgumentsParams\n        ): Promise<GrinderyRpcProviderRequestResults.eth_accounts> => {\n          try {\n            return this.setAccounts(\n              await this.sendAndWaitGrinderyRpcProviderRequest(\n                GrinderyRpcProviderRequestMethodNames.eth_accounts,\n                params ? (Array.isArray(params) ? params : [params]) : []\n              )\n            );\n          } catch (error) {\n            throw this.createProviderRpcError(error);\n          }\n        },\n      },\n      [GrinderyRpcProviderRequestMethodNames.eth_sendTransaction]: {\n        sessionRequired: true,\n        execute: async (\n          params?: RequestArgumentsParams\n        ): Promise<GrinderyRpcProviderRequestResults.eth_sendTransaction> => {\n          return await this.sendAndWaitGrinderyRpcProviderRequest(\n            GrinderyRpcProviderRequestMethodNames.eth_sendTransaction,\n            params ? (Array.isArray(params) ? params : [params]) : []\n          );\n        },\n      },\n      [GrinderyRpcProviderRequestMethodNames.personal_sign]: {\n        sessionRequired: true,\n        execute: async (\n          params?: Partial<RequestArgumentsParams>\n        ): Promise<GrinderyRpcProviderRequestResults.personal_sign> => {\n          return await this.sendAndWaitGrinderyRpcProviderRequest(\n            GrinderyRpcProviderRequestMethodNames.personal_sign,\n            params ? (Array.isArray(params) ? params : [params]) : []\n          );\n        },\n      },\n    });\n\n    window.addEventListener('load', () => {\n      this.emit(ProviderEvents.connect, this.getChain());\n      this.restorePairing();\n      this.restoreSession();\n    });\n  }\n\n  /**\n   * @summary Restores the pairing process if pairing token is stored in the local storage\n   * @private\n   * @returns {void}\n   */\n  private async restorePairing(): Promise<void> {\n    const pairingToken = this.getStorageValue(ProviderStorageKeys.pairingToken);\n    const sessionId = this.getStorageValue(ProviderStorageKeys.sessionId);\n    if (pairingToken && !sessionId) {\n      try {\n        const pairResult = await this.sendGrinderyRpcApiRequest<\n          GrinderyRpcApiRequestResults.checkout_waitForPairingResult\n        >(GrinderyRpcMethodNames.checkout_waitForPairingResult, {\n          pairingToken,\n        });\n\n        this.clearStorage();\n        this.setStorageValue(\n          ProviderStorageKeys.sessionId,\n          pairResult.session.sessionId\n        );\n\n        if (!pairResult.session.sessionId) {\n          throw WalletProviderErrors.PairingFailed;\n        }\n\n        const accounts = (\n          pairResult.session?.namespaces?.[`eip155`]?.accounts || []\n        ).map(account =>\n          account.includes(':') ? account.split(':')[2] || '' : account\n        );\n        this.setAccounts(accounts);\n      } catch (error) {\n        this.setAccounts([]);\n        this.clearStorage();\n      }\n    }\n  }\n\n  /**\n   * @summary Restores the session if session Id is stored in the local storage\n   * @private\n   * @returns {void}\n   */\n  private async restoreSession(): Promise<void> {\n    const pairingToken = this.getStorageValue(ProviderStorageKeys.pairingToken);\n    const sessionId = this.getStorageValue(ProviderStorageKeys.sessionId);\n    if (sessionId && !pairingToken) {\n      try {\n        await this.request<string[]>({\n          method: GrinderyRpcProviderRequestMethodNames.eth_requestAccounts,\n        });\n      } catch (error) {\n        this.setAccounts([]);\n        this.clearStorage();\n      }\n    }\n  }\n}\n","import {\n  GrinderyRpcProviderRequestMethodNames,\n  ProviderEvents,\n} from '../enums';\nimport { GrinderyRpcApiRequestResults, ProviderEvent } from '../types';\nimport { GrinderyWalletProvider } from '../provider/GrinderyWalletProvider';\n\n/**\n * @summary The Grindery Wallet SDK class\n * @since 0.1.0\n */\nexport class GrinderyWalletSDK {\n  /**\n   * @summary The provider instance\n   * @public\n   */\n  public provider: GrinderyWalletProvider;\n\n  constructor() {\n    this.provider = this.getWeb3Provider();\n    this.provider.on(ProviderEvents.pair, this.handlePairing);\n  }\n\n  /**\n   * @summary Checks if the provider is connected to the server\n   * @returns {boolean} True if the provider is connected to the server.\n   */\n  public isConnected(): boolean {\n    return this.provider.isConnected();\n  }\n\n  /**\n   * @summary Checks if the provider is connected to the server and the Grindery Wallet\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet.\n   */\n  public isWalletConnected(): boolean {\n    return this.provider.isWalletConnected();\n  }\n\n  /**\n   * @summary Initiate connection to the Grindery Wallet\n   * @public\n   * @returns {Promise<string[]>} The array of ethereum addresses\n   * @since 0.1.0\n   */\n  public async connect(): Promise<string[]> {\n    return await this.provider.request({\n      method: GrinderyRpcProviderRequestMethodNames.eth_requestAccounts,\n    });\n  }\n\n  /**\n   * @summary Sends a transaction request to the Grindery Wallet\n   * @public\n   * @since 0.1.0\n   * @param {object} params The transaction parameters\n   * @param {string} params.to The recipient address\n   * @param {string} [params.value] The amount to send in wei\n   * @param {string} [params.data] The data to send\n   * @returns {Promise<string[]>} Array with transaction hash string\n   */\n  public async sendTransaction(params: {\n    to: string;\n    value?: string;\n    data?: string;\n  }): Promise<string[]> {\n    return await this.provider.request<string[]>({\n      method: GrinderyRpcProviderRequestMethodNames.eth_sendTransaction,\n      params: [params],\n    });\n  }\n\n  /**\n   * @summary Sends a personal signature request to the Grindery Wallet\n   * @public\n   * @since 0.1.0\n   * @param {string} message The message to sign\n   * @returns {Promise<string>} Signature string\n   */\n  public async signMessage(message: string): Promise<string> {\n    return await this.provider.request<string>({\n      method: GrinderyRpcProviderRequestMethodNames.personal_sign,\n      params: [message, this.provider.getAddress()],\n    });\n  }\n\n  /**\n   * @summary Adds a listener to the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public on(event: ProviderEvent, callback: Function) {\n    this.provider.on(event, callback);\n    return this;\n  }\n\n  /**\n   * @summary Removes a listener from the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public removeListener(event: ProviderEvent, callback: Function) {\n    this.provider.removeListener(event, callback);\n    return this;\n  }\n\n  /**\n   * @summary Gets the Grindery Wallet ethereum provider\n   * @returns {GrinderyWalletProvider} The Grindery Wallet ethereum provider\n   */\n  private getWeb3Provider(): GrinderyWalletProvider {\n    let provider = window.ethereum?.providers?.find(\n      (provider: GrinderyWalletProvider | unknown) =>\n        provider instanceof GrinderyWalletProvider && provider.isGrinderyWallet\n    );\n    if (\n      !provider &&\n      window.ethereum instanceof GrinderyWalletProvider &&\n      window.ethereum.isGrinderyWallet\n    ) {\n      provider = window.ethereum;\n    }\n    if (!provider) {\n      provider = new GrinderyWalletProvider();\n    }\n    return provider;\n  }\n\n  /**\n   * @summary Handles the pairing request, by opening the Grindery Wallet\n   * @private\n   * @param ProviderRequestPairingResult\n   * @returns {void}\n   */\n  private handlePairing({\n    shortToken,\n    connectUrlBrowser,\n  }: GrinderyRpcApiRequestResults.checkout_requestPairing): void {\n    const WebApp = window.Telegram?.WebApp;\n    const redirectUrl = `https://walletconnect.grindery.com/connect/wc?uri=${shortToken}`;\n    if (\n      WebApp &&\n      WebApp.openTelegramLink &&\n      WebApp.platform &&\n      WebApp.platform !== 'unknown'\n    ) {\n      WebApp.openTelegramLink(connectUrlBrowser);\n      if (WebApp.close) {\n        window.Telegram.WebApp.close();\n      }\n    } else {\n      window.open(redirectUrl, '_blank');\n    }\n  }\n}\n","import { GrinderyWalletSDK } from './sdk/GrinderyWalletSDK';\n\ndeclare global {\n  interface Window {\n    Telegram?: any;\n    ethereum?: any;\n    Grindery?: {\n      WalletSDK?: GrinderyWalletSDK;\n    };\n  }\n}\n\nfunction init() {\n  if (\n    !window.Grindery?.WalletSDK ||\n    !(window.Grindery.WalletSDK instanceof GrinderyWalletSDK)\n  ) {\n    window.Grindery = {\n      ...(window.Grindery || {}),\n      WalletSDK: new GrinderyWalletSDK(),\n    };\n  }\n}\n\n// Initialize the SDK when the page is loaded\ninit();\n"],"names":["ProviderEvents","ProviderStorageKeys","GrinderyRpcMethodNames","GrinderyRpcProviderRequestMethodNames","WalletProviderEventEmitter","events","Map","_proto","prototype","on","event","callback","has","set","get","push","removeListener","callbacks","filter","cb","emit","data","Array","_len","_key","arguments","console","log","forEach","apply","LOCALSTORAGE_KEY","WalletProviderLocalStorage","_WalletProviderEventE","_inheritsLoose","getStorageValue","key","value","getStorage","setStorageValue","storage","saveStorage","clearStorage","JSON","parse","localStorage","getItem","error","setItem","stringify","Error","WalletProviderError","_Error","message","code","_this","call","_wrapNativeSuper","WalletProviderErrors","PairingFailed","Disconnected","UnsupportedMethod","Unauthorized","NoResult","WalletProvider","_WalletProviderLocalS","document","title","injectProvider","isConnected","chainId","isWalletConnected","sessionId","isWalletConnectionPending","pairingToken","getChain","parseFloat","split","toString","getAddress","accounts","request","_request","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","method","params","_this$methods$method","_this$methods$method2","wrap","_callee$","_context","prev","next","disconnect","methods","sessionRequired","execute","abrupt","sent","t0","createProviderRpcError","stop","_x","sendAndWaitGrinderyRpcProviderRequest","_sendAndWaitGrinderyRpcProviderRequest","_callee2","timeout","_callee2$","_context2","sendGrinderyRpcProviderRequest","waitGrinderyRpcProviderRequest","requestToken","_x2","_x3","_x4","setAccounts","accountsChanged","registerProviderMethods","_sendGrinderyRpcProviderRequest","_callee3","_callee3$","_context3","sendGrinderyRpcApiRequest","checkout_request","scope","_x5","_x6","_waitGrinderyRpcProviderRequest","_callee4","_callee4$","_context4","checkout_waitForRequestResult","_x7","_x8","_sendGrinderyRpcApiRequest","_callee5","response","_callee5$","_context5","fetch","headers","body","jsonrpc","id","json","result","_x9","_x10","errorResponse","window","ethereum","providers","isArray","GrinderyWalletProvider","_WalletProvider","_this$registerProvide","eth_requestAccounts","_execute","pairResult","_pairResult","eth_accounts","checkout_waitForPairingResult","session","t1","checkout_requestPairing","appId","connectUrl","connectUrlBrowser","shortToken","pair","t2","_execute2","eth_sendTransaction","_execute3","personal_sign","_execute4","addEventListener","connect","restorePairing","restoreSession","_restorePairing","_pairResult$session","namespaces","map","account","includes","_restoreSession","_callee6","_callee6$","_context6","GrinderyWalletSDK","provider","getWeb3Provider","handlePairing","_connect","sendTransaction","_sendTransaction","signMessage","_signMessage","_window$ethereum","find","isGrinderyWallet","WebApp","_window$Telegram","Telegram","redirectUrl","openTelegramLink","platform","close","open","init","_window$Grindery","Grindery","WalletSDK","_extends"],"mappings":"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"}