{"version":3,"file":"grindery-wallet-sdk.cjs.production.min.js","sources":["../src/classes/EventEmitter.ts","../src/classes/SdkStorage.ts","../src/utils/getAppId.ts","../src/utils/uuid.ts","../src/utils/providerInfo.ts","../src/classes/ProviderError.ts","../src/utils/chains.ts","../src/classes/Rpc.ts","../src/classes/Provider.ts","../src/utils/clientEvents.ts","../src/classes/WalletAPI.ts","../src/index.ts","../src/classes/WalletSDK.ts"],"sourcesContent":["/**\n * @summary Provider events\n * @since 0.2.0\n * @link https://eips.ethereum.org/EIPS/eip-1193#provider-events\n * @enum {string}\n */\nexport enum ProviderEvents {\n  accountsChanged = 'accountsChanged',\n  pair = 'pair',\n  connect = 'connect',\n  disconnect = 'disconnect',\n  chainChanged = 'chainChanged',\n  message = 'message',\n}\n\n/**\n * @summary Provider event name\n * @since 0.2.0\n */\nexport type ProviderEventName = keyof typeof ProviderEvents;\n\n/**\n * @summary A class for emitting provider events\n * @since 0.2.0\n */\nexport class EventEmitter {\n  constructor() {\n    this.events = new Map();\n  }\n\n  /**\n   * @summary A map of events and their listeners\n   * @private\n   */\n  private events: Map<ProviderEventName, Array<Function>>;\n\n  /**\n   * @summary Adds a listener to the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public on(event: ProviderEventName, callback: Function) {\n    if (!this.events.has(event)) {\n      this.events.set(event, []);\n    }\n    this.events.get(event)!.push(callback);\n    return this;\n  }\n\n  /**\n   * @summary Removes a listener from the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public removeListener(event: ProviderEventName, callback: Function) {\n    if (this.events.has(event)) {\n      const callbacks = this.events.get(event)!.filter((cb) => cb !== callback);\n      this.events.set(event, callbacks);\n    }\n    return this;\n  }\n\n  /**\n   * @summary Emits an event\n   * @public\n   * @param {string} event Event name\n   * @param data Event data\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  protected emit(event: ProviderEventName, ...data: any[]) {\n    if (this.events.has(event)) {\n      console.log('[Grindery.WalletSDK] > Event:', event, data[0]);\n      this.events.get(event)!.forEach((callback) => {\n        callback(...data);\n      });\n    }\n    return this;\n  }\n}\n","import { CHAINS } from '../utils/chains';\nimport { uuid } from '../utils/uuid';\n\nconst LOCALSTORAGE_KEY = 'GrinderyWalletProvider';\n\n/**\n * @summary SdkStorage keys\n * @since 0.2.0\n */\nexport enum SdkStorageKeys {\n  pairingToken = 'pairingToken',\n  sessionId = 'sessionId',\n  connectUrl = 'connectUrl',\n  connectUrlBrowser = 'connectUrlBrowser',\n  shortToken = 'shortToken',\n  clientId = 'clientId',\n  address = 'address',\n  chainId = 'chainId',\n}\n\n/**\n * @summary SdkStorage key type\n * @since 0.2.0\n */\nexport type SdkStorageKey = keyof typeof SdkStorageKeys;\n\nexport type SdkStorageSnapshot = {\n  [key in SdkStorageKeys]?: string;\n};\n\n/**\n * @summary A class to handle local storage\n * @since 0.2.0\n */\nexport class SdkStorage {\n  /**\n   * @summary Gets the value of the storage by the key\n   * @public\n   * @param {SdkStorageKey} key Provider storage key\n   * @returns {string} The value of the storage by the key\n   */\n  public getValue(key: SdkStorageKey): string {\n    const value = this.getSnapshot()[key] || '';\n    return value;\n  }\n\n  /**\n   * @summary Sets the value of the storage by the key\n   * @public\n   * @param {SdkStorageKey} key Provider storage key\n   * @param {string} value The value to set\n   * @returns {void}\n   */\n  public setValue(key: SdkStorageKey, value: string): string {\n    const snapshot = this.getSnapshot();\n    snapshot[key] = value;\n    this.saveSnapshot(snapshot);\n    return value;\n  }\n\n  /**\n   * @summary Clears the storage\n   * @public\n   * @returns {void}\n   */\n  public clear(): void {\n    this.saveSnapshot({\n      clientId: this.getSnapshot().clientId || uuid(),\n      chainId: this.getSnapshot().chainId || CHAINS[0],\n    });\n  }\n\n  /**\n   * @summary Gets the storage\n   * @since 0.2.0\n   * @returns {SdkStorageSnapshot} The storage snapshot object\n   */\n  private getSnapshot(): SdkStorageSnapshot {\n    try {\n      return JSON.parse(\n        localStorage.getItem(LOCALSTORAGE_KEY) || '{}'\n      ) as SdkStorageSnapshot;\n    } catch (error) {\n      localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify({}));\n      throw new Error('Error parsing storage');\n    }\n  }\n\n  /**\n   * @summary Saves the storage\n   * @since 0.2.0\n   * @param {SdkStorageSnapshot} storage SdkStorage snapshot object\n   */\n  private saveSnapshot(storage: SdkStorageSnapshot): void {\n    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(storage));\n  }\n}\n","/**\n * @summary Get the app id from the script tag or window object\n * @returns {string} The app id\n */\nexport const getAppId = (): string => {\n  let appId: string = '';\n  const elements = document.querySelectorAll('[data-app-id]');\n  for (let i = 0; i < elements.length; i++) {\n    const element = elements[i];\n    const value = element.getAttribute('data-app-id');\n    const src = element.getAttribute('src');\n    const isGrinderySrc = src && src.includes('grindery-wallet-sdk');\n    if (value && isGrinderySrc) {\n      appId = value;\n    }\n  }\n  if (window.Grindery?.appId) {\n    appId = window.Grindery.appId;\n  }\n  return appId;\n};\n","/**\n * @summary Generates a Version 4 (pseudorandom) UUID\n * @returns {string} The UUID\n */\nexport const uuid = (): string => {\n  let d = '';\n  while (d.length < 32) d += Math.random().toString(16).substr(2);\n  const vr = ((parseInt(d.substr(16, 1), 16) & 0x3) | 0x8).toString(16);\n  return `${d.substr(0, 8)}-${d.substr(8, 4)}-4${d.substr(\n    13,\n    3\n  )}-${vr}${d.substr(17, 3)}-${d.substr(20, 12)}`;\n};\n","import { uuid } from './uuid';\n\n/**\n * Represents the assets needed to display a wallet\n *\n * @since 0.1.1\n * @link https://eips.ethereum.org/EIPS/eip-6963#provider-info\n */\nexport interface EIP6963ProviderInfo {\n  uuid: string;\n  name: string;\n\n  /**\n   * Data URI as defined in RFC-2397.\n   *\n   * The image SHOULD be a square with 96x96px minimum resolution.\n   * The image format is RECOMMENDED to be either lossless or vector based such as PNG, WebP or SVG.\n   * @link https://eips.ethereum.org/EIPS/eip-6963#imagesicons\n   */\n  icon: string;\n\n  /**\n   * MUST BE a valid RFC-1034 Domain Name\n   * @link https://eips.ethereum.org/EIPS/eip-6963#rdns\n   */\n  rdns: string;\n}\n\nexport const providerInfo: EIP6963ProviderInfo = {\n  uuid: uuid(),\n  name: 'Grindery Wallet',\n  rdns: 'com.grindery.wallet',\n  icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiByeD0iNDgiIGZpbGw9IiMwQjBEMTciLz4KPHBhdGggZD0iTTUyLjcwOTMgNTQuNjI5NUw0My40MDAzIDYwLjU2MTdDNDEuOTkwMiA2MS40NjAzIDQxLjU4OTQgNjMuMzEwNSA0Mi41MDUxIDY0LjY5NDJDNDMuNDA5NyA2Ni4wNjExIDQ1LjI2MDYgNjYuNDYxNSA0Ni42NjQ4IDY1LjYwNDhMNTIuNDQ4MiA2MS43MjY5TDU3LjU1NjggNTguMjk1MUM1Ny42MzgyIDU4LjI0MTkgNTcuNzE5MyA1OC4xODk2IDU3LjgwMDMgNTguMTM4NEw1OC4wNTgxIDU3Ljk2NTVDNTguMjA1MyA1Ny44NjY4IDU4LjM1NzggNTcuNzgxMyA1OC41MTQxIDU3LjcwODlDNTguNjQwNiA1Ny42MzY5IDU4Ljc2NjYgNTcuNTY3MyA1OC44OTIxIDU3LjUwMDFDNjEuOTUwMSA1NS44NjQ0IDY1Ljc4MDQgNTYuOTcwOSA2Ny40NDczIDU5Ljk3MTdDNjguOTA3NSA2Mi42MDAzIDY4LjI0MDggNjUuODc3NiA2NS44NjQgNjcuNzU0NUM2Ni4yMzc2IDY2Ljg3NDggNjYuMTc2OCA2NS44MzUyIDY1LjYwNzkgNjQuOTc1NUM2NC43MDMzIDYzLjYwODYgNjIuODUyNCA2My4yMDgzIDYxLjQ0ODIgNjQuMDY1TDU1LjY2NDggNjcuOTQyOEw1MC41NTYyIDcxLjM3NDdDNTAuNTA3OSA3MS40MDU1IDUwLjQ1OTQgNzEuNDM1OCA1MC40MTA3IDcxLjQ2NTdMNTAuMDU1IDcxLjcwNDJDNDkuNzU1OCA3MS45MDQ5IDQ5LjQzNDkgNzIuMDUwNiA0OS4xMDQ3IDcyLjE0MzhDNDQuNjU3MyA3NC4wNTkyIDM5LjMyMzggNzIuNTg5NCAzNi41OTI0IDY4LjQ2MjFDMzMuNzUxNiA2NC4xNjk2IDM0LjczMTcgNTguNTIzNCAzOC42OTg2IDU1LjM3MzZDMzYuODE0IDU0LjY1NzkgMzUuMDI3NSA1My41OTk1IDMzLjQzNjEgNTIuMTkzNEMyNi40MzA0IDQ2LjAwMzYgMjUuODU3NyAzNS40MjA1IDMyLjE1NjkgMjguNTU1NEMzOC40NTYyIDIxLjY5MDQgNDkuMjQxOSAyMS4xNDMxIDU2LjI0NzYgMjcuMzMyOUM2My4yNTMzIDMzLjUyMjggNjMuODI2IDQ0LjEwNTkgNTcuNTI2NyA1MC45NzA5QzU2LjExNTIgNTIuNTA5MyA1NC40Nzg0IDUzLjczMDQgNTIuNzA5MyA1NC42Mjk1Wk01MS44MDcgNDYuMDUxNkM1NS40MjMgNDIuMDgyMyA1NS4wOTQzIDM1Ljk2MzEgNTEuMDcyNyAzMi4zODQxQzQ3LjA1MTEgMjguODA1MiA0MC44NTk1IDI5LjEyMTYgMzcuMjQzNSAzMy4wOTFDMzMuNjI3NCAzNy4wNjA0IDMzLjk1NjIgNDMuMTc5NSAzNy45Nzc4IDQ2Ljc1ODVDNDEuOTk5NCA1MC4zMzc1IDQ4LjE5MDkgNTAuMDIxIDUxLjgwNyA0Ni4wNTE2WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==',\n};\n","/**\n * @summary Error class for wallet Provider\n * @since 0.1.0\n * @extends Error\n */\nexport class ProviderError extends Error {\n  name: string = 'GrinderyWalletProviderError';\n  code?: number;\n  data?: unknown;\n\n  constructor(message: string, code?: number, data?: unknown) {\n    super(message);\n    this.code = code;\n    this.data = data;\n  }\n}\n\nexport const ProviderErrors = {\n  PairingFailed: new ProviderError('Pairing failed', 4900),\n  Disconnected: new ProviderError('Disconnected', 4900),\n  UnsupportedMethod: new ProviderError('Unsupported Method', 4200),\n  Unauthorized: new ProviderError('Unauthorized', 4100),\n  NoResult: new ProviderError('No result', 4900),\n  NoAppId: new ProviderError('App ID is required', 4900),\n  UserRejected: new ProviderError('User Rejected Request', 4001),\n  ChainDisconnected: new ProviderError('Chain Disconnected', 4901),\n};\n\nexport const newProviderError = (error?: unknown): ProviderError => {\n  let errorResponse: ProviderError;\n  if (error instanceof ProviderError) {\n    errorResponse = new ProviderError(\n      error.message || 'Unknown error',\n      error.code || 4900,\n      error.data\n    );\n  } else if (error instanceof Error) {\n    errorResponse = new ProviderError(\n      error.message || 'Unknown error',\n      4900,\n      error\n    );\n  } else {\n    errorResponse = new ProviderError('Unknown error', 4900, error);\n  }\n  return errorResponse;\n};\n","/**\n * Supported chains list\n *\n * @description Currently supports the following chains: Polygon, BNB Smart Chain, and opBNB Smart Chain\n *\n * @since 0.3.0\n * @type {string[]} Chain ids in CAIP-2 format\n */\nexport const CHAINS: string[] = ['eip155:137', 'eip155:56', 'eip155:204'];\n\nexport const hexChainId = (chainId: string): string => {\n  return `0x${parseInt(chainId.split(':')[1], 10).toString(16)}`;\n};\n\nexport const unhexChainId = (hexChainId: string): string => {\n  return `eip155:${parseInt(hexChainId, 16)}`;\n};\n","import { ProviderError, ProviderErrors } from './ProviderError';\nimport { SdkStorage, SdkStorageKeys } from './SdkStorage';\n\n/**\n * @summary The Grindery RPC API method names\n */\nexport enum RpcMethodNames {\n  requestPairing = 'requestPairing',\n  waitForPairingResult = 'waitForPairingResult',\n  request = 'request',\n  waitForRequestResult = 'waitForRequestResult',\n  'disconnect' = 'disconnect',\n  getUserWalletAddress = 'getUserWalletAddress',\n  trackClientEvent = 'trackClientEvent',\n}\n\n/**\n * @summary The Grindery RPC API request results\n * @since 0.2.0\n */\nexport namespace RpcRequestResults {\n  /**\n   * @summary `waitForPairingResult` method result\n   */\n  export type waitForPairingResult = {\n    session: {\n      expiry: number;\n      sessionId: string;\n      namespaces: {\n        [key: string]: {\n          accounts: string[];\n          chains: string[];\n          events: string[];\n          methods: string[];\n        };\n      };\n    };\n  };\n\n  /**\n   * @summary `requestPairing` method result\n   */\n  export type requestPairing = {\n    pairingToken: string;\n    connectUrl: string;\n    connectUrlBrowser: string;\n    shortToken: string;\n  };\n\n  /**\n   * @summary `request` method result\n   */\n  export type request = {\n    requestToken: string;\n  };\n\n  /**\n   * @summary `waitForRequestResult` method result\n   */\n  export type waitForRequestResult = any;\n\n  /**\n   * @summary `disconnect` method result\n   */\n  export type disconnect = boolean;\n\n  /**\n   * @summary `getUserWalletAddress` method result\n   */\n  export type getUserWalletAddress = string;\n\n  /**\n   * @summary `trackClientEvent` method result\n   */\n  export type trackClientEvent = true;\n}\n\n/**\n * @summary The Grindery RPC API wrapper class\n * @since 0.2.0\n */\nexport class Rpc {\n  /**\n   * @summary Sends a provider request to the Grindery RPC API and waits for the result.\n   * @public\n   * @param {RpcMethodNames} method Provider request method name\n   * @param {Array} params Provider request parameters\n   * @param {number} timeout Optional. The time in milliseconds to wait for the request result. Default is 30000.\n   * @returns The result of the provider request\n   */\n  public async sendAndWaitRpcRequest<T>(\n    method: string,\n    params?: readonly unknown[],\n    timeout?: number\n  ): Promise<T> {\n    const request = await this.sendRpcRequest(method, params);\n    return await this.waitRpcRequest(request.requestToken, timeout);\n  }\n\n  /**\n   * @summary Sends a provider request to the Grindery RPC API.\n   * @protected\n   * @param {RpcMethodNames} method Provider request method name\n   * @param {Array} params Provider request parameters\n   * @returns {RpcRequestResults.request} Promise resolving with the request token to use in the `waitGrinderyRpcProviderRequest` method\n   */\n  protected async sendRpcRequest(\n    method: string,\n    params?: readonly unknown[]\n  ): Promise<RpcRequestResults.request> {\n    const storage = new SdkStorage();\n    return await this.sendRpcApiRequest<RpcRequestResults.request>(\n      RpcMethodNames.request,\n      {\n        sessionId: storage.getValue(SdkStorageKeys.sessionId),\n        scope: storage.getValue(SdkStorageKeys.chainId),\n        request: {\n          method,\n          params,\n        },\n      }\n    );\n  }\n\n  /**\n   * @summary Waits for the result of the provider request.\n   * @protected\n   * @param {string} requestToken A token to identify provider request. Recieved in the results of `sendGrinderyRpcProviderRequest` method.\n   * @param {number} timeout Optional. The time in milliseconds to wait for the request result. Default is 30000.\n   * @returns The result of the provider request\n   */\n  protected async waitRpcRequest<T>(\n    requestToken: string,\n    timeout?: number\n  ): Promise<T> {\n    return await this.sendRpcApiRequest<T>(\n      RpcMethodNames.waitForRequestResult,\n      {\n        requestToken,\n        timeout,\n      }\n    );\n  }\n\n  /**\n   * @summary Sends a request to the Grindery Walletconnect RPC API.\n   * @public\n   * @param {RpcMethodNames} method Request method name\n   * @param {RequestArgumentsParams} params Request parameters\n   * @returns {T} The result of the request\n   */\n  public async sendRpcApiRequest<T>(\n    method: RpcMethodNames,\n    params?: unknown[] | object\n  ): Promise<T> {\n    try {\n      const response = await fetch('https://walletconnect-api.grindery.com', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          jsonrpc: '2.0',\n          id: 1,\n          method: `gws_${method}`,\n          params: params || [],\n        }),\n      });\n      const data = await response.json();\n      if (data.error) {\n        throw new ProviderError(data.error.message, data.error.code);\n      }\n      if (!data.result) {\n        throw ProviderErrors.NoResult;\n      }\n      return data.result;\n    } catch (error) {\n      if (error instanceof Error) {\n        throw new ProviderError(error.message, 500, error);\n      }\n      throw new ProviderError('Server error', 500, error);\n    }\n  }\n}\n","import { getAppId } from '../utils/getAppId';\nimport { providerInfo } from '../utils/providerInfo';\nimport { EventEmitter, ProviderEvents } from './EventEmitter';\nimport { ProviderErrors, newProviderError } from './ProviderError';\nimport { Rpc, RpcMethodNames, RpcRequestResults } from './Rpc';\nimport { SdkStorage, SdkStorageKeys } from './SdkStorage';\nimport { CHAINS, hexChainId, unhexChainId } from '../utils/chains';\n\n/**\n * @summary The Grindery wallet provider methods\n * @since 0.2.0\n */\nexport type ProviderMethods = {\n  [name in ProviderMethodNames]: (\n    params?: ProviderRequestArgumentsParams\n  ) => Promise<unknown>;\n};\n\n/**\n * @summary The Grindery wallet provider method names\n * @since 0.2.0\n * @since 0.3.0 Added `eth_chainId`, `wallet_addEthereumChain` and `wallet_switchEthereumChain` methods\n */\nexport enum ProviderMethodNames {\n  eth_requestAccounts = 'eth_requestAccounts',\n  eth_accounts = 'eth_accounts',\n  personal_sign = 'personal_sign',\n  eth_sendTransaction = 'eth_sendTransaction',\n  gws_disconnect = 'gws_disconnect',\n  eth_chainId = 'eth_chainId',\n  wallet_addEthereumChain = 'wallet_addEthereumChain',\n  wallet_switchEthereumChain = 'wallet_switchEthereumChain',\n}\n\nexport namespace ProviderRequestResults {\n  export type eth_accounts = string[];\n  export type eth_requestAccounts = string[];\n  export type personal_sign = string;\n  export type eth_sendTransaction = string;\n  export type disconnect = boolean;\n  export type wallet_switchEthereumChain = null;\n  export type wallet_addEthereumChain = null;\n  export type eth_chainId = string;\n}\n\n/**\n * @summary The Grindery wallet provider method names\n * @since 0.2.0\n */\nexport type ProviderMethodName = keyof typeof ProviderMethodNames;\n\n/**\n * @summary The Grindery wallet provider request params\n * @since 0.2.0\n */\nexport type ProviderRequestArgumentsParams = readonly unknown[] | object;\n\n/**\n * @summary The Grindery wallet provider request arguments\n * @since 0.2.0\n */\nexport interface ProviderRequestArguments {\n  readonly method: ProviderMethodName;\n  readonly params?: ProviderRequestArgumentsParams;\n}\n\n/**\n * @summary The base wallet provider class\n * @since 0.2.0\n * @extends EventEmitter\n */\nexport class Provider extends EventEmitter {\n  public isGrinderyWallet: boolean = true;\n\n  constructor() {\n    super();\n\n    this.injectProvider();\n    this.listenForRequestProviderEvents();\n    this.announceProvider();\n    window.addEventListener('load', () => {\n      this.emit(ProviderEvents.connect, {\n        chainId: hexChainId(\n          this.storage.getValue(SdkStorageKeys.chainId) || CHAINS[0]\n        ),\n      });\n      this.restorePairing();\n      this.restoreSession();\n    });\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server.\n   */\n  public isConnected(): boolean {\n    // Always true\n    return true;\n  }\n\n  /**\n   * @summary Sends a request to the provider\n   * @public\n   * @param {ProviderRequestArguments} args Request arguments\n   * @param {string} args.method The method name\n   * @param {ProviderRequestArgumentsParams} args.params The method parameters\n   * @returns {T} The result of the request\n   */\n  public async request<T>({\n    method,\n    params,\n  }: ProviderRequestArguments): Promise<T> {\n    return (await this.methods[method]?.(params)) as T;\n  }\n\n  private storage: SdkStorage = new SdkStorage();\n\n  private rpc: Rpc = new Rpc();\n\n  /**\n   * @summary Switches the chain\n   * @since 0.3.0\n   * @param {string} chainId Chain id in hex format\n   * @returns {null} `Null` on success\n   */\n  private switchChain = async ({ chainId }: any): Promise<null> => {\n    const chainCaip = unhexChainId(chainId);\n    if (!CHAINS.includes(chainCaip)) {\n      throw newProviderError(ProviderErrors.ChainDisconnected);\n    }\n    this.storage.setValue(SdkStorageKeys.chainId, chainCaip);\n    this.emit(ProviderEvents.chainChanged, { chainId });\n    return null;\n  };\n\n  /**\n   * @summary The list of supported provider methods.\n   * @private\n   */\n  private methods: Partial<ProviderMethods> = {\n    /**\n     * @summary The `eth_requestAccounts` provider method\n     */\n    [ProviderMethodNames.eth_requestAccounts]: async (\n      params?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.eth_requestAccounts> => {\n      if (this.storage.getValue('sessionId')) {\n        try {\n          return await this.request<ProviderRequestResults.eth_accounts>({\n            method: ProviderMethodNames.eth_accounts,\n            params: [],\n          });\n        } catch (error) {\n          this.storage.setValue(SdkStorageKeys.sessionId, '');\n          // skip failed request and continue with pairing\n        }\n      }\n      if (this.storage.getValue('pairingToken')) {\n        try {\n          const pairResult =\n            (await this.rpc.sendRpcApiRequest<RpcRequestResults.waitForPairingResult>(\n              RpcMethodNames.waitForPairingResult,\n              {\n                pairingToken: this.storage.getValue(\n                  SdkStorageKeys.pairingToken\n                ),\n              }\n            )) as RpcRequestResults.waitForPairingResult;\n\n          this.storage.clear();\n          this.storage.setValue(\n            SdkStorageKeys.sessionId,\n            pairResult.session.sessionId\n          );\n\n          if (!pairResult.session.sessionId) {\n            throw ProviderErrors.PairingFailed;\n          }\n\n          return await this.request<ProviderRequestResults.eth_accounts>({\n            method: ProviderMethodNames.eth_accounts,\n            params: params || [],\n          });\n        } catch (error) {\n          this.storage.clear();\n          // skip failed request and continue with pairing\n        }\n      }\n      try {\n        this.storage.clear();\n        const result =\n          (await this.rpc.sendRpcApiRequest<RpcRequestResults.requestPairing>(\n            RpcMethodNames.requestPairing,\n            {\n              appId: getAppId(),\n              clientId: this.storage.getValue(SdkStorageKeys.clientId),\n            }\n          )) as RpcRequestResults.requestPairing;\n\n        if (!result.pairingToken || !result.connectUrl) {\n          throw ProviderErrors.PairingFailed;\n        }\n\n        this.storage.setValue(SdkStorageKeys.pairingToken, result.pairingToken);\n        this.storage.setValue(SdkStorageKeys.connectUrl, result.connectUrl);\n        this.storage.setValue(\n          SdkStorageKeys.connectUrlBrowser,\n          result.connectUrlBrowser\n        );\n        this.storage.setValue(SdkStorageKeys.shortToken, result.shortToken);\n        this.emit(ProviderEvents.pair, {\n          shortToken: result.shortToken,\n          connectUrl: result.connectUrl,\n          connectUrlBrowser: result.connectUrlBrowser,\n        });\n        const pairResult =\n          (await this.rpc.sendRpcApiRequest<RpcRequestResults.waitForPairingResult>(\n            RpcMethodNames.waitForPairingResult,\n            {\n              pairingToken: result.pairingToken,\n            }\n          )) as RpcRequestResults.waitForPairingResult;\n\n        this.storage.setValue(\n          SdkStorageKeys.sessionId,\n          pairResult.session.sessionId\n        );\n\n        if (!pairResult.session.sessionId) {\n          throw ProviderErrors.PairingFailed;\n        }\n        this.storage.setValue(SdkStorageKeys.pairingToken, '');\n        this.storage.setValue(SdkStorageKeys.connectUrl, '');\n        this.storage.setValue(SdkStorageKeys.connectUrlBrowser, '');\n        this.storage.setValue(SdkStorageKeys.shortToken, '');\n\n        return await this.request({\n          method: ProviderMethodNames.eth_accounts,\n          params: params || [],\n        });\n      } catch (error) {\n        throw error;\n      }\n    },\n\n    /**\n     * @summary The `eth_accounts` provider method\n     */\n    [ProviderMethodNames.eth_accounts]: async (\n      params?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.eth_accounts> => {\n      try {\n        const result = (await this.rpc.sendAndWaitRpcRequest<string[]>(\n          ProviderMethodNames.eth_accounts,\n          params ? (Array.isArray(params) ? params : [params]) : []\n        )) as ProviderRequestResults.eth_accounts;\n        this.storage.setValue(SdkStorageKeys.address, result[0] || '');\n        this.emit(ProviderEvents.accountsChanged, result);\n        return result;\n      } catch (error) {\n        throw newProviderError(error);\n      }\n    },\n\n    /**\n     * @summary The `eth_sendTransaction` provider method\n     */\n    [ProviderMethodNames.eth_sendTransaction]: async (\n      params?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.eth_sendTransaction> => {\n      return (await this.rpc.sendAndWaitRpcRequest(\n        ProviderMethodNames.eth_sendTransaction,\n        params ? (Array.isArray(params) ? params : [params]) : []\n      )) as ProviderRequestResults.eth_sendTransaction;\n    },\n\n    /**\n     * @summary The `personal_sign` provider method\n     */\n    [ProviderMethodNames.personal_sign]: async (\n      params?: Partial<ProviderRequestArgumentsParams>\n    ): Promise<ProviderRequestResults.personal_sign> => {\n      return (await this.rpc.sendAndWaitRpcRequest(\n        ProviderMethodNames.personal_sign,\n        params ? (Array.isArray(params) ? params : [params]) : []\n      )) as ProviderRequestResults.personal_sign;\n    },\n\n    /**\n     * @summary The `gws_disconnect` provider method\n     */\n    [ProviderMethodNames.gws_disconnect]:\n      async (): Promise<ProviderRequestResults.disconnect> => {\n        try {\n          const result =\n            await this.rpc.sendRpcApiRequest<ProviderRequestResults.disconnect>(\n              RpcMethodNames.disconnect,\n              {\n                sessionToken: this.storage.getValue(SdkStorageKeys.sessionId),\n              }\n            );\n\n          this.emit(ProviderEvents.disconnect, ProviderErrors.Disconnected);\n\n          return result;\n        } catch (error) {\n          throw newProviderError(error);\n        }\n      },\n\n    /**\n     * @summary The `eth_chainId` provider method\n     * @since 0.3.0\n     */\n    [ProviderMethodNames.eth_chainId]: async (\n      _?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.eth_chainId> => {\n      return hexChainId(\n        this.storage.getValue(SdkStorageKeys.chainId) || CHAINS[0]\n      );\n    },\n\n    /**\n     * @summary The `wallet_addEthereumChain` provider method\n     * @since 0.3.0\n     */\n    [ProviderMethodNames.wallet_addEthereumChain]: async (\n      _?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.wallet_addEthereumChain> => {\n      throw newProviderError(ProviderErrors.UserRejected);\n    },\n\n    /**\n     * @summary The `wallet_switchEthereumChain` provider method\n     * @since 0.3.0\n     */\n    [ProviderMethodNames.wallet_switchEthereumChain]: async (\n      params?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.wallet_switchEthereumChain> =>\n      await this.switchChain(params),\n  };\n\n  /**\n   * @summary Restores the pairing process if pairing token is stored in the local storage\n   * @private\n   * @returns {void}\n   */\n  private async restorePairing(): Promise<void> {\n    const pairingToken = this.storage.getValue(SdkStorageKeys.pairingToken);\n    const sessionId = this.storage.getValue(SdkStorageKeys.sessionId);\n    if (pairingToken && !sessionId) {\n      try {\n        const pairResult =\n          await this.rpc.sendRpcApiRequest<RpcRequestResults.waitForPairingResult>(\n            RpcMethodNames.waitForPairingResult,\n            {\n              pairingToken,\n            }\n          );\n\n        this.storage.clear();\n        this.storage.setValue(\n          SdkStorageKeys.sessionId,\n          pairResult.session.sessionId\n        );\n\n        if (!pairResult.session.sessionId) {\n          throw ProviderErrors.PairingFailed;\n        }\n\n        const accounts = (\n          pairResult.session?.namespaces?.[`eip155`]?.accounts || []\n        ).map((account) =>\n          account.includes(':') ? account.split(':')[2] || '' : account\n        );\n        this.storage.setValue(SdkStorageKeys.address, accounts[0] || '');\n        this.emit(ProviderEvents.accountsChanged, accounts);\n      } catch (error) {\n        this.storage.clear();\n      }\n    }\n  }\n\n  /**\n   * @summary Restores the session if session Id is stored in the local storage\n   * @private\n   * @returns {void}\n   */\n  private async restoreSession(): Promise<void> {\n    const pairingToken = this.storage.getValue(SdkStorageKeys.pairingToken);\n    const sessionId = this.storage.getValue(SdkStorageKeys.sessionId);\n    if (sessionId && !pairingToken) {\n      try {\n        await this.request<string[]>({\n          method: ProviderMethodNames.eth_requestAccounts,\n        });\n      } catch (error) {\n        this.storage.clear();\n      }\n    }\n  }\n\n  /**\n   * @summary Injects the provider into the window object\n   * @private\n   * @returns {void}\n   */\n  private injectProvider(): void {\n    if (!window.ethereum) {\n      window.ethereum = this;\n    } else {\n      if (\n        window.ethereum.providers &&\n        Array.isArray(window.ethereum.providers)\n      ) {\n        window.ethereum.providers.push(this);\n      } else {\n        window.ethereum.providers = [window.ethereum, this];\n      }\n    }\n  }\n\n  /**\n   * @summary Announces the provider to the window object\n   * @private\n   * @since 0.1.1\n   * @link https://eips.ethereum.org/EIPS/eip-6963#announce-and-request-events\n   * @returns {void}\n   */\n  private announceProvider(): void {\n    window.dispatchEvent(\n      new CustomEvent('eip6963:announceProvider', {\n        detail: Object.freeze({ info: providerInfo, provider: this }),\n      })\n    );\n  }\n\n  /**\n   * @summary Listens for the request provider events\n   * @private\n   * @since 0.1.1\n   * @link https://eips.ethereum.org/EIPS/eip-6963#announce-and-request-events\n   * @returns {void}\n   */\n  private listenForRequestProviderEvents(): void {\n    window.addEventListener('eip6963:requestProvider', () => {\n      this.announceProvider();\n    });\n  }\n}\n","export enum ClientEventNames {\n  /**\n   * @summary The event is triggered every time the app page is opened\n   */\n  appOpened = 'appOpened',\n  /**\n   * @summary The event is triggered when the user wallet is connected\n   */\n  walletConnected = 'walletConnected',\n  /**\n   * @summary The event is triggered when the user wallet is disconnected\n   */\n  walletDisconnected = 'walletDisconnected',\n  /**\n   * @summary The event is triggered when the app requests user wallet address\n   */\n  walletAddressRequested = 'walletAddressRequested',\n}\n\nexport type ClientEventName = keyof typeof ClientEventNames;\n","import { SdkStorage, SdkStorageKeys } from './SdkStorage';\n\n/**\n * @summary The Grindery Wallet API wrapper class\n * @since 0.5.0\n */\nexport class WalletAPI {\n  /**\n   * @summary Sends a request to the Grindery Wallet API\n   * @public\n   * @param {string} path API route path\n   * @param {string} method Optional. The request method. Default is 'GET'.\n   * @param {object} body Optional. The request body.\n   * @returns {T} The result of the API request\n   */\n  public async sendApiRequest<T>(\n    path: string,\n    method?: string,\n    body?: object\n  ): Promise<T> {\n    const storage = new SdkStorage();\n    const sessionId = storage.getValue(SdkStorageKeys.sessionId);\n    const address = storage.getValue(SdkStorageKeys.address);\n    if (!sessionId || !address) {\n      throw new Error('Not connected to the wallet');\n    }\n    const response = await fetch(\n      `https://wallet-api.grindery.com${\n        path.startsWith('/') ? path : '/' + path\n      }`,\n      {\n        method: method || 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${address}:${sessionId}`,\n        },\n        body: body ? JSON.stringify(body) : undefined,\n      }\n    );\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch ${path}`);\n    }\n\n    return (await response.json()) as T;\n  }\n}\n","import { WalletSDK } from './classes/WalletSDK';\n\ndeclare global {\n  interface Window {\n    Telegram?: any;\n    ethereum?: any;\n    Grindery?: {\n      appId?: string;\n      appUrl?: string;\n      WalletSDK?: WalletSDK;\n    };\n  }\n}\n\n/**\n * @summary The Grindery Wallet SDK\n */\nexport const GrinderyWalletSDK = WalletSDK;\n\nfunction init() {\n  if (\n    !window.Grindery?.WalletSDK ||\n    !(window.Grindery.WalletSDK instanceof WalletSDK)\n  ) {\n    window.Grindery = {\n      ...(window.Grindery || {}),\n      WalletSDK: new WalletSDK(),\n    };\n  }\n}\n\n// Initialize the SDK\ninit();\n","import { ProviderEventName, ProviderEvents } from './EventEmitter';\nimport { Provider, ProviderMethodNames } from './Provider';\nimport { Rpc, RpcMethodNames, RpcRequestResults } from './Rpc';\nimport { SdkStorage, SdkStorageKeys } from './SdkStorage';\nimport { CHAINS, hexChainId } from '../utils/chains';\nimport { getAppId } from '../utils/getAppId';\nimport { ClientEventName, ClientEventNames } from '../utils/clientEvents';\nimport { User } from '../utils/user';\nimport { WalletAPI } from './WalletAPI';\n\nexport type WalletSDKConfig = {\n  appId?: string;\n  appUrl?: string;\n};\n\n/**\n * @summary The Wallet SDK class\n * @since 0.2.0\n */\nexport class WalletSDK {\n  /**\n   * @summary The provider instance\n   * @public\n   */\n  public provider: Provider;\n\n  constructor(config?: WalletSDKConfig) {\n    if (config?.appId || config?.appUrl) {\n      window.Grindery = {\n        ...(window.Grindery || {}),\n        appId: config?.appId,\n        appUrl: config?.appUrl,\n      };\n    }\n\n    this.storage.setValue(\n      SdkStorageKeys.chainId,\n      this.storage.getValue(SdkStorageKeys.chainId) || CHAINS[0]\n    );\n    this.provider = this.getWeb3Provider();\n    this.initTracking();\n    this.provider.on(ProviderEvents.pair, this.handlePairing);\n  }\n\n  /**\n   * @summary Checks if the provider is connected to the server\n   * @returns {boolean} True if the provider is connected to the server.\n   *\n   * @example\n   * ```typescript\n   * const isConnected = window.Grindery.WalletSDK.isConnected();\n   * ```\n   */\n  public isConnected(): boolean {\n    return this.provider.isConnected();\n  }\n\n  /**\n   * @summary Checks if the provider is connected to the server and the Grindery Wallet\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet.\n   */\n  public isWalletConnected(): boolean {\n    return (\n      this.isConnected() &&\n      !!this.storage.getValue(SdkStorageKeys.pairingToken) &&\n      !this.storage.getValue(SdkStorageKeys.sessionId)\n    );\n  }\n\n  /**\n   * @summary Initiate connection to the Grindery Wallet\n   * @public\n   * @returns {Promise<string[]>} The array of ethereum addresses\n   * @since 0.1.0\n   */\n  public async connect(): Promise<string[]> {\n    return await this.provider.request({\n      method: ProviderMethodNames.eth_requestAccounts,\n    });\n  }\n\n  /**\n   * @summary Disconnects Grindery Wallet\n   * @public\n   * @returns {Promise<boolean>} True if wallet is disconnected\n   * @since 0.1.0\n   */\n  public async disconnect(): Promise<boolean> {\n    return await this.provider.request({\n      method: ProviderMethodNames.gws_disconnect,\n    });\n  }\n\n  /**\n   * @summary Sends a transaction request to the Grindery Wallet\n   * @public\n   * @since 0.1.0\n   * @param {object} params The transaction parameters\n   * @param {string} params.to The recipient address\n   * @param {string} [params.value] The amount to send in wei\n   * @param {string} [params.data] The data to send\n   * @returns {Promise<string>} Transaction hash string\n   */\n  public async sendTransaction(params: {\n    to: string;\n    value?: string;\n    data?: string;\n  }): Promise<string> {\n    return await this.provider.request<string>({\n      method: ProviderMethodNames.eth_sendTransaction,\n      params: [params],\n    });\n  }\n\n  /**\n   * @summary Sends a personal signature request to the Grindery Wallet\n   * @public\n   * @since 0.1.0\n   * @param {string} message The message to sign\n   * @returns {Promise<string>} Signature string\n   */\n  public async signMessage(message: string): Promise<string> {\n    return await this.provider.request<string>({\n      method: ProviderMethodNames.personal_sign,\n      params: [message, this.storage.getValue('address')],\n    });\n  }\n\n  /**\n   * @summary Requests the Grindery Wallet to switch the chain\n   * @public\n   * @since 0.3.0\n   * @param {string} chainId Chain id in CAIP-2 format\n   * @returns {Promise<null>} Returns `null` on success\n   */\n  public async switchChain(chainId: string): Promise<null> {\n    return await this.provider.request<null>({\n      method: ProviderMethodNames.wallet_switchEthereumChain,\n      params: { chainId: hexChainId(chainId) },\n    });\n  }\n\n  /**\n   * @summary Gets currently connected chain\n   * @public\n   * @since 0.3.0\n   * @returns {string} Returns chain id in CAIP-2 format\n   */\n  public getChain(): string {\n    return this.storage.getValue(SdkStorageKeys.chainId) || CHAINS[0];\n  }\n\n  /**\n   * @summary Exchange Telegram user ID to Grindery Wallet address\n   * @public\n   * @since 0.4.0\n   * @param {string} userId Telegram user ID\n   * @returns {Promise<string>} Grindery Wallet address\n   */\n  public async getUserWalletAddress(\n    userId: string\n  ): Promise<RpcRequestResults.getUserWalletAddress> {\n    const rpc = new Rpc();\n    this.trackClientEvent(ClientEventNames.walletAddressRequested, { userId });\n    return await rpc.sendRpcApiRequest<RpcRequestResults.getUserWalletAddress>(\n      RpcMethodNames.getUserWalletAddress,\n      { appId: getAppId(), userId }\n    );\n  }\n\n  /**\n   * @summary Adds a listener to the event\n   * @public\n   * @param {ProviderEventName} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public on(event: ProviderEventName, callback: Function) {\n    this.provider.on(event, callback);\n    return this;\n  }\n\n  /**\n   * @summary Removes a listener from the event\n   * @public\n   * @param {ProviderEventName} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public removeListener(event: ProviderEventName, callback: Function) {\n    this.provider.removeListener(event, callback);\n    return this;\n  }\n\n  /**\n   * @summary Gets the Grindery user information\n   * @public\n   * @since 0.5.0\n   * @returns {Promise<User>} The Grindery user information\n   */\n  public async getUser(): Promise<User> {\n    if (!this.user) {\n      const api = new WalletAPI();\n      try {\n        this.user = await api.sendApiRequest<User>('/v2/me');\n      } catch (e) {\n        throw new Error(\n          e instanceof Error ? e.message : 'Failed to fetch user information'\n        );\n      }\n    }\n    return this.user;\n  }\n\n  /**\n   * @summary SdkStorage class instance\n   * @private\n   */\n  private storage: SdkStorage = new SdkStorage();\n\n  /**\n   * @summary The Grindery Wallet user\n   * @private\n   */\n  private user: User | null = null;\n\n  /**\n   * @summary Gets the Grindery Wallet ethereum provider\n   * @returns {Provider} The Grindery Wallet ethereum provider\n   */\n  private getWeb3Provider(): Provider {\n    let provider = window.ethereum?.providers?.find(\n      (provider: Provider | unknown) =>\n        provider instanceof Provider && provider.isGrinderyWallet\n    );\n    if (\n      !provider &&\n      window.ethereum instanceof Provider &&\n      window.ethereum.isGrinderyWallet\n    ) {\n      provider = window.ethereum;\n    }\n    if (!provider) {\n      provider = new Provider();\n    }\n    return provider;\n  }\n\n  /**\n   * @summary Handles the pairing request, by opening the Grindery Wallet\n   * @private\n   * @param ProviderRequestPairingResult\n   * @returns {void}\n   */\n  private handlePairing({\n    shortToken,\n    connectUrlBrowser,\n  }: RpcRequestResults.requestPairing): void {\n    const WebApp = window.Telegram?.WebApp;\n    const redirectUrl = `https://walletconnect.grindery.com/connect/wc?uri=${shortToken}`;\n    if (\n      WebApp &&\n      WebApp.openTelegramLink &&\n      WebApp.platform &&\n      WebApp.platform !== 'unknown'\n    ) {\n      WebApp.openTelegramLink(connectUrlBrowser);\n    } else {\n      window.open(redirectUrl, '_blank');\n    }\n  }\n\n  /**\n   * @summary Tracks client side event\n   * @since 0.4.2\n   * @private\n   * @param AppEvent\n   * @returns {Promise<void>}\n   */\n  private async trackClientEvent(\n    name: ClientEventName,\n    data?: Record<string, unknown>\n  ): Promise<void> {\n    const appUrl = window.Grindery?.appUrl || window.location.origin;\n    const appId = getAppId();\n    const userTelegramId = window.Telegram?.WebApp?.initDataUnsafe?.user?.id;\n\n    try {\n      const rpc = new Rpc();\n      await rpc.sendRpcApiRequest<RpcRequestResults.trackClientEvent>(\n        RpcMethodNames.trackClientEvent,\n        {\n          name,\n          appUrl,\n          userTelegramId,\n          data: {\n            ...(data || {}),\n            pageUrl: window.location.href,\n            appId,\n            sessionId: this.storage.getValue(SdkStorageKeys.sessionId),\n            clientId: this.storage.getValue(SdkStorageKeys.clientId),\n            isMiniApp: Boolean(window.Telegram?.initDataUnsafe),\n            miniAppPlatform: window.Telegram?.WebApp?.platform,\n            miniAppSdkVersion: window.Telegram?.WebApp?.version,\n            userAgent: window.navigator.userAgent,\n          },\n        }\n      );\n    } catch (e) {\n      // ignore\n    }\n  }\n\n  /**\n   * @summary Initializes the tracking\n   * @since 0.4.2\n   * @private\n   * @returns {void}\n   */\n  private initTracking(): void {\n    this.trackClientEvent(ClientEventNames.appOpened);\n\n    const onWalletConnect = (wallets: string[]) => {\n      if (wallets.length > 0) {\n        this.trackClientEvent(ClientEventNames.walletConnected, {\n          wallets: wallets,\n        });\n      }\n    };\n\n    const onWalletDisconnect = () => {\n      this.trackClientEvent(ClientEventNames.walletDisconnected);\n    };\n\n    this.on(ProviderEvents.accountsChanged, onWalletConnect);\n    this.on(ProviderEvents.disconnect, onWalletDisconnect);\n  }\n}\n"],"names":["ProviderEvents","SdkStorageKeys","EventEmitter","this","events","Map","_proto","prototype","on","event","callback","has","set","get","push","removeListener","callbacks","filter","cb","emit","_len","arguments","length","data","Array","_key","console","log","forEach","apply","getAppId","_window$Grindery","appId","elements","document","querySelectorAll","i","element","value","getAttribute","src","isGrinderySrc","includes","window","Grindery","uuid","d","Math","random","toString","substr","vr","parseInt","providerInfo","name","rdns","icon","ProviderError","_Error","message","code","_this","call","_inheritsLoose","_wrapNativeSuper","Error","ProviderErrors","PairingFailed","Disconnected","UnsupportedMethod","Unauthorized","NoResult","NoAppId","UserRejected","ChainDisconnected","newProviderError","error","CHAINS","hexChainId","chainId","split","unhexChainId","LOCALSTORAGE_KEY","RpcMethodNames","SdkStorage","getValue","key","getSnapshot","setValue","snapshot","saveSnapshot","clear","clientId","JSON","parse","localStorage","getItem","setItem","stringify","storage","ProviderMethodNames","Rpc","sendAndWaitRpcRequest","_sendAndWaitRpcRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","method","params","timeout","request","wrap","_context","prev","next","sendRpcRequest","sent","waitRpcRequest","requestToken","abrupt","stop","_x","_x2","_x3","_sendRpcRequest","_callee2","_context2","sendRpcApiRequest","sessionId","scope","_x4","_x5","_waitRpcRequest","_callee3","_context3","waitForRequestResult","_x6","_x7","_sendRpcApiRequest","_callee4","response","_context4","fetch","headers","body","jsonrpc","id","json","result","t0","_x8","_x9","Provider","ClientEventNames","_EventEmitter","_this$methods","_ref10","_ref9","_ref8","_ref6","_ref5","_ref4","_ref3","isGrinderyWallet","rpc","switchChain","_ref2","_ref","chainCaip","chainChanged","methods","eth_requestAccounts","pairResult","_pairResult","eth_accounts","waitForPairingResult","pairingToken","session","t1","requestPairing","connectUrl","connectUrlBrowser","shortToken","pair","t2","isArray","address","accountsChanged","eth_sendTransaction","personal_sign","_callee5","_context5","gws_disconnect","_callee6","_context6","disconnect","sessionToken","eth_chainId","_callee7","_","_context7","wallet_addEthereumChain","_callee8","_context8","wallet_switchEthereumChain","_callee9","_context9","injectProvider","listenForRequestProviderEvents","announceProvider","addEventListener","connect","restorePairing","restoreSession","isConnected","_request","_callee10","_ref11","_this$methods$method","_this$methods2","_context10","_restorePairing","_callee11","_pairResult$session","accounts","_context11","namespaces","map","account","_restoreSession","_callee12","_context12","ethereum","providers","dispatchEvent","CustomEvent","detail","Object","freeze","info","provider","_this2","WalletAPI","sendApiRequest","_sendApiRequest","path","startsWith","Authorization","undefined","ok","WalletSDK","config","user","appUrl","_extends","getWeb3Provider","initTracking","handlePairing","isWalletConnected","_connect","_disconnect","sendTransaction","_sendTransaction","signMessage","_signMessage","_switchChain","getChain","getUserWalletAddress","_getUserWalletAddress","userId","trackClientEvent","walletAddressRequested","getUser","_getUser","api","_window$ethereum","find","_window$Telegram","WebApp","Telegram","redirectUrl","openTelegramLink","platform","open","_trackClientEvent","_window$Telegram2","userTelegramId","_window$Telegram3","_window$Telegram4","_window$Telegram5","location","origin","initDataUnsafe","pageUrl","href","isMiniApp","Boolean","miniAppPlatform","miniAppSdkVersion","version","userAgent","navigator","appOpened","wallets","walletConnected","walletDisconnected","GrinderyWalletSDK"],"mappings":"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"}