{"version":3,"file":"grindery-wallet-sdk.umd.production.min.js","sources":["../src/utils/uuid.ts","../src/provider/WalletProviderEventEmitter.ts","../src/provider/WalletProviderLocalStorage.ts","../src/provider/WalletProvider.ts","../src/provider/WalletProviderError.ts","../src/utils/providerInfo.ts","../src/provider/GrinderyWalletProvider.ts","../src/index.ts","../src/sdk/GrinderyWalletSDK.ts","../src/utils/getAppId.ts"],"sourcesContent":["/**\n * @summary Generates a Version 4 (pseudorandom) UUID\n * @returns {string} The UUID\n */\nexport const uuid = (): string => {\n  let d = '';\n  while (d.length < 32) d += Math.random().toString(16).substr(2);\n  const vr = ((parseInt(d.substr(16, 1), 16) & 0x3) | 0x8).toString(16);\n  return `${d.substr(0, 8)}-${d.substr(8, 4)}-4${d.substr(\n    13,\n    3\n  )}-${vr}${d.substr(17, 3)}-${d.substr(20, 12)}`;\n};\n","import { ProviderEvent } from '../types';\n\nexport enum ProviderEvents {\n  accountsChanged = 'accountsChanged',\n  pair = 'pair',\n  connect = 'connect',\n  disconnect = 'disconnect',\n  chainChanged = 'chainChanged',\n  message = 'message',\n}\n\n/**\n * @summary A class for emitting provider events\n * @since 0.1.0\n */\nexport class WalletProviderEventEmitter {\n  /**\n   * @summary A map of events and their listeners\n   * @public\n   */\n  public events: Map<ProviderEvent, Array<Function>>;\n\n  constructor() {\n    this.events = new Map();\n  }\n\n  /**\n   * @summary Adds a listener to the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public on(event: ProviderEvent, callback: Function) {\n    if (!this.events.has(event)) {\n      this.events.set(event, []);\n    }\n    this.events.get(event)!.push(callback);\n    return this;\n  }\n\n  /**\n   * @summary Removes a listener from the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public removeListener(event: ProviderEvent, callback: Function) {\n    if (this.events.has(event)) {\n      const callbacks = this.events.get(event)!.filter((cb) => cb !== callback);\n      this.events.set(event, callbacks);\n    }\n    return this;\n  }\n\n  /**\n   * @summary Emits an event\n   * @public\n   * @param {string} event Event name\n   * @param data Event data\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  protected emit(event: ProviderEvent, ...data: any[]) {\n    if (this.events.has(event)) {\n      console.log('[Grindery.WalletSDK] > Event:', event, data[0]);\n      this.events.get(event)!.forEach((callback) => {\n        callback(...data);\n      });\n    }\n    return this;\n  }\n}\n","import { ProviderStorage, ProviderStorageKey } from '../types';\nimport { uuid } from '../utils/uuid';\nimport { WalletProviderEventEmitter } from './WalletProviderEventEmitter';\n\nconst LOCALSTORAGE_KEY = 'GrinderyWalletProvider';\n\nexport enum ProviderStorageKeys {\n  pairingToken = 'pairingToken',\n  sessionId = 'sessionId',\n  connectUrl = 'connectUrl',\n  connectUrlBrowser = 'connectUrlBrowser',\n  shortToken = 'shortToken',\n  clientId = 'clientId',\n}\n\n/**\n * @summary A local storage class for the provider\n * @since 0.1.0\n * @extends WalletProviderEventEmitter\n */\nexport class WalletProviderLocalStorage extends WalletProviderEventEmitter {\n  /**\n   * @summary Gets the value of the storage by the key\n   * @protected\n   * @param {ProviderStorageKey} key Provider storage key\n   * @returns {string} The value of the storage by the key\n   */\n  protected getStorageValue(key: ProviderStorageKey): string {\n    const value = this.getStorage()[key] || '';\n    return value;\n  }\n\n  /**\n   * @summary Sets the value of the storage by the key\n   * @protected\n   * @param {ProviderStorageKey} key Provider storage key\n   * @param {string} value The value to set\n   * @returns {void}\n   */\n  protected setStorageValue(key: ProviderStorageKey, value: string): string {\n    const storage = this.getStorage();\n    storage[key] = value;\n    this.saveStorage(storage);\n    return value;\n  }\n\n  /**\n   * @summary Clears the storage\n   * @protected\n   * @returns {void}\n   */\n  protected clearStorage(): void {\n    this.saveStorage({\n      clientId: this.getStorage().clientId || uuid(),\n    });\n  }\n\n  /**\n   * @summary Gets the provider storage\n   * @returns {ProviderStorage} The provider storage\n   */\n  private getStorage(): ProviderStorage {\n    try {\n      return JSON.parse(\n        localStorage.getItem(LOCALSTORAGE_KEY) || '{}'\n      ) as ProviderStorage;\n    } catch (error) {\n      localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify({}));\n      throw new Error('Error parsing storage');\n    }\n  }\n\n  /**\n   * @summary Saves the provider storage\n   * @param {ProviderStorage} storage Provider storage object\n   */\n  private saveStorage(storage: ProviderStorage): void {\n    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(storage));\n  }\n}\n","import {\n  ProviderStorageKeys,\n  WalletProviderLocalStorage,\n} from './WalletProviderLocalStorage';\nimport {\n  Address,\n  ChainId,\n  GrinderyRpcApiRequestResults,\n  GrinderyRpcMethodName,\n  GrinderyRpcProviderRequestMethodName,\n  ProviderMethods,\n  ProviderRequestResult,\n  RequestArguments,\n  RequestArgumentsParams,\n  RequestToken,\n} from '../types';\nimport {\n  WalletProviderError,\n  WalletProviderErrors,\n} from './WalletProviderError';\nimport { uuid } from '../utils/uuid';\nimport { ProviderEvents } from './WalletProviderEventEmitter';\nimport { providerInfo } from '../utils/providerInfo';\n\n/**\n * @summary The Grindery RPC API method names\n */\nexport enum GrinderyRpcMethodNames {\n  requestPairing = 'requestPairing',\n  waitForPairingResult = 'waitForPairingResult',\n  request = 'request',\n  waitForRequestResult = 'waitForRequestResult',\n  'disconnect' = 'disconnect',\n}\n\n/**\n * @summary The base wallet provider class\n * @since 0.1.0\n * @extends WalletProviderLocalStorage\n */\nexport class WalletProvider extends WalletProviderLocalStorage {\n  constructor() {\n    super();\n\n    this.injectProvider();\n    this.listenForRequestProviderEvents();\n    this.announceProvider();\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server.\n   */\n  public isConnected(): boolean {\n    return !!this.chainId;\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet.\n   */\n  public isWalletConnected(): boolean {\n    return (\n      this.isConnected() &&\n      !!this.getStorageValue(ProviderStorageKeys.sessionId)\n    );\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet pairing is in progress (pending).\n   */\n  public isWalletConnectionPending(): boolean {\n    return (\n      this.isConnected() &&\n      !!this.getStorageValue(ProviderStorageKeys.pairingToken) &&\n      !this.getStorageValue(ProviderStorageKeys.sessionId)\n    );\n  }\n\n  /**\n   * @summary Gets the connected chain ID in hex format\n   * @public\n   * @returns {ChainId} The chain ID in hex format\n   */\n  public getChain(): ChainId {\n    return `0x${parseFloat(this.chainId.split(':')[1]).toString(16)}`;\n  }\n\n  /**\n   * @summary Gets the connected user's wallet address\n   * @public\n   * @returns {Address} The ethereum wallet address\n   */\n  public getAddress(): Address {\n    return this.accounts[0] || '';\n  }\n\n  /**\n   * @summary Sets the application ID\n   * @public\n   * @param {string} appId The application ID\n   * @returns {string} The application ID\n   */\n  public setAppId(appId: string): string {\n    this.appId = appId;\n    return this.appId;\n  }\n\n  /**\n   * @summary Sends a request to the provider\n   * @public\n   * @param {RequestArguments} args Request arguments\n   * @param {string} args.method The method name\n   * @param {RequestArgumentsParams} args.params The method parameters\n   * @returns {T} The result of the request\n   */\n  public async request<T>({ method, params }: RequestArguments): Promise<T> {\n    /*if (!this.appId) {\n      throw WalletProviderErrors.NoAppId;\n    }*/\n    if (!this.chainId) {\n      this.emit(ProviderEvents.disconnect, WalletProviderErrors.Disconnected);\n      throw WalletProviderErrors.Disconnected;\n    }\n    if (!this.methods[method]) {\n      throw WalletProviderErrors.UnsupportedMethod;\n    }\n\n    try {\n      if (this.methods[method]?.sessionRequired && !this.isWalletConnected()) {\n        throw WalletProviderErrors.Unauthorized;\n      }\n\n      return (await this.methods[method]?.execute(params)) as T;\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Sends a provider request to the Grindery RPC API and waits for the result.\n   * @public\n   * @param {GrinderyRpcProviderRequestMethodName} method Provider request method name\n   * @param {Array} params Provider request parameters\n   * @param {number} timeout Optional. The time in milliseconds to wait for the request result. Default is 30000.\n   * @returns The result of the provider request\n   */\n  public async sendAndWaitGrinderyRpcProviderRequest<T>(\n    method: GrinderyRpcProviderRequestMethodName,\n    params?: readonly unknown[],\n    timeout?: number\n  ): Promise<T> {\n    const request = await this.sendGrinderyRpcProviderRequest(method, params);\n    return await this.waitGrinderyRpcProviderRequest(\n      request.requestToken,\n      timeout\n    );\n  }\n\n  /**\n   * @summary The application ID.\n   * @protected\n   */\n  protected appId: string = '';\n\n  /**\n   * @summary The chain ID in CAIP-2 format; e.g. \"eip155:1\".\n   * @protected\n   */\n  protected chainId: ChainId = 'eip155:137';\n\n  /**\n   * @summary Client id\n   * @protected\n   */\n  protected clientId: string =\n    this.getStorageValue('clientId') ||\n    this.setStorageValue('clientId', uuid());\n\n  /**\n   * @summary The list of supported provider methods.\n   * @protected\n   */\n  protected methods: Partial<ProviderMethods> = {};\n\n  /**\n   * @summary The user's wallet addresses list.\n   * @protected\n   */\n  protected accounts: Address[] = [];\n\n  protected setAccounts(accounts: Address[]): Address[] {\n    if (JSON.stringify(accounts) !== JSON.stringify(this.accounts)) {\n      this.emit(ProviderEvents.accountsChanged, accounts);\n    }\n    this.accounts = accounts;\n    return this.accounts;\n  }\n\n  /**\n   * @summary Registers the provider methods.\n   * @protected\n   * @param {ProviderMethods} methods A map of supported provider methods.\n   * @returns {void}\n   */\n  protected registerProviderMethods(methods: Partial<ProviderMethods>): void {\n    this.methods = methods;\n  }\n\n  /**\n   * @summary Sends a provider request to the Grindery RPC API.\n   * @protected\n   * @param {GrinderyRpcProviderRequestMethodName} method Provider request method name\n   * @param {Array} params Provider request parameters\n   * @returns {ProviderRequestResult} The request token to use in the `waitGrinderyRpcProviderRequest` method\n   */\n  protected async sendGrinderyRpcProviderRequest(\n    method: GrinderyRpcProviderRequestMethodName,\n    params?: readonly unknown[]\n  ): Promise<ProviderRequestResult> {\n    if (!this.getStorageValue(ProviderStorageKeys.sessionId)) {\n      throw WalletProviderErrors.Unauthorized;\n    }\n\n    try {\n      return await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.request>(\n        GrinderyRpcMethodNames.request,\n        {\n          sessionId: this.getStorageValue(ProviderStorageKeys.sessionId),\n          scope: this.chainId,\n          request: {\n            method,\n            params,\n          },\n        }\n      );\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Waits for the result of the provider request.\n   * @protected\n   * @param {RequestToken} requestToken A token to identify provider request. Recieved in the results of `sendGrinderyRpcProviderRequest` method.\n   * @param {number} timeout Optional. The time in milliseconds to wait for the request result. Default is 30000.\n   * @returns The result of the provider request\n   */\n  protected async waitGrinderyRpcProviderRequest<T>(\n    requestToken: RequestToken,\n    timeout?: number\n  ): Promise<T> {\n    if (!this.getStorageValue(ProviderStorageKeys.sessionId)) {\n      throw WalletProviderErrors.Unauthorized;\n    }\n    try {\n      return await this.sendGrinderyRpcApiRequest<T>(\n        GrinderyRpcMethodNames.waitForRequestResult,\n        {\n          requestToken,\n          timeout,\n        }\n      );\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Sends a request to the Grindery Walletconnect RPC API.\n   * @protected\n   * @param {GrinderyRpcMethodName} method Request method name\n   * @param {RequestArgumentsParams} params Request parameters\n   * @returns {T} The result of the request\n   */\n  protected async sendGrinderyRpcApiRequest<T>(\n    method: GrinderyRpcMethodName,\n    params?: RequestArgumentsParams\n  ): Promise<T> {\n    try {\n      const response = await fetch('https://walletconnect-api.grindery.com', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          jsonrpc: '2.0',\n          id: 1,\n          method: `gws_${method}`,\n          params: params || [],\n        }),\n      });\n      const data = await response.json();\n      if (data.error) {\n        throw new WalletProviderError(data.error.message, data.error.code);\n      }\n      if (!data.result) {\n        throw WalletProviderErrors.NoResult;\n      }\n      return data.result;\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Creates a provider error from an unknown error\n   * @protected\n   * @param {unknown} error Optional. Error object.\n   * @returns {WalletProviderError} The provider error\n   */\n  protected createProviderRpcError(error?: unknown): WalletProviderError {\n    let errorResponse: WalletProviderError;\n    if (error instanceof WalletProviderError) {\n      errorResponse = new WalletProviderError(\n        error.message || 'Unknown error',\n        error.code || 4900,\n        error.data\n      );\n    } else if (error instanceof Error) {\n      errorResponse = new WalletProviderError(\n        error.message || 'Unknown error',\n        4900,\n        error\n      );\n    } else {\n      errorResponse = new WalletProviderError('Unknown error', 4900, error);\n    }\n    return errorResponse;\n  }\n\n  /**\n   * @summary Injects the provider into the window object\n   * @private\n   * @returns {void}\n   */\n  private injectProvider(): void {\n    if (!window.ethereum) {\n      window.ethereum = this;\n    } else {\n      if (\n        window.ethereum.providers &&\n        Array.isArray(window.ethereum.providers)\n      ) {\n        window.ethereum.providers.push(this);\n      } else {\n        window.ethereum.providers = [window.ethereum, this];\n      }\n    }\n  }\n\n  /**\n   * @summary Announces the provider to the window object\n   * @private\n   * @since 0.1.1\n   * @link https://eips.ethereum.org/EIPS/eip-6963#announce-and-request-events\n   * @returns {void}\n   */\n  private announceProvider(): void {\n    window.dispatchEvent(\n      new CustomEvent('eip6963:announceProvider', {\n        detail: Object.freeze({ info: providerInfo, provider: this }),\n      })\n    );\n  }\n\n  /**\n   * @summary Listens for the request provider events\n   * @private\n   * @since 0.1.1\n   * @link https://eips.ethereum.org/EIPS/eip-6963#announce-and-request-events\n   * @returns {void}\n   */\n  private listenForRequestProviderEvents(): void {\n    window.addEventListener('eip6963:requestProvider', () => {\n      this.announceProvider();\n    });\n  }\n}\n","/**\n * @summary Error class for WalletProvider\n * @since 0.1.0\n * @extends Error\n */\nexport class WalletProviderError extends Error {\n  name: string = 'GrinderyWalletProviderError';\n  code?: number;\n  data?: unknown;\n\n  constructor(message: string, code?: number, data?: unknown) {\n    super(message);\n    this.code = code;\n    this.data = data;\n  }\n}\n\nexport const WalletProviderErrors = {\n  PairingFailed: new WalletProviderError('Pairing failed', 4900),\n  Disconnected: new WalletProviderError('Disconnected', 4900),\n  UnsupportedMethod: new WalletProviderError('Unsupported Method', 4200),\n  Unauthorized: new WalletProviderError('Unauthorized', 4900),\n  NoResult: new WalletProviderError('No result', 4900),\n  NoAppId: new WalletProviderError('App ID is required', 4900),\n};\n","import { EIP6963ProviderInfo } from '../types';\nimport { uuid } from './uuid';\n\nexport const providerInfo: EIP6963ProviderInfo = {\n  uuid: uuid(),\n  name: 'Grindery Wallet',\n  rdns: 'com.grindery.wallet',\n  icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiByeD0iNDgiIGZpbGw9IiMwQjBEMTciLz4KPHBhdGggZD0iTTUyLjcwOTMgNTQuNjI5NUw0My40MDAzIDYwLjU2MTdDNDEuOTkwMiA2MS40NjAzIDQxLjU4OTQgNjMuMzEwNSA0Mi41MDUxIDY0LjY5NDJDNDMuNDA5NyA2Ni4wNjExIDQ1LjI2MDYgNjYuNDYxNSA0Ni42NjQ4IDY1LjYwNDhMNTIuNDQ4MiA2MS43MjY5TDU3LjU1NjggNTguMjk1MUM1Ny42MzgyIDU4LjI0MTkgNTcuNzE5MyA1OC4xODk2IDU3LjgwMDMgNTguMTM4NEw1OC4wNTgxIDU3Ljk2NTVDNTguMjA1MyA1Ny44NjY4IDU4LjM1NzggNTcuNzgxMyA1OC41MTQxIDU3LjcwODlDNTguNjQwNiA1Ny42MzY5IDU4Ljc2NjYgNTcuNTY3MyA1OC44OTIxIDU3LjUwMDFDNjEuOTUwMSA1NS44NjQ0IDY1Ljc4MDQgNTYuOTcwOSA2Ny40NDczIDU5Ljk3MTdDNjguOTA3NSA2Mi42MDAzIDY4LjI0MDggNjUuODc3NiA2NS44NjQgNjcuNzU0NUM2Ni4yMzc2IDY2Ljg3NDggNjYuMTc2OCA2NS44MzUyIDY1LjYwNzkgNjQuOTc1NUM2NC43MDMzIDYzLjYwODYgNjIuODUyNCA2My4yMDgzIDYxLjQ0ODIgNjQuMDY1TDU1LjY2NDggNjcuOTQyOEw1MC41NTYyIDcxLjM3NDdDNTAuNTA3OSA3MS40MDU1IDUwLjQ1OTQgNzEuNDM1OCA1MC40MTA3IDcxLjQ2NTdMNTAuMDU1IDcxLjcwNDJDNDkuNzU1OCA3MS45MDQ5IDQ5LjQzNDkgNzIuMDUwNiA0OS4xMDQ3IDcyLjE0MzhDNDQuNjU3MyA3NC4wNTkyIDM5LjMyMzggNzIuNTg5NCAzNi41OTI0IDY4LjQ2MjFDMzMuNzUxNiA2NC4xNjk2IDM0LjczMTcgNTguNTIzNCAzOC42OTg2IDU1LjM3MzZDMzYuODE0IDU0LjY1NzkgMzUuMDI3NSA1My41OTk1IDMzLjQzNjEgNTIuMTkzNEMyNi40MzA0IDQ2LjAwMzYgMjUuODU3NyAzNS40MjA1IDMyLjE1NjkgMjguNTU1NEMzOC40NTYyIDIxLjY5MDQgNDkuMjQxOSAyMS4xNDMxIDU2LjI0NzYgMjcuMzMyOUM2My4yNTMzIDMzLjUyMjggNjMuODI2IDQ0LjEwNTkgNTcuNTI2NyA1MC45NzA5QzU2LjExNTIgNTIuNTA5MyA1NC40Nzg0IDUzLjczMDQgNTIuNzA5MyA1NC42Mjk1Wk01MS44MDcgNDYuMDUxNkM1NS40MjMgNDIuMDgyMyA1NS4wOTQzIDM1Ljk2MzEgNTEuMDcyNyAzMi4zODQxQzQ3LjA1MTEgMjguODA1MiA0MC44NTk1IDI5LjEyMTYgMzcuMjQzNSAzMy4wOTFDMzMuNjI3NCAzNy4wNjA0IDMzLjk1NjIgNDMuMTc5NSAzNy45Nzc4IDQ2Ljc1ODVDNDEuOTk5NCA1MC4zMzc1IDQ4LjE5MDkgNTAuMDIxIDUxLjgwNyA0Ni4wNTE2WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==',\n};\n","import {\n  GrinderyRpcApiRequestResults,\n  GrinderyRpcProviderRequestResults,\n  ProviderInterface,\n  RequestArgumentsParams,\n} from '../types';\nimport { GrinderyRpcMethodNames, WalletProvider } from './WalletProvider';\nimport { WalletProviderErrors } from './WalletProviderError';\nimport { ProviderEvents } from './WalletProviderEventEmitter';\nimport { ProviderStorageKeys } from './WalletProviderLocalStorage';\n\n/**\n * @summary The Grindery wallet provider method names\n */\nexport enum GrinderyWalletProviderMethodNames {\n  eth_requestAccounts = 'eth_requestAccounts',\n  eth_accounts = 'eth_accounts',\n  personal_sign = 'personal_sign',\n  eth_sendTransaction = 'eth_sendTransaction',\n  gws_disconnect = 'gws_disconnect',\n}\n\n/**\n * @summary The Grindery Wallet Ethereum Injected Provider Class.\n * @extends WalletProvider\n * @implements ProviderInterface\n */\nexport class GrinderyWalletProvider\n  extends WalletProvider\n  implements ProviderInterface\n{\n  /**\n   * @summary Indicates that the provider is a Grindery Wallet.\n   */\n  public readonly isGrinderyWallet: boolean = true;\n\n  constructor() {\n    super();\n\n    this.registerProviderMethods({\n      [GrinderyWalletProviderMethodNames.eth_requestAccounts]: {\n        sessionRequired: false,\n        execute: async (\n          params?: RequestArgumentsParams\n        ): Promise<GrinderyRpcProviderRequestResults.eth_requestAccounts> => {\n          if (this.isWalletConnected()) {\n            try {\n              return await this.request<GrinderyRpcProviderRequestResults.eth_accounts>(\n                {\n                  method: GrinderyWalletProviderMethodNames.eth_accounts,\n                  params: params || [],\n                }\n              );\n            } catch (error) {\n              this.setStorageValue(ProviderStorageKeys.sessionId, '');\n              // skip failed request and continue with pairing\n            }\n          }\n          if (this.isWalletConnectionPending()) {\n            try {\n              const pairResult =\n                await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.waitForPairingResult>(\n                  GrinderyRpcMethodNames.waitForPairingResult,\n                  {\n                    pairingToken: this.getStorageValue(\n                      ProviderStorageKeys.pairingToken\n                    ),\n                  }\n                );\n\n              this.clearStorage();\n              this.setStorageValue(\n                ProviderStorageKeys.sessionId,\n                pairResult.session.sessionId\n              );\n\n              if (!pairResult.session.sessionId) {\n                throw WalletProviderErrors.PairingFailed;\n              }\n\n              return await this.request<GrinderyRpcProviderRequestResults.eth_accounts>(\n                {\n                  method: GrinderyWalletProviderMethodNames.eth_accounts,\n                  params: params || [],\n                }\n              );\n            } catch (error) {\n              this.clearStorage();\n              // skip failed request and continue with pairing\n            }\n          }\n          try {\n            const result =\n              await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.requestPairing>(\n                GrinderyRpcMethodNames.requestPairing,\n                {\n                  appId: this.appId,\n                  clientId: this.clientId,\n                }\n              );\n\n            if (!result.pairingToken || !result.connectUrl) {\n              throw WalletProviderErrors.PairingFailed;\n            }\n\n            this.setStorageValue(\n              ProviderStorageKeys.pairingToken,\n              result.pairingToken\n            );\n            this.setStorageValue(\n              ProviderStorageKeys.connectUrl,\n              result.connectUrl\n            );\n            this.setStorageValue(\n              ProviderStorageKeys.connectUrlBrowser,\n              result.connectUrlBrowser\n            );\n            this.setStorageValue(\n              ProviderStorageKeys.shortToken,\n              result.shortToken\n            );\n            this.emit(ProviderEvents.pair, {\n              shortToken: result.shortToken,\n              connectUrl: result.connectUrl,\n              connectUrlBrowser: result.connectUrlBrowser,\n            });\n            const pairResult =\n              await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.waitForPairingResult>(\n                GrinderyRpcMethodNames.waitForPairingResult,\n                {\n                  pairingToken: result.pairingToken,\n                }\n              );\n\n            this.setStorageValue(\n              ProviderStorageKeys.sessionId,\n              pairResult.session.sessionId\n            );\n\n            if (!pairResult.session.sessionId) {\n              throw WalletProviderErrors.PairingFailed;\n            }\n            this.setStorageValue(ProviderStorageKeys.pairingToken, '');\n            this.setStorageValue(ProviderStorageKeys.connectUrl, '');\n            this.setStorageValue(ProviderStorageKeys.connectUrlBrowser, '');\n            this.setStorageValue(ProviderStorageKeys.shortToken, '');\n\n            return await this.request({\n              method: GrinderyWalletProviderMethodNames.eth_accounts,\n              params: params || [],\n            });\n          } catch (error) {\n            throw this.createProviderRpcError(error);\n          }\n        },\n      },\n      [GrinderyWalletProviderMethodNames.eth_accounts]: {\n        sessionRequired: true,\n        execute: async (\n          params?: RequestArgumentsParams\n        ): Promise<GrinderyRpcProviderRequestResults.eth_accounts> => {\n          try {\n            return this.setAccounts(\n              await this.sendAndWaitGrinderyRpcProviderRequest(\n                GrinderyWalletProviderMethodNames.eth_accounts,\n                params ? (Array.isArray(params) ? params : [params]) : []\n              )\n            );\n          } catch (error) {\n            throw this.createProviderRpcError(error);\n          }\n        },\n      },\n      [GrinderyWalletProviderMethodNames.eth_sendTransaction]: {\n        sessionRequired: true,\n        execute: async (\n          params?: RequestArgumentsParams\n        ): Promise<GrinderyRpcProviderRequestResults.eth_sendTransaction> => {\n          return await this.sendAndWaitGrinderyRpcProviderRequest(\n            GrinderyWalletProviderMethodNames.eth_sendTransaction,\n            params ? (Array.isArray(params) ? params : [params]) : []\n          );\n        },\n      },\n      [GrinderyWalletProviderMethodNames.personal_sign]: {\n        sessionRequired: true,\n        execute: async (\n          params?: Partial<RequestArgumentsParams>\n        ): Promise<GrinderyRpcProviderRequestResults.personal_sign> => {\n          return await this.sendAndWaitGrinderyRpcProviderRequest(\n            GrinderyWalletProviderMethodNames.personal_sign,\n            params ? (Array.isArray(params) ? params : [params]) : []\n          );\n        },\n      },\n      [GrinderyWalletProviderMethodNames.gws_disconnect]: {\n        sessionRequired: true,\n        execute: async (): Promise<GrinderyRpcApiRequestResults.disconnect> => {\n          try {\n            const result =\n              await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.disconnect>(\n                GrinderyRpcMethodNames.disconnect,\n                {\n                  sessionToken: this.getStorageValue(\n                    ProviderStorageKeys.sessionId\n                  ),\n                }\n              );\n            this.emit(\n              ProviderEvents.disconnect,\n              WalletProviderErrors.Disconnected\n            );\n            this.clearStorage();\n            this.setAccounts([]);\n            return result;\n          } catch (error) {\n            throw this.createProviderRpcError(error);\n          }\n        },\n      },\n    });\n\n    window.addEventListener('load', () => {\n      this.emit(ProviderEvents.connect, this.getChain());\n      this.restorePairing();\n      this.restoreSession();\n    });\n  }\n\n  /**\n   * @summary Restores the pairing process if pairing token is stored in the local storage\n   * @private\n   * @returns {void}\n   */\n  private async restorePairing(): Promise<void> {\n    const pairingToken = this.getStorageValue(ProviderStorageKeys.pairingToken);\n    const sessionId = this.getStorageValue(ProviderStorageKeys.sessionId);\n    if (pairingToken && !sessionId) {\n      try {\n        const pairResult =\n          await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.waitForPairingResult>(\n            GrinderyRpcMethodNames.waitForPairingResult,\n            {\n              pairingToken,\n            }\n          );\n\n        this.clearStorage();\n        this.setStorageValue(\n          ProviderStorageKeys.sessionId,\n          pairResult.session.sessionId\n        );\n\n        if (!pairResult.session.sessionId) {\n          throw WalletProviderErrors.PairingFailed;\n        }\n\n        const accounts = (\n          pairResult.session?.namespaces?.[`eip155`]?.accounts || []\n        ).map((account) =>\n          account.includes(':') ? account.split(':')[2] || '' : account\n        );\n        this.setAccounts(accounts);\n      } catch (error) {\n        this.setAccounts([]);\n        this.clearStorage();\n      }\n    }\n  }\n\n  /**\n   * @summary Restores the session if session Id is stored in the local storage\n   * @private\n   * @returns {void}\n   */\n  private async restoreSession(): Promise<void> {\n    const pairingToken = this.getStorageValue(ProviderStorageKeys.pairingToken);\n    const sessionId = this.getStorageValue(ProviderStorageKeys.sessionId);\n    if (sessionId && !pairingToken) {\n      try {\n        await this.request<string[]>({\n          method: GrinderyWalletProviderMethodNames.eth_requestAccounts,\n        });\n      } catch (error) {\n        this.setAccounts([]);\n        this.clearStorage();\n      }\n    }\n  }\n}\n","import { GrinderyWalletSDK } from './sdk/GrinderyWalletSDK';\nimport { getAppId } from './utils/getAppId';\n\ndeclare global {\n  interface Window {\n    Telegram?: any;\n    ethereum?: any;\n    Grindery?: {\n      appId?: string;\n      WalletSDK?: GrinderyWalletSDK;\n    };\n  }\n}\n\nfunction init() {\n  if (\n    !window.Grindery?.WalletSDK ||\n    !(window.Grindery.WalletSDK instanceof GrinderyWalletSDK)\n  ) {\n    window.Grindery = {\n      ...(window.Grindery || {}),\n      WalletSDK: new GrinderyWalletSDK({\n        appId: getAppId(),\n      }),\n    };\n  }\n}\n\n// Initialize the SDK\ninit();\n","import {\n  GrinderyRpcApiRequestResults,\n  GrinderyWalletSDKConfig,\n  ProviderEvent,\n} from '../types';\nimport {\n  GrinderyWalletProviderMethodNames,\n  GrinderyWalletProvider,\n} from '../provider/GrinderyWalletProvider';\nimport { ProviderEvents } from '../provider/WalletProviderEventEmitter';\n\n/**\n * @summary The Grindery Wallet SDK class\n * @since 0.1.0\n *\n * @example\n * ```typescript\n * const grinderyWalletSDK = new GrinderyWalletSDK({ appId: 'your-app-id' });\n * ```\n */\nexport class GrinderyWalletSDK {\n  /**\n   * @summary The provider instance\n   * @public\n   */\n  public provider: GrinderyWalletProvider;\n\n  constructor({ appId }: GrinderyWalletSDKConfig) {\n    this.provider = this.getWeb3Provider();\n    this.setAppId(appId);\n    this.provider.on(ProviderEvents.pair, this.handlePairing);\n  }\n\n  /**\n   * @summary Checks if the provider is connected to the server\n   * @returns {boolean} True if the provider is connected to the server.\n   *\n   * @example\n   * ```typescript\n   * const isConnected = window.Grindery.WalletSDK.isConnected();\n   * ```\n   */\n  public isConnected(): boolean {\n    return this.provider.isConnected();\n  }\n\n  /**\n   * @summary Checks if the provider is connected to the server and the Grindery Wallet\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet.\n   */\n  public isWalletConnected(): boolean {\n    return this.provider.isWalletConnected();\n  }\n\n  /**\n   * @summary Initiate connection to the Grindery Wallet\n   * @public\n   * @returns {Promise<string[]>} The array of ethereum addresses\n   * @since 0.1.0\n   */\n  public async connect(): Promise<string[]> {\n    return await this.provider.request({\n      method: GrinderyWalletProviderMethodNames.eth_requestAccounts,\n    });\n  }\n\n  /**\n   * @summary Disconnects Grindery Wallet\n   * @public\n   * @returns {Promise<boolean>} True if wallet is disconnected\n   * @since 0.1.0\n   */\n  public async disconnect(): Promise<boolean> {\n    return await this.provider.request({\n      method: GrinderyWalletProviderMethodNames.gws_disconnect,\n    });\n  }\n\n  /**\n   * @summary Sets the app id\n   * @public\n   * @since 0.1.0\n   * @param {string} appId The app id\n   * @returns {void}\n   */\n  public setAppId(appId: string): void {\n    this.provider.setAppId(appId);\n  }\n\n  /**\n   * @summary Sends a transaction request to the Grindery Wallet\n   * @public\n   * @since 0.1.0\n   * @param {object} params The transaction parameters\n   * @param {string} params.to The recipient address\n   * @param {string} [params.value] The amount to send in wei\n   * @param {string} [params.data] The data to send\n   * @returns {Promise<string[]>} Array with transaction hash string\n   */\n  public async sendTransaction(params: {\n    to: string;\n    value?: string;\n    data?: string;\n  }): Promise<string[]> {\n    return await this.provider.request<string[]>({\n      method: GrinderyWalletProviderMethodNames.eth_sendTransaction,\n      params: [params],\n    });\n  }\n\n  /**\n   * @summary Sends a personal signature request to the Grindery Wallet\n   * @public\n   * @since 0.1.0\n   * @param {string} message The message to sign\n   * @returns {Promise<string>} Signature string\n   */\n  public async signMessage(message: string): Promise<string> {\n    return await this.provider.request<string>({\n      method: GrinderyWalletProviderMethodNames.personal_sign,\n      params: [message, this.provider.getAddress()],\n    });\n  }\n\n  /**\n   * @summary Adds a listener to the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public on(event: ProviderEvent, callback: Function) {\n    this.provider.on(event, callback);\n    return this;\n  }\n\n  /**\n   * @summary Removes a listener from the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public removeListener(event: ProviderEvent, callback: Function) {\n    this.provider.removeListener(event, callback);\n    return this;\n  }\n\n  /**\n   * @summary Gets the Grindery Wallet ethereum provider\n   * @returns {GrinderyWalletProvider} The Grindery Wallet ethereum provider\n   */\n  private getWeb3Provider(): GrinderyWalletProvider {\n    let provider = window.ethereum?.providers?.find(\n      (provider: GrinderyWalletProvider | unknown) =>\n        provider instanceof GrinderyWalletProvider && provider.isGrinderyWallet\n    );\n    if (\n      !provider &&\n      window.ethereum instanceof GrinderyWalletProvider &&\n      window.ethereum.isGrinderyWallet\n    ) {\n      provider = window.ethereum;\n    }\n    if (!provider) {\n      provider = new GrinderyWalletProvider();\n    }\n    return provider;\n  }\n\n  /**\n   * @summary Handles the pairing request, by opening the Grindery Wallet\n   * @private\n   * @param ProviderRequestPairingResult\n   * @returns {void}\n   */\n  private handlePairing({\n    shortToken,\n    connectUrlBrowser,\n  }: GrinderyRpcApiRequestResults.requestPairing): void {\n    const WebApp = window.Telegram?.WebApp;\n    const redirectUrl = `https://walletconnect.grindery.com/connect/wc?uri=${shortToken}`;\n    if (\n      WebApp &&\n      WebApp.openTelegramLink &&\n      WebApp.platform &&\n      WebApp.platform !== 'unknown'\n    ) {\n      WebApp.openTelegramLink(connectUrlBrowser);\n      if (WebApp.close) {\n        window.Telegram.WebApp.close();\n      }\n    } else {\n      window.open(redirectUrl, '_blank');\n    }\n  }\n}\n","/**\n * @summary Get the app id from the script tag or window object\n * @returns {string} The app id\n */\nexport const getAppId = (): string => {\n  let appId: string = '';\n  const elements = document.querySelectorAll('[data-app-id]');\n  for (let i = 0; i < elements.length; i++) {\n    const element = elements[i];\n    const value = element.getAttribute('data-app-id');\n    const src = element.getAttribute('src');\n    const isGrinderySrc = src && src.includes('grindery-wallet-sdk');\n    if (value && isGrinderySrc) {\n      appId = value;\n    }\n  }\n  if (window.Grindery?.appId) {\n    appId = window.Grindery.appId;\n  }\n  return appId;\n};\n"],"names":["ProviderEvents","uuid","d","length","Math","random","toString","substr","vr","parseInt","ProviderStorageKeys","WalletProviderEventEmitter","this","events","Map","_proto","prototype","on","event","callback","has","set","get","push","removeListener","callbacks","filter","cb","emit","_len","arguments","data","Array","_key","console","log","forEach","apply","LOCALSTORAGE_KEY","WalletProviderLocalStorage","GrinderyRpcMethodNames","_WalletProviderEventE","_inheritsLoose","getStorageValue","key","getStorage","setStorageValue","value","storage","saveStorage","clearStorage","clientId","JSON","parse","localStorage","getItem","error","setItem","stringify","Error","WalletProviderError","_Error","message","code","_this","call","name","_wrapNativeSuper","WalletProviderErrors","PairingFailed","Disconnected","UnsupportedMethod","Unauthorized","NoResult","NoAppId","providerInfo","rdns","icon","WalletProvider","GrinderyWalletProviderMethodNames","_WalletProviderLocalS","appId","chainId","methods","accounts","injectProvider","listenForRequestProviderEvents","announceProvider","isConnected","isWalletConnected","sessionId","isWalletConnectionPending","pairingToken","getChain","parseFloat","split","getAddress","setAppId","request","_request","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","method","params","_this$methods$method","_this$methods$method2","wrap","_context","prev","next","disconnect","sessionRequired","execute","abrupt","sent","t0","createProviderRpcError","stop","_x","sendAndWaitGrinderyRpcProviderRequest","_sendAndWaitGrinderyRpcProviderRequest","_callee2","timeout","_context2","sendGrinderyRpcProviderRequest","waitGrinderyRpcProviderRequest","requestToken","_x2","_x3","_x4","setAccounts","accountsChanged","registerProviderMethods","_sendGrinderyRpcProviderRequest","_callee3","_context3","sendGrinderyRpcApiRequest","scope","_x5","_x6","_waitGrinderyRpcProviderRequest","_callee4","_context4","waitForRequestResult","_x7","_x8","_sendGrinderyRpcApiRequest","_callee5","response","_context5","fetch","headers","body","jsonrpc","id","json","result","_x9","_x10","window","ethereum","providers","isArray","dispatchEvent","CustomEvent","detail","Object","freeze","info","provider","_this2","addEventListener","GrinderyWalletProvider","_window$Grindery","_WalletProvider","_this$registerProvide","_execute5","_execute4","_execute3","_execute2","_execute","isGrinderyWallet","eth_requestAccounts","pairResult","_pairResult","eth_accounts","waitForPairingResult","session","t1","requestPairing","connectUrl","connectUrlBrowser","shortToken","pair","t2","eth_sendTransaction","personal_sign","gws_disconnect","sessionToken","connect","restorePairing","restoreSession","_restorePairing","_callee6","_pairResult$session","_context6","namespaces","map","account","includes","_restoreSession","_callee7","_context7","GrinderyWalletSDK","getWeb3Provider","handlePairing","_connect","_disconnect","sendTransaction","_sendTransaction","signMessage","_signMessage","_window$ethereum","find","_ref2","_window$Telegram","WebApp","Telegram","redirectUrl","openTelegramLink","platform","close","open","Grindery","WalletSDK","_extends","elements","document","querySelectorAll","i","element","getAttribute","src","isGrinderySrc","getAppId"],"mappings":"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"}