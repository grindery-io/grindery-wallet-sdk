{"version":3,"file":"grindery-wallet-sdk.umd.development.js","sources":["../src/utils/uuid.ts","../src/provider/WalletProviderEventEmitter.ts","../src/provider/WalletProviderLocalStorage.ts","../src/provider/WalletProviderError.ts","../src/utils/providerInfo.ts","../src/provider/WalletProvider.ts","../src/provider/GrinderyWalletProvider.ts","../src/sdk/GrinderyWalletSDK.ts","../src/utils/getAppId.ts","../src/index.ts"],"sourcesContent":["/**\n * @summary Generates a Version 4 (pseudorandom) UUID\n * @returns {string} The UUID\n */\nexport const uuid = (): string => {\n  let d = '';\n  while (d.length < 32) d += Math.random().toString(16).substr(2);\n  const vr = ((parseInt(d.substr(16, 1), 16) & 0x3) | 0x8).toString(16);\n  return `${d.substr(0, 8)}-${d.substr(8, 4)}-4${d.substr(\n    13,\n    3\n  )}-${vr}${d.substr(17, 3)}-${d.substr(20, 12)}`;\n};\n","import { ProviderEvent } from '../types';\n\nexport enum ProviderEvents {\n  accountsChanged = 'accountsChanged',\n  pair = 'pair',\n  connect = 'connect',\n  disconnect = 'disconnect',\n  chainChanged = 'chainChanged',\n  message = 'message',\n}\n\n/**\n * @summary A class for emitting provider events\n * @since 0.1.0\n */\nexport class WalletProviderEventEmitter {\n  /**\n   * @summary A map of events and their listeners\n   * @public\n   */\n  public events: Map<ProviderEvent, Array<Function>>;\n\n  constructor() {\n    this.events = new Map();\n  }\n\n  /**\n   * @summary Adds a listener to the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public on(event: ProviderEvent, callback: Function) {\n    if (!this.events.has(event)) {\n      this.events.set(event, []);\n    }\n    this.events.get(event)!.push(callback);\n    return this;\n  }\n\n  /**\n   * @summary Removes a listener from the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public removeListener(event: ProviderEvent, callback: Function) {\n    if (this.events.has(event)) {\n      const callbacks = this.events.get(event)!.filter((cb) => cb !== callback);\n      this.events.set(event, callbacks);\n    }\n    return this;\n  }\n\n  /**\n   * @summary Emits an event\n   * @public\n   * @param {string} event Event name\n   * @param data Event data\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  protected emit(event: ProviderEvent, ...data: any[]) {\n    if (this.events.has(event)) {\n      console.log('[Grindery.WalletSDK] > Event:', event, data[0]);\n      this.events.get(event)!.forEach((callback) => {\n        callback(...data);\n      });\n    }\n    return this;\n  }\n}\n","import { ProviderStorage, ProviderStorageKey } from '../types';\nimport { uuid } from '../utils/uuid';\nimport { WalletProviderEventEmitter } from './WalletProviderEventEmitter';\n\nconst LOCALSTORAGE_KEY = 'GrinderyWalletProvider';\n\nexport enum ProviderStorageKeys {\n  pairingToken = 'pairingToken',\n  sessionId = 'sessionId',\n  connectUrl = 'connectUrl',\n  connectUrlBrowser = 'connectUrlBrowser',\n  shortToken = 'shortToken',\n  clientId = 'clientId',\n}\n\n/**\n * @summary A local storage class for the provider\n * @since 0.1.0\n * @extends WalletProviderEventEmitter\n */\nexport class WalletProviderLocalStorage extends WalletProviderEventEmitter {\n  /**\n   * @summary Gets the value of the storage by the key\n   * @protected\n   * @param {ProviderStorageKey} key Provider storage key\n   * @returns {string} The value of the storage by the key\n   */\n  protected getStorageValue(key: ProviderStorageKey): string {\n    const value = this.getStorage()[key] || '';\n    return value;\n  }\n\n  /**\n   * @summary Sets the value of the storage by the key\n   * @protected\n   * @param {ProviderStorageKey} key Provider storage key\n   * @param {string} value The value to set\n   * @returns {void}\n   */\n  protected setStorageValue(key: ProviderStorageKey, value: string): string {\n    const storage = this.getStorage();\n    storage[key] = value;\n    this.saveStorage(storage);\n    return value;\n  }\n\n  /**\n   * @summary Clears the storage\n   * @protected\n   * @returns {void}\n   */\n  protected clearStorage(): void {\n    this.saveStorage({\n      clientId: this.getStorage().clientId || uuid(),\n    });\n  }\n\n  /**\n   * @summary Gets the provider storage\n   * @returns {ProviderStorage} The provider storage\n   */\n  private getStorage(): ProviderStorage {\n    try {\n      return JSON.parse(\n        localStorage.getItem(LOCALSTORAGE_KEY) || '{}'\n      ) as ProviderStorage;\n    } catch (error) {\n      localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify({}));\n      throw new Error('Error parsing storage');\n    }\n  }\n\n  /**\n   * @summary Saves the provider storage\n   * @param {ProviderStorage} storage Provider storage object\n   */\n  private saveStorage(storage: ProviderStorage): void {\n    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(storage));\n  }\n}\n","/**\n * @summary Error class for WalletProvider\n * @since 0.1.0\n * @extends Error\n */\nexport class WalletProviderError extends Error {\n  name: string = 'GrinderyWalletProviderError';\n  code?: number;\n  data?: unknown;\n\n  constructor(message: string, code?: number, data?: unknown) {\n    super(message);\n    this.code = code;\n    this.data = data;\n  }\n}\n\nexport const WalletProviderErrors = {\n  PairingFailed: new WalletProviderError('Pairing failed', 4900),\n  Disconnected: new WalletProviderError('Disconnected', 4900),\n  UnsupportedMethod: new WalletProviderError('Unsupported Method', 4200),\n  Unauthorized: new WalletProviderError('Unauthorized', 4900),\n  NoResult: new WalletProviderError('No result', 4900),\n  NoAppId: new WalletProviderError('App ID is required', 4900),\n};\n","import { EIP6963ProviderInfo } from '../types';\nimport { uuid } from './uuid';\n\nexport const providerInfo: EIP6963ProviderInfo = {\n  uuid: uuid(),\n  name: 'Grindery Wallet',\n  rdns: 'com.grindery.wallet',\n  icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiByeD0iNDgiIGZpbGw9IiMwQjBEMTciLz4KPHBhdGggZD0iTTUyLjcwOTMgNTQuNjI5NUw0My40MDAzIDYwLjU2MTdDNDEuOTkwMiA2MS40NjAzIDQxLjU4OTQgNjMuMzEwNSA0Mi41MDUxIDY0LjY5NDJDNDMuNDA5NyA2Ni4wNjExIDQ1LjI2MDYgNjYuNDYxNSA0Ni42NjQ4IDY1LjYwNDhMNTIuNDQ4MiA2MS43MjY5TDU3LjU1NjggNTguMjk1MUM1Ny42MzgyIDU4LjI0MTkgNTcuNzE5MyA1OC4xODk2IDU3LjgwMDMgNTguMTM4NEw1OC4wNTgxIDU3Ljk2NTVDNTguMjA1MyA1Ny44NjY4IDU4LjM1NzggNTcuNzgxMyA1OC41MTQxIDU3LjcwODlDNTguNjQwNiA1Ny42MzY5IDU4Ljc2NjYgNTcuNTY3MyA1OC44OTIxIDU3LjUwMDFDNjEuOTUwMSA1NS44NjQ0IDY1Ljc4MDQgNTYuOTcwOSA2Ny40NDczIDU5Ljk3MTdDNjguOTA3NSA2Mi42MDAzIDY4LjI0MDggNjUuODc3NiA2NS44NjQgNjcuNzU0NUM2Ni4yMzc2IDY2Ljg3NDggNjYuMTc2OCA2NS44MzUyIDY1LjYwNzkgNjQuOTc1NUM2NC43MDMzIDYzLjYwODYgNjIuODUyNCA2My4yMDgzIDYxLjQ0ODIgNjQuMDY1TDU1LjY2NDggNjcuOTQyOEw1MC41NTYyIDcxLjM3NDdDNTAuNTA3OSA3MS40MDU1IDUwLjQ1OTQgNzEuNDM1OCA1MC40MTA3IDcxLjQ2NTdMNTAuMDU1IDcxLjcwNDJDNDkuNzU1OCA3MS45MDQ5IDQ5LjQzNDkgNzIuMDUwNiA0OS4xMDQ3IDcyLjE0MzhDNDQuNjU3MyA3NC4wNTkyIDM5LjMyMzggNzIuNTg5NCAzNi41OTI0IDY4LjQ2MjFDMzMuNzUxNiA2NC4xNjk2IDM0LjczMTcgNTguNTIzNCAzOC42OTg2IDU1LjM3MzZDMzYuODE0IDU0LjY1NzkgMzUuMDI3NSA1My41OTk1IDMzLjQzNjEgNTIuMTkzNEMyNi40MzA0IDQ2LjAwMzYgMjUuODU3NyAzNS40MjA1IDMyLjE1NjkgMjguNTU1NEMzOC40NTYyIDIxLjY5MDQgNDkuMjQxOSAyMS4xNDMxIDU2LjI0NzYgMjcuMzMyOUM2My4yNTMzIDMzLjUyMjggNjMuODI2IDQ0LjEwNTkgNTcuNTI2NyA1MC45NzA5QzU2LjExNTIgNTIuNTA5MyA1NC40Nzg0IDUzLjczMDQgNTIuNzA5MyA1NC42Mjk1Wk01MS44MDcgNDYuMDUxNkM1NS40MjMgNDIuMDgyMyA1NS4wOTQzIDM1Ljk2MzEgNTEuMDcyNyAzMi4zODQxQzQ3LjA1MTEgMjguODA1MiA0MC44NTk1IDI5LjEyMTYgMzcuMjQzNSAzMy4wOTFDMzMuNjI3NCAzNy4wNjA0IDMzLjk1NjIgNDMuMTc5NSAzNy45Nzc4IDQ2Ljc1ODVDNDEuOTk5NCA1MC4zMzc1IDQ4LjE5MDkgNTAuMDIxIDUxLjgwNyA0Ni4wNTE2WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==',\n};\n","import {\n  ProviderStorageKeys,\n  WalletProviderLocalStorage,\n} from './WalletProviderLocalStorage';\nimport {\n  Address,\n  ChainId,\n  GrinderyRpcApiRequestResults,\n  GrinderyRpcMethodName,\n  GrinderyRpcProviderRequestMethodName,\n  ProviderMethods,\n  ProviderRequestResult,\n  RequestArguments,\n  RequestArgumentsParams,\n  RequestToken,\n} from '../types';\nimport {\n  WalletProviderError,\n  WalletProviderErrors,\n} from './WalletProviderError';\nimport { uuid } from '../utils/uuid';\nimport { ProviderEvents } from './WalletProviderEventEmitter';\nimport { providerInfo } from '../utils/providerInfo';\n\n/**\n * @summary The Grindery RPC API method names\n */\nexport enum GrinderyRpcMethodNames {\n  requestPairing = 'requestPairing',\n  waitForPairingResult = 'waitForPairingResult',\n  request = 'request',\n  waitForRequestResult = 'waitForRequestResult',\n  'disconnect' = 'disconnect',\n}\n\n/**\n * @summary The base wallet provider class\n * @since 0.1.0\n * @extends WalletProviderLocalStorage\n */\nexport class WalletProvider extends WalletProviderLocalStorage {\n  constructor() {\n    super();\n\n    this.injectProvider();\n    this.listenForRequestProviderEvents();\n    this.announceProvider();\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server.\n   */\n  public isConnected(): boolean {\n    return !!this.chainId;\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet.\n   */\n  public isWalletConnected(): boolean {\n    return (\n      this.isConnected() &&\n      !!this.getStorageValue(ProviderStorageKeys.sessionId)\n    );\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet pairing is in progress (pending).\n   */\n  public isWalletConnectionPending(): boolean {\n    return (\n      this.isConnected() &&\n      !!this.getStorageValue(ProviderStorageKeys.pairingToken) &&\n      !this.getStorageValue(ProviderStorageKeys.sessionId)\n    );\n  }\n\n  /**\n   * @summary Gets the connected chain ID in hex format\n   * @public\n   * @returns {ChainId} The chain ID in hex format\n   */\n  public getChain(): ChainId {\n    return `0x${parseFloat(this.chainId.split(':')[1]).toString(16)}`;\n  }\n\n  /**\n   * @summary Gets the connected user's wallet address\n   * @public\n   * @returns {Address} The ethereum wallet address\n   */\n  public getAddress(): Address {\n    return this.accounts[0] || '';\n  }\n\n  /**\n   * @summary Sets the application ID\n   * @public\n   * @param {string} appId The application ID\n   * @returns {string} The application ID\n   */\n  public setAppId(appId: string): string {\n    this.appId = appId;\n    return this.appId;\n  }\n\n  /**\n   * @summary Sends a request to the provider\n   * @public\n   * @param {RequestArguments} args Request arguments\n   * @param {string} args.method The method name\n   * @param {RequestArgumentsParams} args.params The method parameters\n   * @returns {T} The result of the request\n   */\n  public async request<T>({ method, params }: RequestArguments): Promise<T> {\n    /*if (!this.appId) {\n      throw WalletProviderErrors.NoAppId;\n    }*/\n    if (!this.chainId) {\n      this.emit(ProviderEvents.disconnect, WalletProviderErrors.Disconnected);\n      throw WalletProviderErrors.Disconnected;\n    }\n    if (!this.methods[method]) {\n      throw WalletProviderErrors.UnsupportedMethod;\n    }\n\n    try {\n      if (this.methods[method]?.sessionRequired && !this.isWalletConnected()) {\n        throw WalletProviderErrors.Unauthorized;\n      }\n\n      return (await this.methods[method]?.execute(params)) as T;\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Sends a provider request to the Grindery RPC API and waits for the result.\n   * @public\n   * @param {GrinderyRpcProviderRequestMethodName} method Provider request method name\n   * @param {Array} params Provider request parameters\n   * @param {number} timeout Optional. The time in milliseconds to wait for the request result. Default is 30000.\n   * @returns The result of the provider request\n   */\n  public async sendAndWaitGrinderyRpcProviderRequest<T>(\n    method: GrinderyRpcProviderRequestMethodName,\n    params?: readonly unknown[],\n    timeout?: number\n  ): Promise<T> {\n    const request = await this.sendGrinderyRpcProviderRequest(method, params);\n    return await this.waitGrinderyRpcProviderRequest(\n      request.requestToken,\n      timeout\n    );\n  }\n\n  /**\n   * @summary The application ID.\n   * @protected\n   */\n  protected appId: string = '';\n\n  /**\n   * @summary The chain ID in CAIP-2 format; e.g. \"eip155:1\".\n   * @protected\n   */\n  protected chainId: ChainId = 'eip155:137';\n\n  /**\n   * @summary Client id\n   * @protected\n   */\n  protected clientId: string =\n    this.getStorageValue('clientId') ||\n    this.setStorageValue('clientId', uuid());\n\n  /**\n   * @summary The list of supported provider methods.\n   * @protected\n   */\n  protected methods: Partial<ProviderMethods> = {};\n\n  /**\n   * @summary The user's wallet addresses list.\n   * @protected\n   */\n  protected accounts: Address[] = [];\n\n  protected setAccounts(accounts: Address[]): Address[] {\n    if (JSON.stringify(accounts) !== JSON.stringify(this.accounts)) {\n      this.emit(ProviderEvents.accountsChanged, accounts);\n    }\n    this.accounts = accounts;\n    return this.accounts;\n  }\n\n  /**\n   * @summary Registers the provider methods.\n   * @protected\n   * @param {ProviderMethods} methods A map of supported provider methods.\n   * @returns {void}\n   */\n  protected registerProviderMethods(methods: Partial<ProviderMethods>): void {\n    this.methods = methods;\n  }\n\n  /**\n   * @summary Sends a provider request to the Grindery RPC API.\n   * @protected\n   * @param {GrinderyRpcProviderRequestMethodName} method Provider request method name\n   * @param {Array} params Provider request parameters\n   * @returns {ProviderRequestResult} The request token to use in the `waitGrinderyRpcProviderRequest` method\n   */\n  protected async sendGrinderyRpcProviderRequest(\n    method: GrinderyRpcProviderRequestMethodName,\n    params?: readonly unknown[]\n  ): Promise<ProviderRequestResult> {\n    if (!this.getStorageValue(ProviderStorageKeys.sessionId)) {\n      throw WalletProviderErrors.Unauthorized;\n    }\n\n    try {\n      return await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.request>(\n        GrinderyRpcMethodNames.request,\n        {\n          sessionId: this.getStorageValue(ProviderStorageKeys.sessionId),\n          scope: this.chainId,\n          request: {\n            method,\n            params,\n          },\n        }\n      );\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Waits for the result of the provider request.\n   * @protected\n   * @param {RequestToken} requestToken A token to identify provider request. Recieved in the results of `sendGrinderyRpcProviderRequest` method.\n   * @param {number} timeout Optional. The time in milliseconds to wait for the request result. Default is 30000.\n   * @returns The result of the provider request\n   */\n  protected async waitGrinderyRpcProviderRequest<T>(\n    requestToken: RequestToken,\n    timeout?: number\n  ): Promise<T> {\n    if (!this.getStorageValue(ProviderStorageKeys.sessionId)) {\n      throw WalletProviderErrors.Unauthorized;\n    }\n    try {\n      return await this.sendGrinderyRpcApiRequest<T>(\n        GrinderyRpcMethodNames.waitForRequestResult,\n        {\n          requestToken,\n          timeout,\n        }\n      );\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Sends a request to the Grindery Walletconnect RPC API.\n   * @protected\n   * @param {GrinderyRpcMethodName} method Request method name\n   * @param {RequestArgumentsParams} params Request parameters\n   * @returns {T} The result of the request\n   */\n  protected async sendGrinderyRpcApiRequest<T>(\n    method: GrinderyRpcMethodName,\n    params?: RequestArgumentsParams\n  ): Promise<T> {\n    try {\n      const response = await fetch('https://walletconnect-api.grindery.com', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          jsonrpc: '2.0',\n          id: 1,\n          method: `gws_${method}`,\n          params: params || [],\n        }),\n      });\n      const data = await response.json();\n      if (data.error) {\n        throw new WalletProviderError(data.error.message, data.error.code);\n      }\n      if (!data.result) {\n        throw WalletProviderErrors.NoResult;\n      }\n      return data.result;\n    } catch (error) {\n      throw this.createProviderRpcError(error);\n    }\n  }\n\n  /**\n   * @summary Creates a provider error from an unknown error\n   * @protected\n   * @param {unknown} error Optional. Error object.\n   * @returns {WalletProviderError} The provider error\n   */\n  protected createProviderRpcError(error?: unknown): WalletProviderError {\n    let errorResponse: WalletProviderError;\n    if (error instanceof WalletProviderError) {\n      errorResponse = new WalletProviderError(\n        error.message || 'Unknown error',\n        error.code || 4900,\n        error.data\n      );\n    } else if (error instanceof Error) {\n      errorResponse = new WalletProviderError(\n        error.message || 'Unknown error',\n        4900,\n        error\n      );\n    } else {\n      errorResponse = new WalletProviderError('Unknown error', 4900, error);\n    }\n    return errorResponse;\n  }\n\n  /**\n   * @summary Injects the provider into the window object\n   * @private\n   * @returns {void}\n   */\n  private injectProvider(): void {\n    if (!window.ethereum) {\n      window.ethereum = this;\n    } else {\n      if (\n        window.ethereum.providers &&\n        Array.isArray(window.ethereum.providers)\n      ) {\n        window.ethereum.providers.push(this);\n      } else {\n        window.ethereum.providers = [window.ethereum, this];\n      }\n    }\n  }\n\n  /**\n   * @summary Announces the provider to the window object\n   * @private\n   * @since 0.1.1\n   * @link https://eips.ethereum.org/EIPS/eip-6963#announce-and-request-events\n   * @returns {void}\n   */\n  private announceProvider(): void {\n    window.dispatchEvent(\n      new CustomEvent('eip6963:announceProvider', {\n        detail: Object.freeze({ info: providerInfo, provider: this }),\n      })\n    );\n  }\n\n  /**\n   * @summary Listens for the request provider events\n   * @private\n   * @since 0.1.1\n   * @link https://eips.ethereum.org/EIPS/eip-6963#announce-and-request-events\n   * @returns {void}\n   */\n  private listenForRequestProviderEvents(): void {\n    window.addEventListener('eip6963:requestProvider', () => {\n      this.announceProvider();\n    });\n  }\n}\n","import {\n  GrinderyRpcApiRequestResults,\n  GrinderyRpcProviderRequestResults,\n  ProviderInterface,\n  RequestArgumentsParams,\n} from '../types';\nimport { GrinderyRpcMethodNames, WalletProvider } from './WalletProvider';\nimport { WalletProviderErrors } from './WalletProviderError';\nimport { ProviderEvents } from './WalletProviderEventEmitter';\nimport { ProviderStorageKeys } from './WalletProviderLocalStorage';\n\n/**\n * @summary The Grindery wallet provider method names\n */\nexport enum GrinderyWalletProviderMethodNames {\n  eth_requestAccounts = 'eth_requestAccounts',\n  eth_accounts = 'eth_accounts',\n  personal_sign = 'personal_sign',\n  eth_sendTransaction = 'eth_sendTransaction',\n  gws_disconnect = 'gws_disconnect',\n}\n\n/**\n * @summary The Grindery Wallet Ethereum Injected Provider Class.\n * @extends WalletProvider\n * @implements ProviderInterface\n */\nexport class GrinderyWalletProvider\n  extends WalletProvider\n  implements ProviderInterface\n{\n  /**\n   * @summary Indicates that the provider is a Grindery Wallet.\n   */\n  public readonly isGrinderyWallet: boolean = true;\n\n  constructor() {\n    super();\n\n    this.registerProviderMethods({\n      [GrinderyWalletProviderMethodNames.eth_requestAccounts]: {\n        sessionRequired: false,\n        execute: async (\n          params?: RequestArgumentsParams\n        ): Promise<GrinderyRpcProviderRequestResults.eth_requestAccounts> => {\n          if (this.isWalletConnected()) {\n            try {\n              return await this.request<GrinderyRpcProviderRequestResults.eth_accounts>(\n                {\n                  method: GrinderyWalletProviderMethodNames.eth_accounts,\n                  params: params || [],\n                }\n              );\n            } catch (error) {\n              this.setStorageValue(ProviderStorageKeys.sessionId, '');\n              // skip failed request and continue with pairing\n            }\n          }\n          if (this.isWalletConnectionPending()) {\n            try {\n              const pairResult =\n                await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.waitForPairingResult>(\n                  GrinderyRpcMethodNames.waitForPairingResult,\n                  {\n                    pairingToken: this.getStorageValue(\n                      ProviderStorageKeys.pairingToken\n                    ),\n                  }\n                );\n\n              this.clearStorage();\n              this.setStorageValue(\n                ProviderStorageKeys.sessionId,\n                pairResult.session.sessionId\n              );\n\n              if (!pairResult.session.sessionId) {\n                throw WalletProviderErrors.PairingFailed;\n              }\n\n              return await this.request<GrinderyRpcProviderRequestResults.eth_accounts>(\n                {\n                  method: GrinderyWalletProviderMethodNames.eth_accounts,\n                  params: params || [],\n                }\n              );\n            } catch (error) {\n              this.clearStorage();\n              // skip failed request and continue with pairing\n            }\n          }\n          try {\n            const result =\n              await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.requestPairing>(\n                GrinderyRpcMethodNames.requestPairing,\n                {\n                  appId: this.appId,\n                  clientId: this.clientId,\n                }\n              );\n\n            if (!result.pairingToken || !result.connectUrl) {\n              throw WalletProviderErrors.PairingFailed;\n            }\n\n            this.setStorageValue(\n              ProviderStorageKeys.pairingToken,\n              result.pairingToken\n            );\n            this.setStorageValue(\n              ProviderStorageKeys.connectUrl,\n              result.connectUrl\n            );\n            this.setStorageValue(\n              ProviderStorageKeys.connectUrlBrowser,\n              result.connectUrlBrowser\n            );\n            this.setStorageValue(\n              ProviderStorageKeys.shortToken,\n              result.shortToken\n            );\n            this.emit(ProviderEvents.pair, {\n              shortToken: result.shortToken,\n              connectUrl: result.connectUrl,\n              connectUrlBrowser: result.connectUrlBrowser,\n            });\n            const pairResult =\n              await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.waitForPairingResult>(\n                GrinderyRpcMethodNames.waitForPairingResult,\n                {\n                  pairingToken: result.pairingToken,\n                }\n              );\n\n            this.setStorageValue(\n              ProviderStorageKeys.sessionId,\n              pairResult.session.sessionId\n            );\n\n            if (!pairResult.session.sessionId) {\n              throw WalletProviderErrors.PairingFailed;\n            }\n            this.setStorageValue(ProviderStorageKeys.pairingToken, '');\n            this.setStorageValue(ProviderStorageKeys.connectUrl, '');\n            this.setStorageValue(ProviderStorageKeys.connectUrlBrowser, '');\n            this.setStorageValue(ProviderStorageKeys.shortToken, '');\n\n            return await this.request({\n              method: GrinderyWalletProviderMethodNames.eth_accounts,\n              params: params || [],\n            });\n          } catch (error) {\n            throw this.createProviderRpcError(error);\n          }\n        },\n      },\n      [GrinderyWalletProviderMethodNames.eth_accounts]: {\n        sessionRequired: true,\n        execute: async (\n          params?: RequestArgumentsParams\n        ): Promise<GrinderyRpcProviderRequestResults.eth_accounts> => {\n          try {\n            return this.setAccounts(\n              await this.sendAndWaitGrinderyRpcProviderRequest(\n                GrinderyWalletProviderMethodNames.eth_accounts,\n                params ? (Array.isArray(params) ? params : [params]) : []\n              )\n            );\n          } catch (error) {\n            throw this.createProviderRpcError(error);\n          }\n        },\n      },\n      [GrinderyWalletProviderMethodNames.eth_sendTransaction]: {\n        sessionRequired: true,\n        execute: async (\n          params?: RequestArgumentsParams\n        ): Promise<GrinderyRpcProviderRequestResults.eth_sendTransaction> => {\n          return await this.sendAndWaitGrinderyRpcProviderRequest(\n            GrinderyWalletProviderMethodNames.eth_sendTransaction,\n            params ? (Array.isArray(params) ? params : [params]) : []\n          );\n        },\n      },\n      [GrinderyWalletProviderMethodNames.personal_sign]: {\n        sessionRequired: true,\n        execute: async (\n          params?: Partial<RequestArgumentsParams>\n        ): Promise<GrinderyRpcProviderRequestResults.personal_sign> => {\n          return await this.sendAndWaitGrinderyRpcProviderRequest(\n            GrinderyWalletProviderMethodNames.personal_sign,\n            params ? (Array.isArray(params) ? params : [params]) : []\n          );\n        },\n      },\n      [GrinderyWalletProviderMethodNames.gws_disconnect]: {\n        sessionRequired: true,\n        execute: async (): Promise<GrinderyRpcApiRequestResults.disconnect> => {\n          try {\n            const result =\n              await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.disconnect>(\n                GrinderyRpcMethodNames.disconnect,\n                {\n                  sessionToken: this.getStorageValue(\n                    ProviderStorageKeys.sessionId\n                  ),\n                }\n              );\n            this.emit(\n              ProviderEvents.disconnect,\n              WalletProviderErrors.Disconnected\n            );\n            this.clearStorage();\n            this.setAccounts([]);\n            return result;\n          } catch (error) {\n            throw this.createProviderRpcError(error);\n          }\n        },\n      },\n    });\n\n    window.addEventListener('load', () => {\n      this.emit(ProviderEvents.connect, this.getChain());\n      this.restorePairing();\n      this.restoreSession();\n    });\n  }\n\n  /**\n   * @summary Restores the pairing process if pairing token is stored in the local storage\n   * @private\n   * @returns {void}\n   */\n  private async restorePairing(): Promise<void> {\n    const pairingToken = this.getStorageValue(ProviderStorageKeys.pairingToken);\n    const sessionId = this.getStorageValue(ProviderStorageKeys.sessionId);\n    if (pairingToken && !sessionId) {\n      try {\n        const pairResult =\n          await this.sendGrinderyRpcApiRequest<GrinderyRpcApiRequestResults.waitForPairingResult>(\n            GrinderyRpcMethodNames.waitForPairingResult,\n            {\n              pairingToken,\n            }\n          );\n\n        this.clearStorage();\n        this.setStorageValue(\n          ProviderStorageKeys.sessionId,\n          pairResult.session.sessionId\n        );\n\n        if (!pairResult.session.sessionId) {\n          throw WalletProviderErrors.PairingFailed;\n        }\n\n        const accounts = (\n          pairResult.session?.namespaces?.[`eip155`]?.accounts || []\n        ).map((account) =>\n          account.includes(':') ? account.split(':')[2] || '' : account\n        );\n        this.setAccounts(accounts);\n      } catch (error) {\n        this.setAccounts([]);\n        this.clearStorage();\n      }\n    }\n  }\n\n  /**\n   * @summary Restores the session if session Id is stored in the local storage\n   * @private\n   * @returns {void}\n   */\n  private async restoreSession(): Promise<void> {\n    const pairingToken = this.getStorageValue(ProviderStorageKeys.pairingToken);\n    const sessionId = this.getStorageValue(ProviderStorageKeys.sessionId);\n    if (sessionId && !pairingToken) {\n      try {\n        await this.request<string[]>({\n          method: GrinderyWalletProviderMethodNames.eth_requestAccounts,\n        });\n      } catch (error) {\n        this.setAccounts([]);\n        this.clearStorage();\n      }\n    }\n  }\n}\n","import {\n  GrinderyRpcApiRequestResults,\n  GrinderyWalletSDKConfig,\n  ProviderEvent,\n} from '../types';\nimport {\n  GrinderyWalletProviderMethodNames,\n  GrinderyWalletProvider,\n} from '../provider/GrinderyWalletProvider';\nimport { ProviderEvents } from '../provider/WalletProviderEventEmitter';\n\n/**\n * @summary The Grindery Wallet SDK class\n * @since 0.1.0\n *\n * @example\n * ```typescript\n * const grinderyWalletSDK = new GrinderyWalletSDK({ appId: 'your-app-id' });\n * ```\n */\nexport class GrinderyWalletSDK {\n  /**\n   * @summary The provider instance\n   * @public\n   */\n  public provider: GrinderyWalletProvider;\n\n  constructor({ appId }: GrinderyWalletSDKConfig) {\n    this.provider = this.getWeb3Provider();\n    this.setAppId(appId);\n    this.provider.on(ProviderEvents.pair, this.handlePairing);\n  }\n\n  /**\n   * @summary Checks if the provider is connected to the server\n   * @returns {boolean} True if the provider is connected to the server.\n   *\n   * @example\n   * ```typescript\n   * const isConnected = window.Grindery.WalletSDK.isConnected();\n   * ```\n   */\n  public isConnected(): boolean {\n    return this.provider.isConnected();\n  }\n\n  /**\n   * @summary Checks if the provider is connected to the server and the Grindery Wallet\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet.\n   */\n  public isWalletConnected(): boolean {\n    return this.provider.isWalletConnected();\n  }\n\n  /**\n   * @summary Initiate connection to the Grindery Wallet\n   * @public\n   * @returns {Promise<string[]>} The array of ethereum addresses\n   * @since 0.1.0\n   */\n  public async connect(): Promise<string[]> {\n    return await this.provider.request({\n      method: GrinderyWalletProviderMethodNames.eth_requestAccounts,\n    });\n  }\n\n  /**\n   * @summary Disconnects Grindery Wallet\n   * @public\n   * @returns {Promise<boolean>} True if wallet is disconnected\n   * @since 0.1.0\n   */\n  public async disconnect(): Promise<boolean> {\n    return await this.provider.request({\n      method: GrinderyWalletProviderMethodNames.gws_disconnect,\n    });\n  }\n\n  /**\n   * @summary Sets the app id\n   * @public\n   * @since 0.1.0\n   * @param {string} appId The app id\n   * @returns {void}\n   */\n  public setAppId(appId: string): void {\n    this.provider.setAppId(appId);\n  }\n\n  /**\n   * @summary Sends a transaction request to the Grindery Wallet\n   * @public\n   * @since 0.1.0\n   * @param {object} params The transaction parameters\n   * @param {string} params.to The recipient address\n   * @param {string} [params.value] The amount to send in wei\n   * @param {string} [params.data] The data to send\n   * @returns {Promise<string[]>} Array with transaction hash string\n   */\n  public async sendTransaction(params: {\n    to: string;\n    value?: string;\n    data?: string;\n  }): Promise<string[]> {\n    return await this.provider.request<string[]>({\n      method: GrinderyWalletProviderMethodNames.eth_sendTransaction,\n      params: [params],\n    });\n  }\n\n  /**\n   * @summary Sends a personal signature request to the Grindery Wallet\n   * @public\n   * @since 0.1.0\n   * @param {string} message The message to sign\n   * @returns {Promise<string>} Signature string\n   */\n  public async signMessage(message: string): Promise<string> {\n    return await this.provider.request<string>({\n      method: GrinderyWalletProviderMethodNames.personal_sign,\n      params: [message, this.provider.getAddress()],\n    });\n  }\n\n  /**\n   * @summary Adds a listener to the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public on(event: ProviderEvent, callback: Function) {\n    this.provider.on(event, callback);\n    return this;\n  }\n\n  /**\n   * @summary Removes a listener from the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public removeListener(event: ProviderEvent, callback: Function) {\n    this.provider.removeListener(event, callback);\n    return this;\n  }\n\n  /**\n   * @summary Gets the Grindery Wallet ethereum provider\n   * @returns {GrinderyWalletProvider} The Grindery Wallet ethereum provider\n   */\n  private getWeb3Provider(): GrinderyWalletProvider {\n    let provider = window.ethereum?.providers?.find(\n      (provider: GrinderyWalletProvider | unknown) =>\n        provider instanceof GrinderyWalletProvider && provider.isGrinderyWallet\n    );\n    if (\n      !provider &&\n      window.ethereum instanceof GrinderyWalletProvider &&\n      window.ethereum.isGrinderyWallet\n    ) {\n      provider = window.ethereum;\n    }\n    if (!provider) {\n      provider = new GrinderyWalletProvider();\n    }\n    return provider;\n  }\n\n  /**\n   * @summary Handles the pairing request, by opening the Grindery Wallet\n   * @private\n   * @param ProviderRequestPairingResult\n   * @returns {void}\n   */\n  private handlePairing({\n    shortToken,\n    connectUrlBrowser,\n  }: GrinderyRpcApiRequestResults.requestPairing): void {\n    const WebApp = window.Telegram?.WebApp;\n    const redirectUrl = `https://walletconnect.grindery.com/connect/wc?uri=${shortToken}`;\n    if (\n      WebApp &&\n      WebApp.openTelegramLink &&\n      WebApp.platform &&\n      WebApp.platform !== 'unknown'\n    ) {\n      WebApp.openTelegramLink(connectUrlBrowser);\n      if (WebApp.close) {\n        window.Telegram.WebApp.close();\n      }\n    } else {\n      window.open(redirectUrl, '_blank');\n    }\n  }\n}\n","/**\n * @summary Get the app id from the script tag or window object\n * @returns {string} The app id\n */\nexport const getAppId = (): string => {\n  let appId: string = '';\n  const elements = document.querySelectorAll('[data-app-id]');\n  for (let i = 0; i < elements.length; i++) {\n    const element = elements[i];\n    const value = element.getAttribute('data-app-id');\n    const src = element.getAttribute('src');\n    const isGrinderySrc = src && src.includes('grindery-wallet-sdk');\n    if (value && isGrinderySrc) {\n      appId = value;\n    }\n  }\n  if (window.Grindery?.appId) {\n    appId = window.Grindery.appId;\n  }\n  return appId;\n};\n","import { GrinderyWalletSDK } from './sdk/GrinderyWalletSDK';\nimport { getAppId } from './utils/getAppId';\n\ndeclare global {\n  interface Window {\n    Telegram?: any;\n    ethereum?: any;\n    Grindery?: {\n      appId?: string;\n      WalletSDK?: GrinderyWalletSDK;\n    };\n  }\n}\n\nfunction init() {\n  if (\n    !window.Grindery?.WalletSDK ||\n    !(window.Grindery.WalletSDK instanceof GrinderyWalletSDK)\n  ) {\n    window.Grindery = {\n      ...(window.Grindery || {}),\n      WalletSDK: new GrinderyWalletSDK({\n        appId: getAppId(),\n      }),\n    };\n  }\n}\n\n// Initialize the SDK\ninit();\n"],"names":["uuid","d","length","Math","random","toString","substr","vr","parseInt","ProviderEvents","WalletProviderEventEmitter","events","Map","_proto","prototype","on","event","callback","has","set","get","push","removeListener","callbacks","filter","cb","emit","_len","arguments","data","Array","_key","console","log","forEach","apply","LOCALSTORAGE_KEY","ProviderStorageKeys","WalletProviderLocalStorage","_WalletProviderEventE","_inheritsLoose","getStorageValue","key","value","getStorage","setStorageValue","storage","saveStorage","clearStorage","clientId","JSON","parse","localStorage","getItem","error","setItem","stringify","Error","WalletProviderError","_Error","message","code","_this","call","name","_wrapNativeSuper","WalletProviderErrors","PairingFailed","Disconnected","UnsupportedMethod","Unauthorized","NoResult","NoAppId","providerInfo","rdns","icon","GrinderyRpcMethodNames","WalletProvider","_WalletProviderLocalS","appId","chainId","methods","accounts","injectProvider","listenForRequestProviderEvents","announceProvider","isConnected","isWalletConnected","sessionId","isWalletConnectionPending","pairingToken","getChain","parseFloat","split","getAddress","setAppId","request","_request","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","method","params","_this$methods$method","_this$methods$method2","wrap","_callee$","_context","prev","next","disconnect","sessionRequired","execute","abrupt","sent","t0","createProviderRpcError","stop","_x","sendAndWaitGrinderyRpcProviderRequest","_sendAndWaitGrinderyRpcProviderRequest","_callee2","timeout","_callee2$","_context2","sendGrinderyRpcProviderRequest","waitGrinderyRpcProviderRequest","requestToken","_x2","_x3","_x4","setAccounts","accountsChanged","registerProviderMethods","_sendGrinderyRpcProviderRequest","_callee3","_callee3$","_context3","sendGrinderyRpcApiRequest","scope","_x5","_x6","_waitGrinderyRpcProviderRequest","_callee4","_callee4$","_context4","waitForRequestResult","_x7","_x8","_sendGrinderyRpcApiRequest","_callee5","response","_callee5$","_context5","fetch","headers","body","jsonrpc","id","json","result","_x9","_x10","errorResponse","window","ethereum","providers","isArray","dispatchEvent","CustomEvent","detail","Object","freeze","info","provider","_this2","addEventListener","GrinderyWalletProviderMethodNames","GrinderyWalletProvider","_WalletProvider","_this$registerProvide","isGrinderyWallet","eth_requestAccounts","_execute","pairResult","_pairResult","eth_accounts","waitForPairingResult","session","t1","requestPairing","connectUrl","connectUrlBrowser","shortToken","pair","t2","_execute2","eth_sendTransaction","_execute3","personal_sign","_execute4","gws_disconnect","_execute5","sessionToken","connect","restorePairing","restoreSession","_restorePairing","_callee6","_pairResult$session","_callee6$","_context6","namespaces","map","account","includes","_restoreSession","_callee7","_callee7$","_context7","GrinderyWalletSDK","getWeb3Provider","handlePairing","_connect","_disconnect","sendTransaction","_sendTransaction","signMessage","_signMessage","_window$ethereum","find","_ref2","_window$Telegram","WebApp","Telegram","redirectUrl","openTelegramLink","platform","close","open","getAppId","_window$Grindery","elements","document","querySelectorAll","i","element","getAttribute","src","isGrinderySrc","Grindery","init","WalletSDK","_extends"],"mappings":"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"}