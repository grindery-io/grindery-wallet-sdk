<!DOCTYPE html>
<html>
  <head>
    <title>GrinderyWalletSDK Example</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="my-2">
    <h1 class="text-3xl font-bold text-center px-4">
      GrinderyWalletSDK usage example
    </h1>
    <div id="walletSDK" class="px-4 py-4 text-center">
      Connecting provider...
    </div>
    <script type="text/javascript">
      // inject tg user id for testing
      // optional, comment this script if not needed
      window.Telegram = {
        WebApp: {
          initDataUnsafe: {
            user: {
              //id: '66670057',
            },
          },
        },
      };
    </script>
    <script
      src="../dist/grindery-wallet-sdk.umd.development.js"
      type="text/javascript"
    ></script>
    <script type="text/javascript">
      addEventListener('load', () => {
        const provider =
          window.Grindery &&
          window.Grindery.WalletSDK &&
          window.Grindery.WalletSDK.provider;

        if (provider) {
          provider.on('connect', () => {
            const el = document.getElementById('walletSDK');
            if (el) {
              el.innerHTML = 'Provider connected!';
            }

            provider
              .request({ method: 'eth_accounts' })
              .then(accounts => {
                console.log('eth_accounts', accounts);
              })
              .catch(error => {
                console.error('eth_accounts', error);
              });
          });
        }
      });
    </script>
  </body>
</html>
