{"version":3,"file":"grindery-wallet-sdk.esm.js","sources":["../src/classes/EventEmitter.ts","../src/utils/uuid.ts","../src/utils/providerInfo.ts","../src/classes/ProviderError.ts","../src/utils/chains.ts","../src/classes/SdkStorage.ts","../src/classes/Rpc.ts","../src/classes/Provider.ts","../src/classes/WalletAPI.ts","../src/utils/getConfigFromDataAttributes.ts","../src/classes/WalletSDK.ts","../src/index.ts"],"sourcesContent":["/**\n * @summary Provider events\n * @since 0.2.0\n * @link https://eips.ethereum.org/EIPS/eip-1193#provider-events\n * @enum {string}\n */\nexport enum ProviderEvents {\n  accountsChanged = 'accountsChanged',\n  pair = 'pair',\n  connect = 'connect',\n  disconnect = 'disconnect',\n  chainChanged = 'chainChanged',\n  message = 'message',\n}\n\n/**\n * @summary Provider event name\n * @since 0.2.0\n */\nexport type ProviderEventName = keyof typeof ProviderEvents;\n\n/**\n * @summary A class for emitting provider events\n * @since 0.2.0\n */\nexport class EventEmitter {\n  constructor() {\n    this.events = new Map();\n  }\n\n  /**\n   * @summary A map of events and their listeners\n   * @private\n   */\n  private events: Map<ProviderEventName, Array<Function>>;\n\n  /**\n   * @summary Adds a listener to the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public on(event: ProviderEventName, callback: Function) {\n    if (!this.events.has(event)) {\n      this.events.set(event, []);\n    }\n    this.events.get(event)!.push(callback);\n    return this;\n  }\n\n  /**\n   * @summary Removes a listener from the event\n   * @public\n   * @param {string} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public removeListener(event: ProviderEventName, callback: Function) {\n    if (this.events.has(event)) {\n      const callbacks = this.events.get(event)!.filter((cb) => cb !== callback);\n      this.events.set(event, callbacks);\n    }\n    return this;\n  }\n\n  /**\n   * @summary Emits an event\n   * @public\n   * @param {string} event Event name\n   * @param data Event data\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  protected emit(event: ProviderEventName, ...data: any[]) {\n    if (this.events.has(event)) {\n      console.log('[Grindery.WalletSDK] > Event:', event, data[0]);\n      this.events.get(event)!.forEach((callback) => {\n        callback(...data);\n      });\n    }\n    return this;\n  }\n}\n","/**\n * @summary Generates a Version 4 (pseudorandom) UUID\n * @returns {string} The UUID\n */\nexport const uuid = (): string => {\n  let d = '';\n  while (d.length < 32) d += Math.random().toString(16).substr(2);\n  const vr = ((parseInt(d.substr(16, 1), 16) & 0x3) | 0x8).toString(16);\n  return `${d.substr(0, 8)}-${d.substr(8, 4)}-4${d.substr(\n    13,\n    3\n  )}-${vr}${d.substr(17, 3)}-${d.substr(20, 12)}`;\n};\n","import { uuid } from './uuid';\n\n/**\n * Represents the assets needed to display a wallet\n *\n * @since 0.1.1\n * @link https://eips.ethereum.org/EIPS/eip-6963#provider-info\n */\nexport interface EIP6963ProviderInfo {\n  uuid: string;\n  name: string;\n\n  /**\n   * Data URI as defined in RFC-2397.\n   *\n   * The image SHOULD be a square with 96x96px minimum resolution.\n   * The image format is RECOMMENDED to be either lossless or vector based such as PNG, WebP or SVG.\n   * @link https://eips.ethereum.org/EIPS/eip-6963#imagesicons\n   */\n  icon: string;\n\n  /**\n   * MUST BE a valid RFC-1034 Domain Name\n   * @link https://eips.ethereum.org/EIPS/eip-6963#rdns\n   */\n  rdns: string;\n}\n\nexport const providerInfo: EIP6963ProviderInfo = {\n  uuid: uuid(),\n  name: 'Grindery Wallet',\n  rdns: 'com.grindery.wallet',\n  icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiByeD0iNDgiIGZpbGw9IiMwQjBEMTciLz4KPHBhdGggZD0iTTUyLjcwOTMgNTQuNjI5NUw0My40MDAzIDYwLjU2MTdDNDEuOTkwMiA2MS40NjAzIDQxLjU4OTQgNjMuMzEwNSA0Mi41MDUxIDY0LjY5NDJDNDMuNDA5NyA2Ni4wNjExIDQ1LjI2MDYgNjYuNDYxNSA0Ni42NjQ4IDY1LjYwNDhMNTIuNDQ4MiA2MS43MjY5TDU3LjU1NjggNTguMjk1MUM1Ny42MzgyIDU4LjI0MTkgNTcuNzE5MyA1OC4xODk2IDU3LjgwMDMgNTguMTM4NEw1OC4wNTgxIDU3Ljk2NTVDNTguMjA1MyA1Ny44NjY4IDU4LjM1NzggNTcuNzgxMyA1OC41MTQxIDU3LjcwODlDNTguNjQwNiA1Ny42MzY5IDU4Ljc2NjYgNTcuNTY3MyA1OC44OTIxIDU3LjUwMDFDNjEuOTUwMSA1NS44NjQ0IDY1Ljc4MDQgNTYuOTcwOSA2Ny40NDczIDU5Ljk3MTdDNjguOTA3NSA2Mi42MDAzIDY4LjI0MDggNjUuODc3NiA2NS44NjQgNjcuNzU0NUM2Ni4yMzc2IDY2Ljg3NDggNjYuMTc2OCA2NS44MzUyIDY1LjYwNzkgNjQuOTc1NUM2NC43MDMzIDYzLjYwODYgNjIuODUyNCA2My4yMDgzIDYxLjQ0ODIgNjQuMDY1TDU1LjY2NDggNjcuOTQyOEw1MC41NTYyIDcxLjM3NDdDNTAuNTA3OSA3MS40MDU1IDUwLjQ1OTQgNzEuNDM1OCA1MC40MTA3IDcxLjQ2NTdMNTAuMDU1IDcxLjcwNDJDNDkuNzU1OCA3MS45MDQ5IDQ5LjQzNDkgNzIuMDUwNiA0OS4xMDQ3IDcyLjE0MzhDNDQuNjU3MyA3NC4wNTkyIDM5LjMyMzggNzIuNTg5NCAzNi41OTI0IDY4LjQ2MjFDMzMuNzUxNiA2NC4xNjk2IDM0LjczMTcgNTguNTIzNCAzOC42OTg2IDU1LjM3MzZDMzYuODE0IDU0LjY1NzkgMzUuMDI3NSA1My41OTk1IDMzLjQzNjEgNTIuMTkzNEMyNi40MzA0IDQ2LjAwMzYgMjUuODU3NyAzNS40MjA1IDMyLjE1NjkgMjguNTU1NEMzOC40NTYyIDIxLjY5MDQgNDkuMjQxOSAyMS4xNDMxIDU2LjI0NzYgMjcuMzMyOUM2My4yNTMzIDMzLjUyMjggNjMuODI2IDQ0LjEwNTkgNTcuNTI2NyA1MC45NzA5QzU2LjExNTIgNTIuNTA5MyA1NC40Nzg0IDUzLjczMDQgNTIuNzA5MyA1NC42Mjk1Wk01MS44MDcgNDYuMDUxNkM1NS40MjMgNDIuMDgyMyA1NS4wOTQzIDM1Ljk2MzEgNTEuMDcyNyAzMi4zODQxQzQ3LjA1MTEgMjguODA1MiA0MC44NTk1IDI5LjEyMTYgMzcuMjQzNSAzMy4wOTFDMzMuNjI3NCAzNy4wNjA0IDMzLjk1NjIgNDMuMTc5NSAzNy45Nzc4IDQ2Ljc1ODVDNDEuOTk5NCA1MC4zMzc1IDQ4LjE5MDkgNTAuMDIxIDUxLjgwNyA0Ni4wNTE2WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==',\n};\n","/**\n * @summary Error class for wallet Provider\n * @since 0.1.0\n * @extends Error\n */\nexport class ProviderError extends Error {\n  name: string = 'GrinderyWalletProviderError';\n  code?: number;\n  data?: unknown;\n\n  constructor(message: string, code?: number, data?: unknown) {\n    super(message);\n    this.code = code;\n    this.data = data;\n  }\n}\n\nexport const ProviderErrors = {\n  PairingFailed: new ProviderError('Pairing failed', 4900),\n  Disconnected: new ProviderError('Disconnected', 4900),\n  UnsupportedMethod: new ProviderError('Unsupported Method', 4200),\n  Unauthorized: new ProviderError('Unauthorized', 4100),\n  NoResult: new ProviderError('No result', 4900),\n  NoAppId: new ProviderError('App ID is required', 4900),\n  UserRejected: new ProviderError('User Rejected Request', 4001),\n  ChainDisconnected: new ProviderError('Chain Disconnected', 4901),\n};\n\nexport const newProviderError = (error?: unknown): ProviderError => {\n  let errorResponse: ProviderError;\n  if (error instanceof ProviderError) {\n    errorResponse = new ProviderError(\n      error.message || 'Unknown error',\n      error.code || 4900,\n      error.data\n    );\n  } else if (error instanceof Error) {\n    errorResponse = new ProviderError(\n      error.message || 'Unknown error',\n      4900,\n      error\n    );\n  } else {\n    errorResponse = new ProviderError('Unknown error', 4900, error);\n  }\n  return errorResponse;\n};\n","/**\n * Supported chains list\n *\n * @description Currently supports the following chains: Polygon, BNB Smart Chain, and opBNB Smart Chain\n *\n * @since 0.3.0\n * @type {string[]} Chain ids in CAIP-2 format\n */\nexport const CHAINS: string[] = ['eip155:137', 'eip155:56', 'eip155:204'];\n\nexport const hexChainId = (chainId: string): string => {\n  return `0x${parseInt(chainId.split(':')[1], 10).toString(16)}`;\n};\n\nexport const unhexChainId = (hexChainId: string): string => {\n  return `eip155:${parseInt(hexChainId, 16)}`;\n};\n","import { CHAINS } from '../utils/chains';\nimport { uuid } from '../utils/uuid';\n\nconst LOCALSTORAGE_KEY = 'GrinderyWalletProvider';\n\n/**\n * @summary SdkStorage keys\n * @since 0.2.0\n */\nexport enum SdkStorageKeys {\n  pairingToken = 'pairingToken',\n  sessionId = 'sessionId',\n  connectUrl = 'connectUrl',\n  connectUrlBrowser = 'connectUrlBrowser',\n  shortToken = 'shortToken',\n  clientId = 'clientId',\n  address = 'address',\n  chainId = 'chainId',\n}\n\n/**\n * @summary SdkStorage key type\n * @since 0.2.0\n */\nexport type SdkStorageKey = keyof typeof SdkStorageKeys;\n\nexport type SdkStorageSnapshot = {\n  [key in SdkStorageKeys]?: string;\n};\n\n/**\n * @summary A class to handle local storage\n * @since 0.2.0\n */\nexport class SdkStorage {\n  /**\n   * @summary Gets the value of the storage by the key\n   * @public\n   * @param {SdkStorageKey} key Provider storage key\n   * @returns {string} The value of the storage by the key\n   */\n  public getValue(key: SdkStorageKey): string {\n    const value = this.getSnapshot()[key] || '';\n    return value;\n  }\n\n  /**\n   * @summary Sets the value of the storage by the key\n   * @public\n   * @param {SdkStorageKey} key Provider storage key\n   * @param {string} value The value to set\n   * @returns {void}\n   */\n  public setValue(key: SdkStorageKey, value: string): string {\n    const snapshot = this.getSnapshot();\n    snapshot[key] = value;\n    this.saveSnapshot(snapshot);\n    return value;\n  }\n\n  /**\n   * @summary Clears the storage\n   * @public\n   * @returns {void}\n   */\n  public clear(): void {\n    this.saveSnapshot({\n      clientId: this.getSnapshot().clientId || uuid(),\n      chainId: this.getSnapshot().chainId || CHAINS[0],\n    });\n  }\n\n  /**\n   * @summary Gets the storage\n   * @since 0.2.0\n   * @returns {SdkStorageSnapshot} The storage snapshot object\n   */\n  private getSnapshot(): SdkStorageSnapshot {\n    try {\n      return JSON.parse(\n        localStorage.getItem(LOCALSTORAGE_KEY) || '{}'\n      ) as SdkStorageSnapshot;\n    } catch (error) {\n      localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify({}));\n      throw new Error('Error parsing storage');\n    }\n  }\n\n  /**\n   * @summary Saves the storage\n   * @since 0.2.0\n   * @param {SdkStorageSnapshot} storage SdkStorage snapshot object\n   */\n  private saveSnapshot(storage: SdkStorageSnapshot): void {\n    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(storage));\n  }\n}\n","import { ProviderError, ProviderErrors } from './ProviderError';\nimport { SdkStorage, SdkStorageKeys } from './SdkStorage';\nimport { WalletSDKConfig } from './WalletSDK';\n\n/**\n * @summary The Grindery RPC API method names\n * @updated 0.7.0 Added `requestPairingByUserId` and `requestPairingByTelegramLogin` methods\n */\nexport enum RpcMethodNames {\n  requestPairing = 'requestPairing',\n  waitForPairingResult = 'waitForPairingResult',\n  request = 'request',\n  waitForRequestResult = 'waitForRequestResult',\n  'disconnect' = 'disconnect',\n  getUserWalletAddress = 'getUserWalletAddress',\n  trackClientEvent = 'trackClientEvent',\n\n  /**\n   * Server side method\n   * @since 0.7.0\n   */\n  requestPairingByUserId = 'requestPairingByUserId',\n  /**\n   * Server side method\n   * @since 0.7.0\n   */\n  requestPairingByTelegramLogin = 'requestPairingByTelegramLogin',\n}\n\n/**\n * @summary The Grindery RPC API request results\n * @since 0.2.0\n */\nexport namespace RpcRequestResults {\n  /**\n   * @summary `waitForPairingResult` method result\n   */\n  export type waitForPairingResult = {\n    session: {\n      expiry: number;\n      sessionId: string;\n      namespaces: {\n        [key: string]: {\n          accounts: string[];\n          chains: string[];\n          events: string[];\n          methods: string[];\n        };\n      };\n    };\n  };\n\n  /**\n   * @summary `requestPairing` method result\n   */\n  export type requestPairing = {\n    config?: WalletSDKConfig;\n    pairingToken: string;\n    connectUrl: string;\n    connectUrlBrowser: string;\n    shortToken: string;\n    miniAppPairingToken?: string;\n  };\n\n  /**\n   * @summary `request` method result\n   */\n  export type request = {\n    requestToken: string;\n  };\n\n  /**\n   * @summary `waitForRequestResult` method result\n   */\n  export type waitForRequestResult = any;\n\n  /**\n   * @summary `disconnect` method result\n   */\n  export type disconnect = boolean;\n\n  /**\n   * @summary `getUserWalletAddress` method result\n   */\n  export type getUserWalletAddress = string;\n\n  /**\n   * @summary `trackClientEvent` method result\n   */\n  export type trackClientEvent = true;\n\n  /**\n   * @summary `requestPairingByUserId` method result\n   * @since 0.7.0\n   */\n  export type requestPairingByUserId = { pairingToken: string };\n\n  /**\n   * @summary `requestPairingByTelegramLogin` method result\n   * @since 0.7.0\n   */\n  export type requestPairingByTelegramLogin = { pairingToken: string };\n}\n\n/**\n * @summary The Grindery RPC API wrapper class\n * @since 0.2.0\n */\nexport class Rpc {\n  private config: WalletSDKConfig;\n\n  constructor(config: WalletSDKConfig) {\n    this.config = config;\n  }\n\n  /**\n   * @summary Sends a provider request to the Grindery RPC API and waits for the result.\n   * @public\n   * @param {RpcMethodNames} method Provider request method name\n   * @param {Array} params Provider request parameters\n   * @param {number} timeout Optional. The time in milliseconds to wait for the request result. Default is 30000.\n   * @returns The result of the provider request\n   */\n  public async sendAndWaitRpcRequest<T>(\n    method: string,\n    params?: readonly unknown[],\n    timeout?: number\n  ): Promise<T> {\n    const request = await this.sendRpcRequest(method, params);\n    return await this.waitRpcRequest(request.requestToken, timeout);\n  }\n\n  /**\n   * @summary Sends a provider request to the Grindery RPC API.\n   * @protected\n   * @param {RpcMethodNames} method Provider request method name\n   * @param {Array} params Provider request parameters\n   * @returns {RpcRequestResults.request} Promise resolving with the request token to use in the `waitGrinderyRpcProviderRequest` method\n   */\n  protected async sendRpcRequest(\n    method: string,\n    params?: readonly unknown[]\n  ): Promise<RpcRequestResults.request> {\n    const storage = new SdkStorage();\n    return await this.sendRpcApiRequest<RpcRequestResults.request>(\n      RpcMethodNames.request,\n      {\n        sessionId: storage.getValue(SdkStorageKeys.sessionId),\n        scope: storage.getValue(SdkStorageKeys.chainId),\n        request: {\n          method,\n          params,\n        },\n      }\n    );\n  }\n\n  /**\n   * @summary Waits for the result of the provider request.\n   * @protected\n   * @param {string} requestToken A token to identify provider request. Recieved in the results of `sendGrinderyRpcProviderRequest` method.\n   * @param {number} timeout Optional. The time in milliseconds to wait for the request result. Default is 30000.\n   * @returns The result of the provider request\n   */\n  protected async waitRpcRequest<T>(\n    requestToken: string,\n    timeout?: number\n  ): Promise<T> {\n    return await this.sendRpcApiRequest<T>(\n      RpcMethodNames.waitForRequestResult,\n      {\n        requestToken,\n        timeout,\n      }\n    );\n  }\n\n  /**\n   * @summary Sends a request to the Grindery Walletconnect RPC API.\n   * @public\n   * @param {RpcMethodNames} method Request method name\n   * @param {RequestArgumentsParams} params Request parameters\n   * @returns {T} The result of the request\n   */\n  public async sendRpcApiRequest<T>(\n    method: RpcMethodNames,\n    params?: unknown[] | object\n  ): Promise<T> {\n    try {\n      const response = await fetch(\n        this.config.pairingApiUrl || 'https://walletconnect-api.grindery.com',\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            jsonrpc: '2.0',\n            id: 1,\n            method: `gws_${method}`,\n            params: params || [],\n          }),\n        }\n      );\n      const data = await response.json();\n      if (data.error) {\n        throw new ProviderError(data.error.message, data.error.code);\n      }\n      if (!data.result) {\n        throw ProviderErrors.NoResult;\n      }\n      return data.result;\n    } catch (error) {\n      if (error instanceof Error) {\n        throw new ProviderError(error.message, 500, error);\n      }\n      throw new ProviderError('Server error', 500, error);\n    }\n  }\n}\n","import { providerInfo } from '../utils/providerInfo';\nimport { EventEmitter, ProviderEvents } from './EventEmitter';\nimport { ProviderErrors, newProviderError } from './ProviderError';\nimport { Rpc, RpcMethodNames, RpcRequestResults } from './Rpc';\nimport { SdkStorage, SdkStorageKeys } from './SdkStorage';\nimport { CHAINS, hexChainId, unhexChainId } from '../utils/chains';\nimport { WalletSDKConfig } from './WalletSDK';\n\n/**\n * @summary The Grindery wallet provider methods\n * @since 0.2.0\n */\nexport type ProviderMethods = {\n  [name in ProviderMethodNames]: (\n    params?: ProviderRequestArgumentsParams\n  ) => Promise<unknown>;\n};\n\n/**\n * @summary The Grindery wallet provider method names\n * @since 0.2.0\n * @since 0.3.0 Added `eth_chainId`, `wallet_addEthereumChain` and `wallet_switchEthereumChain` methods\n */\nexport enum ProviderMethodNames {\n  eth_requestAccounts = 'eth_requestAccounts',\n  eth_accounts = 'eth_accounts',\n  personal_sign = 'personal_sign',\n  eth_sendTransaction = 'eth_sendTransaction',\n  gws_disconnect = 'gws_disconnect',\n  eth_chainId = 'eth_chainId',\n  wallet_addEthereumChain = 'wallet_addEthereumChain',\n  wallet_switchEthereumChain = 'wallet_switchEthereumChain',\n}\n\nexport namespace ProviderRequestResults {\n  export type eth_accounts = string[];\n  export type eth_requestAccounts = string[];\n  export type personal_sign = string;\n  export type eth_sendTransaction = string;\n  export type disconnect = boolean;\n  export type wallet_switchEthereumChain = null;\n  export type wallet_addEthereumChain = null;\n  export type eth_chainId = string;\n}\n\n/**\n * @summary The Grindery wallet provider method names\n * @since 0.2.0\n */\nexport type ProviderMethodName = keyof typeof ProviderMethodNames;\n\n/**\n * @summary The Grindery wallet provider request params\n * @since 0.2.0\n */\nexport type ProviderRequestArgumentsParams = readonly unknown[] | object;\n\n/**\n * @summary The Grindery wallet provider request arguments\n * @since 0.2.0\n */\nexport interface ProviderRequestArguments {\n  readonly method: ProviderMethodName;\n  readonly params?: ProviderRequestArgumentsParams;\n}\n\n/**\n * @summary The base wallet provider class\n * @since 0.2.0\n * @extends EventEmitter\n */\nexport class Provider extends EventEmitter {\n  public isGrinderyWallet: boolean = true;\n  private config: WalletSDKConfig;\n\n  constructor(config: WalletSDKConfig) {\n    super();\n    this.config = config;\n    this.rpc = new Rpc(this.config);\n    if (this.config?.appId) {\n      this.injectProvider();\n      this.listenForRequestProviderEvents();\n      this.announceProvider();\n    }\n    if (typeof window !== 'undefined') {\n      window.addEventListener('load', () => {\n        this.restoreConnection();\n      });\n    }\n  }\n\n  public restoreConnection(): void {\n    if (this.config?.appId) {\n      this.emit(ProviderEvents.connect, {\n        chainId: hexChainId(\n          this.storage.getValue(SdkStorageKeys.chainId) ||\n            this.config?.chainId ||\n            CHAINS[0]\n        ),\n      });\n      this.restorePairing();\n      this.restoreSession();\n    }\n  }\n\n  /**\n   * @public\n   * @returns {boolean} True if the provider is connected to the server.\n   */\n  public isConnected(): boolean {\n    // Always true\n    return true;\n  }\n\n  /**\n   * @summary Sends a request to the provider\n   * @public\n   * @param {ProviderRequestArguments} args Request arguments\n   * @param {string} args.method The method name\n   * @param {ProviderRequestArgumentsParams} args.params The method parameters\n   * @returns {T} The result of the request\n   */\n  public async request<T>({\n    method,\n    params,\n  }: ProviderRequestArguments): Promise<T> {\n    return (await this.methods[method]?.(params)) as T;\n  }\n\n  /**\n   * @summary Sends a request to the provider (legacy)\n   * @public\n   * @param {ProviderRequestArguments} args Request arguments\n   * @param {string} args.method The method name\n   * @param {ProviderRequestArgumentsParams} args.params The method parameters\n   * @param {Function} callback The callback function\n   * @deprecated Use `request` method instead\n   * @since 0.5.4\n   * @returns {void} `void`\n   */\n  public sendAsync(\n    { method, params }: ProviderRequestArguments,\n    callback: Function\n  ): void {\n    this.methods[method]?.(params)\n      .then((res) => {\n        callback(null, res);\n      })\n      .catch((error) => {\n        callback(error);\n      });\n  }\n\n  private storage: SdkStorage = new SdkStorage();\n\n  private rpc: Rpc;\n\n  /**\n   * @summary Switches the chain\n   * @since 0.3.0\n   * @param {string} chainId Chain id in hex format\n   * @returns {null} `Null` on success\n   */\n  private switchChain = async ({ chainId }: any): Promise<null> => {\n    const chainCaip = unhexChainId(chainId);\n    if (!CHAINS.includes(chainCaip)) {\n      throw newProviderError(ProviderErrors.ChainDisconnected);\n    }\n    this.storage.setValue(SdkStorageKeys.chainId, chainCaip);\n    this.emit(ProviderEvents.chainChanged, { chainId });\n    return null;\n  };\n\n  /**\n   * @summary The list of supported provider methods.\n   * @private\n   */\n  private methods: Partial<ProviderMethods> = {\n    /**\n     * @summary The `eth_requestAccounts` provider method\n     */\n    [ProviderMethodNames.eth_requestAccounts]: async (\n      params?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.eth_requestAccounts> => {\n      if (!this.config.appId) {\n        throw newProviderError(ProviderErrors.NoAppId);\n      }\n      if (this.storage.getValue('sessionId')) {\n        try {\n          return await this.request<ProviderRequestResults.eth_accounts>({\n            method: ProviderMethodNames.eth_accounts,\n            params: [],\n          });\n        } catch (error) {\n          this.storage.setValue(SdkStorageKeys.sessionId, '');\n          // skip failed request and continue with pairing\n        }\n      }\n      if (this.storage.getValue('pairingToken')) {\n        try {\n          const pairResult =\n            await this.rpc.sendRpcApiRequest<RpcRequestResults.waitForPairingResult>(\n              RpcMethodNames.waitForPairingResult,\n              {\n                pairingToken: this.storage.getValue(\n                  SdkStorageKeys.pairingToken\n                ),\n              }\n            );\n\n          this.storage.clear();\n          this.storage.setValue(\n            SdkStorageKeys.sessionId,\n            pairResult.session.sessionId\n          );\n\n          if (!pairResult.session.sessionId) {\n            throw ProviderErrors.PairingFailed;\n          }\n\n          return await this.request<ProviderRequestResults.eth_accounts>({\n            method: ProviderMethodNames.eth_accounts,\n            params: params || [],\n          });\n        } catch (error) {\n          this.storage.clear();\n          // skip failed request and continue with pairing\n        }\n      }\n      try {\n        this.storage.clear();\n        const result =\n          await this.rpc.sendRpcApiRequest<RpcRequestResults.requestPairing>(\n            RpcMethodNames.requestPairing,\n            {\n              appId: this.config?.appId || '',\n              clientId: this.storage.getValue(SdkStorageKeys.clientId),\n              redirectMode: this.config?.redirectMode,\n              redirectUrl: this.config?.appUrl,\n            }\n          );\n\n        if (!result.pairingToken || !result.connectUrl) {\n          throw ProviderErrors.PairingFailed;\n        }\n\n        this.storage.setValue(SdkStorageKeys.pairingToken, result.pairingToken);\n        this.storage.setValue(SdkStorageKeys.connectUrl, result.connectUrl);\n        this.storage.setValue(\n          SdkStorageKeys.connectUrlBrowser,\n          result.connectUrlBrowser\n        );\n        this.storage.setValue(SdkStorageKeys.shortToken, result.shortToken);\n        this.emit(ProviderEvents.pair, {\n          config: this.config,\n          shortToken: result.shortToken,\n          connectUrl: result.connectUrl,\n          connectUrlBrowser: result.connectUrlBrowser,\n          miniAppPairingToken: result.miniAppPairingToken,\n        });\n        const pairResult =\n          await this.rpc.sendRpcApiRequest<RpcRequestResults.waitForPairingResult>(\n            RpcMethodNames.waitForPairingResult,\n            {\n              pairingToken: result.pairingToken,\n            }\n          );\n\n        this.storage.setValue(\n          SdkStorageKeys.sessionId,\n          pairResult.session.sessionId\n        );\n\n        if (!pairResult.session.sessionId) {\n          throw ProviderErrors.PairingFailed;\n        }\n        this.storage.setValue(SdkStorageKeys.pairingToken, '');\n        this.storage.setValue(SdkStorageKeys.connectUrl, '');\n        this.storage.setValue(SdkStorageKeys.connectUrlBrowser, '');\n        this.storage.setValue(SdkStorageKeys.shortToken, '');\n\n        return await this.request({\n          method: ProviderMethodNames.eth_accounts,\n          params: params || [],\n        });\n      } catch (error) {\n        throw error;\n      }\n    },\n\n    /**\n     * @summary The `eth_accounts` provider method\n     */\n    [ProviderMethodNames.eth_accounts]: async (\n      params?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.eth_accounts> => {\n      try {\n        const result = (await this.rpc.sendAndWaitRpcRequest<string[]>(\n          ProviderMethodNames.eth_accounts,\n          params ? (Array.isArray(params) ? params : [params]) : []\n        )) as ProviderRequestResults.eth_accounts;\n        this.storage.setValue(SdkStorageKeys.address, result[0] || '');\n        this.emit(ProviderEvents.accountsChanged, result);\n        return result;\n      } catch (error) {\n        throw newProviderError(error);\n      }\n    },\n\n    /**\n     * @summary The `eth_sendTransaction` provider method\n     */\n    [ProviderMethodNames.eth_sendTransaction]: async (\n      params?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.eth_sendTransaction> => {\n      return (await this.rpc.sendAndWaitRpcRequest(\n        ProviderMethodNames.eth_sendTransaction,\n        params ? (Array.isArray(params) ? params : [params]) : []\n      )) as ProviderRequestResults.eth_sendTransaction;\n    },\n\n    /**\n     * @summary The `personal_sign` provider method\n     */\n    [ProviderMethodNames.personal_sign]: async (\n      params?: Partial<ProviderRequestArgumentsParams>\n    ): Promise<ProviderRequestResults.personal_sign> => {\n      return (await this.rpc.sendAndWaitRpcRequest(\n        ProviderMethodNames.personal_sign,\n        params ? (Array.isArray(params) ? params : [params]) : []\n      )) as ProviderRequestResults.personal_sign;\n    },\n\n    /**\n     * @summary The `gws_disconnect` provider method\n     */\n    [ProviderMethodNames.gws_disconnect]:\n      async (): Promise<ProviderRequestResults.disconnect> => {\n        try {\n          const result =\n            await this.rpc.sendRpcApiRequest<ProviderRequestResults.disconnect>(\n              RpcMethodNames.disconnect,\n              {\n                sessionToken: this.storage.getValue(SdkStorageKeys.sessionId),\n              }\n            );\n\n          this.emit(ProviderEvents.disconnect, ProviderErrors.Disconnected);\n\n          return result;\n        } catch (error) {\n          throw newProviderError(error);\n        }\n      },\n\n    /**\n     * @summary The `eth_chainId` provider method\n     * @since 0.3.0\n     */\n    [ProviderMethodNames.eth_chainId]: async (\n      _?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.eth_chainId> => {\n      return hexChainId(\n        this.storage.getValue(SdkStorageKeys.chainId) ||\n          this.config?.chainId ||\n          CHAINS[0]\n      );\n    },\n\n    /**\n     * @summary The `wallet_addEthereumChain` provider method\n     * @since 0.3.0\n     */\n    [ProviderMethodNames.wallet_addEthereumChain]: async (\n      _?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.wallet_addEthereumChain> => {\n      throw newProviderError(ProviderErrors.UserRejected);\n    },\n\n    /**\n     * @summary The `wallet_switchEthereumChain` provider method\n     * @since 0.3.0\n     */\n    [ProviderMethodNames.wallet_switchEthereumChain]: async (\n      params?: ProviderRequestArgumentsParams\n    ): Promise<ProviderRequestResults.wallet_switchEthereumChain> =>\n      await this.switchChain(params),\n  };\n\n  /**\n   * @summary Restores the pairing process if pairing token is stored in the local storage\n   * @private\n   * @returns {void}\n   */\n  private async restorePairing(): Promise<void> {\n    const pairingToken = this.storage.getValue(SdkStorageKeys.pairingToken);\n    const sessionId = this.storage.getValue(SdkStorageKeys.sessionId);\n    if (pairingToken && !sessionId) {\n      try {\n        const pairResult =\n          await this.rpc.sendRpcApiRequest<RpcRequestResults.waitForPairingResult>(\n            RpcMethodNames.waitForPairingResult,\n            {\n              pairingToken,\n            }\n          );\n\n        this.storage.clear();\n        this.storage.setValue(\n          SdkStorageKeys.sessionId,\n          pairResult.session.sessionId\n        );\n\n        if (!pairResult.session.sessionId) {\n          throw ProviderErrors.PairingFailed;\n        }\n\n        const accounts = (\n          pairResult.session?.namespaces?.[`eip155`]?.accounts || []\n        ).map((account) =>\n          account.includes(':') ? account.split(':')[2] || '' : account\n        );\n        this.storage.setValue(SdkStorageKeys.address, accounts[0] || '');\n        this.emit(ProviderEvents.accountsChanged, accounts);\n      } catch (error) {\n        this.storage.clear();\n      }\n    }\n  }\n\n  /**\n   * @summary Restores the session if session Id is stored in the local storage\n   * @private\n   * @returns {void}\n   */\n  private async restoreSession(): Promise<void> {\n    const pairingToken = this.storage.getValue(SdkStorageKeys.pairingToken);\n    const sessionId = this.storage.getValue(SdkStorageKeys.sessionId);\n    if (sessionId && !pairingToken) {\n      try {\n        await this.request<string[]>({\n          method: ProviderMethodNames.eth_requestAccounts,\n        });\n      } catch (error) {\n        this.storage.clear();\n      }\n    }\n  }\n\n  /**\n   * @summary Injects the provider into the window object\n   * @private\n   * @returns {void}\n   */\n  private injectProvider(): void {\n    if (typeof window !== 'undefined') {\n      if (!window.ethereum) {\n        window.ethereum = this;\n      } else {\n        if (\n          window.ethereum.providers &&\n          Array.isArray(window.ethereum.providers)\n        ) {\n          if (\n            window.ethereum.providers.filter((p: any) => p.isGrinderyWallet)\n              .length > 0\n          ) {\n            window.ethereum.providers = window.ethereum.providers.map(\n              (p: any) => {\n                if (p.isGrinderyWallet) {\n                  return this;\n                }\n                return p;\n              }\n            );\n          } else {\n            window.ethereum.providers.push(this);\n          }\n        } else {\n          window.ethereum.providers = [window.ethereum, this];\n        }\n      }\n    }\n  }\n\n  /**\n   * @summary Announces the provider to the window object\n   * @private\n   * @since 0.1.1\n   * @link https://eips.ethereum.org/EIPS/eip-6963#announce-and-request-events\n   * @returns {void}\n   */\n  private announceProvider(): void {\n    if (typeof window !== 'undefined') {\n      window.dispatchEvent(\n        new CustomEvent('eip6963:announceProvider', {\n          detail: Object.freeze({ info: providerInfo, provider: this }),\n        })\n      );\n    }\n  }\n\n  /**\n   * @summary Listens for the request provider events\n   * @private\n   * @since 0.1.1\n   * @link https://eips.ethereum.org/EIPS/eip-6963#announce-and-request-events\n   * @returns {void}\n   */\n  private listenForRequestProviderEvents(): void {\n    if (typeof window !== 'undefined') {\n      window.addEventListener('eip6963:requestProvider', () => {\n        this.announceProvider();\n      });\n    }\n  }\n}\n","import { SdkStorage, SdkStorageKeys } from './SdkStorage';\n\n/**\n * @summary The Grindery Wallet API wrapper class\n * @since 0.5.0\n */\nexport class WalletAPI {\n  /**\n   * @summary Sends a request to the Grindery Wallet API\n   * @public\n   * @param {string} method JSON-RPC method name\n   * @param {object} params JSON-RPC method parameters, optional\n   * @returns {T} The result of the API request\n   */\n  public async sendApiRequest<T>(method: string, params?: object): Promise<T> {\n    const storage = new SdkStorage();\n    const sessionId = storage.getValue(SdkStorageKeys.sessionId);\n    const address = storage.getValue(SdkStorageKeys.address);\n    if (!sessionId || !address) {\n      throw new Error('Not connected to the wallet');\n    }\n    const customUrl =\n      typeof window !== 'undefined' &&\n      window.Grindery?.WalletSDK?.config.walletApiUrl\n        ? window.Grindery.WalletSDK.config.walletApiUrl\n        : '';\n    const response = await fetch(\n      customUrl || 'https://wallet-api.grindery.com/v3',\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${address}:${sessionId}`,\n        },\n        body: JSON.stringify({\n          jsonrpc: '2.0',\n          id: 1,\n          method,\n          params: params || {},\n        }),\n      }\n    );\n\n    if (!response.ok) {\n      throw new Error(`Failed to call ${method}`);\n    }\n    const json = await response.json();\n    return json.result as T;\n  }\n}\n","import { WalletSDKConfig } from '../classes/WalletSDK';\n\n/**\n * @summary Get the SDK config from the script tag data attributes\n * @returns {object} The SDK config object\n */\nexport const getConfigFromDataAttributes = (): Partial<WalletSDKConfig> => {\n  if (typeof document === 'undefined' || typeof window === 'undefined') {\n    return {};\n  }\n  let config: Partial<WalletSDKConfig> = {};\n  const attributesMap = {\n    'data-app-id': 'appId',\n    'data-wallet-api-url': 'walletApiUrl',\n    'data-pairing-api-url': 'pairingApiUrl',\n    'data-app-url': 'appUrl',\n    'data-redirect-mode': 'redirectMode',\n    'data-chain-id': 'chainId',\n  };\n  for (const [attribute, key] of Object.entries(attributesMap)) {\n    const elements = document.querySelectorAll(`[${attribute}]`);\n    for (let j = 0; j < elements.length; j++) {\n      const element = elements[j];\n      const value = element.getAttribute(attribute);\n      const src = element.getAttribute('src');\n      const isGrinderySrc = src && src.includes('grindery-wallet-sdk');\n      if (isGrinderySrc && value) {\n        config[key as keyof WalletSDKConfig] = value as string;\n      }\n    }\n  }\n  return config;\n};\n","import { ProviderEventName, ProviderEvents } from './EventEmitter';\nimport { Provider, ProviderMethodNames } from './Provider';\nimport { Rpc, RpcMethodNames, RpcRequestResults } from './Rpc';\nimport { SdkStorage, SdkStorageKeys } from './SdkStorage';\nimport { CHAINS, hexChainId } from '../utils/chains';\nimport { User } from '../utils/user';\nimport { WalletAPI } from './WalletAPI';\nimport { getConfigFromDataAttributes } from '../utils/getConfigFromDataAttributes';\nimport { TelegramLoginInfo } from '../utils/telegram';\n\nexport type WalletSDKConfig = {\n  /**\n   * @summary The application ID, obtained in the Grindery bot by the dApp developer.\n   */\n  appId: string;\n  /**\n   * @summary The application URL. If not provided, the current page URL will be used.\n   */\n  appUrl: string;\n  /**\n   * @summary The pairing API URL. If not provided, the default Grindery API URL will be used.\n   */\n  pairingApiUrl?: string;\n  /**\n   * @summary The wallet API URL. If not provided, the default Grindery API URL will be used.\n   */\n  walletApiUrl?: string;\n  /**\n   * @summary The redirect mode for the pairing request.\n   * @example 'tg' | 'url' | 'close'\n   */\n  redirectMode?: string;\n  /**\n   * @summary The default chain ID in CAIP-2 format.\n   */\n  chainId?: string;\n};\n\n/**\n * @summary The Wallet SDK class\n * @since 0.2.0\n */\nexport class WalletSDK {\n  /**\n   * @summary The provider instance\n   * @public\n   */\n  public provider: Provider;\n\n  public config: WalletSDKConfig =\n    typeof window !== 'undefined'\n      ? {\n          appId: window.Grindery?.appId || '',\n          appUrl: window.Grindery?.appUrl || window.location.origin,\n          redirectMode: window.Grindery?.redirectMode,\n          pairingApiUrl: window.Grindery?.pairingApiUrl,\n          walletApiUrl: window.Grindery?.walletApiUrl,\n          chainId: window.Grindery?.chainId,\n        }\n      : {\n          appId: '',\n          appUrl: '',\n        };\n\n  constructor(config?: Partial<WalletSDKConfig>) {\n    this.config = {\n      ...this.config,\n      ...(config || getConfigFromDataAttributes() || {}),\n    };\n\n    if (typeof window !== 'undefined') {\n      window.Grindery = {\n        ...this.config,\n      };\n    }\n\n    this.storage.setValue(\n      SdkStorageKeys.chainId,\n      this.storage.getValue(SdkStorageKeys.chainId) ||\n        this.config.chainId ||\n        CHAINS[0]\n    );\n    this.detectPairingToken();\n    this.provider = this.getWeb3Provider();\n    if (this.config.appId) {\n      this.provider.on(ProviderEvents.pair, this.handlePairing);\n    }\n  }\n\n  /**\n   * @summary Checks if the provider is connected to the server\n   * @returns {boolean} True if the provider is connected to the server.\n   *\n   * @example\n   * ```typescript\n   * const isConnected = window.Grindery.WalletSDK.isConnected();\n   * ```\n   */\n  public isConnected(): boolean {\n    return this.provider.isConnected();\n  }\n\n  /**\n   * @summary Checks if the provider is connected to the server and the Grindery Wallet\n   * @returns {boolean} True if the provider is connected to the server and the Grindery Wallet.\n   */\n  public isWalletConnected(): boolean {\n    return (\n      this.isConnected() &&\n      !!this.storage.getValue(SdkStorageKeys.pairingToken) &&\n      !this.storage.getValue(SdkStorageKeys.sessionId)\n    );\n  }\n\n  /**\n   * @summary Initiate connection to the Grindery Wallet\n   * @public\n   * @returns {Promise<string[]>} The array of ethereum addresses\n   * @since 0.1.0\n   */\n  public async connect(): Promise<string[]> {\n    return await this.provider.request({\n      method: ProviderMethodNames.eth_requestAccounts,\n    });\n  }\n\n  /**\n   * @summary Disconnects Grindery Wallet\n   * @public\n   * @returns {Promise<boolean>} True if wallet is disconnected\n   * @since 0.1.0\n   */\n  public async disconnect(): Promise<boolean> {\n    return await this.provider.request({\n      method: ProviderMethodNames.gws_disconnect,\n    });\n  }\n\n  /**\n   * @summary Sends a transaction request to the Grindery Wallet\n   * @public\n   * @since 0.1.0\n   * @param {object} params The transaction parameters\n   * @param {string} params.to The recipient address\n   * @param {string} [params.value] The amount to send in wei\n   * @param {string} [params.data] The data to send\n   * @returns {Promise<string>} Transaction hash string\n   */\n  public async sendTransaction(params: {\n    to: string;\n    value?: string;\n    data?: string;\n  }): Promise<string> {\n    return await this.provider.request<string>({\n      method: ProviderMethodNames.eth_sendTransaction,\n      params: [params],\n    });\n  }\n\n  /**\n   * @summary Sends a personal signature request to the Grindery Wallet\n   * @public\n   * @since 0.1.0\n   * @param {string} message The message to sign\n   * @returns {Promise<string>} Signature string\n   */\n  public async signMessage(message: string): Promise<string> {\n    return await this.provider.request<string>({\n      method: ProviderMethodNames.personal_sign,\n      params: [message, this.storage.getValue('address')],\n    });\n  }\n\n  /**\n   * @summary Requests the Grindery Wallet to switch the chain\n   * @public\n   * @since 0.3.0\n   * @param {string} chainId Chain id in CAIP-2 format\n   * @returns {Promise<null>} Returns `null` on success\n   */\n  public async switchChain(chainId: string): Promise<null> {\n    return await this.provider.request<null>({\n      method: ProviderMethodNames.wallet_switchEthereumChain,\n      params: { chainId: hexChainId(chainId) },\n    });\n  }\n\n  /**\n   * @summary Gets currently connected chain\n   * @public\n   * @since 0.3.0\n   * @returns {string} Returns chain id in CAIP-2 format\n   */\n  public getChain(): string {\n    return (\n      this.storage.getValue(SdkStorageKeys.chainId) ||\n      this.config.chainId ||\n      CHAINS[0]\n    );\n  }\n\n  /**\n   * @summary Exchange user ID to wallet address\n   * @public\n   * @since 0.4.0\n   * @param {string} userId User ID\n   * @returns {Promise<string>} Grindery Wallet address\n   */\n  public async getUserWalletAddress(\n    userId: string\n  ): Promise<RpcRequestResults.getUserWalletAddress> {\n    const rpc = new Rpc(this.config);\n    if (!this.config.appId) {\n      throw new Error('App ID is required');\n    }\n    return await rpc.sendRpcApiRequest<RpcRequestResults.getUserWalletAddress>(\n      RpcMethodNames.getUserWalletAddress,\n      { appId: this.config.appId, userId }\n    );\n  }\n\n  /**\n   * @summary Adds a listener to the event\n   * @public\n   * @param {ProviderEventName} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public on(event: ProviderEventName, callback: Function) {\n    this.provider.on(event, callback);\n    return this;\n  }\n\n  /**\n   * @summary Removes a listener from the event\n   * @public\n   * @param {ProviderEventName} event Event name\n   * @param {Function} callback Callback function\n   * @returns {EventEmitter} The instance of the class itself\n   */\n  public removeListener(event: ProviderEventName, callback: Function) {\n    this.provider.removeListener(event, callback);\n    return this;\n  }\n\n  /**\n   * @summary Gets the Grindery user information\n   * @public\n   * @since 0.5.0\n   * @returns {Promise<User>} The Grindery user information\n   */\n  public async getUser(): Promise<User> {\n    if (!this.user) {\n      const api = new WalletAPI();\n      try {\n        this.user = await api.sendApiRequest<User>('gw_getMe');\n      } catch (e) {\n        throw new Error(\n          e instanceof Error ? e.message : 'Failed to fetch user information'\n        );\n      }\n    }\n    return this.user;\n  }\n\n  /**\n   * @summary Sets the application ID\n   * @public\n   * @since 0.5.1\n   * @param {string} appId The application ID\n   * @returns {void}\n   */\n  public setAppId(appId: string): void {\n    let appIdUpdated = false;\n    if (appId !== this.config.appId) {\n      appIdUpdated = true;\n    }\n    this.config.appId = appId;\n    if (typeof window !== 'undefined') {\n      window.Grindery = {\n        ...window.Grindery,\n        appId,\n      };\n    }\n    if (appIdUpdated) {\n      this.provider = this.getWeb3Provider();\n      this.provider.removeListener(ProviderEvents.pair, this.handlePairing);\n      setTimeout(() => {\n        this.provider.on(ProviderEvents.pair, this.handlePairing);\n      }, 0);\n    }\n  }\n\n  /**\n   * @summary Sets the SDK config\n   * @public\n   * @since 0.5.1\n   * @param {object} config The partial SDK config object\n   * @returns {void}\n   */\n  public setConfig(config: Partial<WalletSDKConfig>): void {\n    let appIdUpdated = false;\n    if (config.appId !== this.config.appId) {\n      appIdUpdated = true;\n    }\n    this.config = { ...this.config, ...config };\n    if (typeof window !== 'undefined') {\n      window.Grindery = {\n        ...window.Grindery,\n        ...this.config,\n      };\n    }\n    if (appIdUpdated) {\n      this.provider = this.getWeb3Provider();\n      this.provider.removeListener(ProviderEvents.pair, this.handlePairing);\n      setTimeout(() => {\n        this.provider.on(ProviderEvents.pair, this.handlePairing);\n      }, 0);\n    }\n  }\n\n  /**\n   * @summary Requests pairing by telegram login info\n   * @public\n   * @since 0.7.0\n   * @param {string} appSecret The application secret. Obtained in the Grindery bot by the dApp developer. Required. Must be kept secret.\n   * @param {TelegramLoginInfo} telegramLoginInfo The user's Telegram login info. Required.\n   * @param {string} [clientId] The client ID. Optional. Unique identifier of the client device.\n   */\n  public async requestPairingByTelegramLogin(\n    appSecret: string,\n    telegramLoginInfo: TelegramLoginInfo,\n    clientId?: string\n  ): Promise<void> {\n    try {\n      const rpc = new Rpc(this.config);\n      if (!this.config.appId) {\n        throw new Error('App ID is required');\n      }\n      const pairingRequest =\n        await rpc.sendRpcApiRequest<RpcRequestResults.requestPairingByTelegramLogin>(\n          RpcMethodNames.requestPairingByTelegramLogin,\n          {\n            appId: this.config.appId,\n            clientId:\n              clientId || this.storage.getValue(SdkStorageKeys.clientId),\n            appSecret,\n            telegramLoginInfo,\n          }\n        );\n      this.storage.setValue(\n        SdkStorageKeys.pairingToken,\n        pairingRequest.pairingToken\n      );\n      this.provider.restoreConnection();\n    } catch (e) {\n      throw new Error(\n        e instanceof Error\n          ? e.message\n          : 'Failed to request pairing by telegram login'\n      );\n    }\n  }\n\n  /**\n   * @summary Sends a request to the Grindery Wallet JSON-RPC API\n   * @public\n   * @since 0.7.0\n   * @param {string} method Wallet API method name\n   * @param {object} params Wallet API method params\n   * @returns {T} The result field of the JSON-RPC API request\n   */\n  public async sendWalletApiRequest<T>(\n    method: string,\n    params?: object\n  ): Promise<T> {\n    const api = new WalletAPI();\n    try {\n      return await api.sendApiRequest<T>(method, params);\n    } catch (e) {\n      throw new Error(\n        e instanceof Error ? e.message : 'Failed to send wallet API request'\n      );\n    }\n  }\n\n  /**\n   * @summary SdkStorage class instance\n   * @private\n   */\n  private storage: SdkStorage = new SdkStorage();\n\n  /**\n   * @summary The Grindery Wallet user\n   * @private\n   */\n  private user: User | null = null;\n\n  /**\n   * @summary Gets the Grindery Wallet ethereum provider\n   * @returns {Provider} The Grindery Wallet ethereum provider\n   */\n  private getWeb3Provider(): Provider {\n    return new Provider(this.config);\n  }\n\n  /**\n   * @summary Handles the pairing request, by opening the Grindery Wallet\n   * @private\n   * @param ProviderRequestPairingResult\n   * @returns {void}\n   */\n  private handlePairing({\n    config,\n    shortToken,\n    connectUrlBrowser,\n    miniAppPairingToken,\n  }: RpcRequestResults.requestPairing): void {\n    if (typeof window === 'undefined') {\n      alert('Please allow popups for this website and try again.');\n      return;\n    }\n    const redirectUrl =\n      connectUrlBrowser ||\n      `https://www.grindery.com/connect/wc?uri=${shortToken}`;\n    const miniAppUrl = miniAppPairingToken\n      ? `https://t.me/GrinderyConnectTestBot/confirm?startapp=${miniAppPairingToken.replaceAll(\n          '.',\n          '___'\n        )}`\n      : '';\n    if (miniAppUrl && config?.redirectMode === 'tg') {\n      window.open(miniAppUrl, '_blank');\n      return;\n    }\n    const connectPage = window.open(redirectUrl, '_blank');\n    if (!connectPage) {\n      alert('Please allow popups for this website and try again.');\n    }\n  }\n\n  private detectPairingToken(): void {\n    if (typeof window !== 'undefined') {\n      const urlParams = new URLSearchParams(window.location.search);\n      const token =\n        urlParams.get('_grinderyPairingToken') ||\n        urlParams.get('tgWebAppStartParam');\n      if (token) {\n        this.storage.setValue(SdkStorageKeys.pairingToken, token);\n        this.storage.setValue(SdkStorageKeys.sessionId, '');\n      }\n    }\n  }\n}\n","import { WalletSDK } from './classes/WalletSDK';\n\ndeclare global {\n  interface Window {\n    ethereum?: any;\n    Grindery?: {\n      appId?: string;\n      appUrl?: string;\n      redirectMode?: string;\n      pairingApiUrl?: string;\n      walletApiUrl?: string;\n      chainId?: string;\n      WalletSDK?: WalletSDK;\n    };\n  }\n}\n\n/**\n * @summary The Grindery Wallet SDK\n */\nexport const GrinderyWalletSDK = WalletSDK;\n\nfunction init() {\n  if (\n    typeof window !== 'undefined' &&\n    (!window.Grindery?.WalletSDK ||\n      !(window.Grindery.WalletSDK instanceof WalletSDK))\n  ) {\n    window.Grindery = {\n      ...(window.Grindery || {}),\n      WalletSDK: new WalletSDK(),\n    };\n  }\n}\n\n// Initialize the SDK\ninit();\n"],"names":["ProviderEvents","EventEmitter","events","Map","_proto","prototype","on","event","callback","has","set","get","push","removeListener","callbacks","filter","cb","emit","_len","arguments","length","data","Array","_key","console","log","forEach","apply","uuid","d","Math","random","toString","substr","vr","parseInt","providerInfo","name","rdns","icon","ProviderError","_Error","message","code","_this","call","_inheritsLoose","_wrapNativeSuper","Error","ProviderErrors","PairingFailed","Disconnected","UnsupportedMethod","Unauthorized","NoResult","NoAppId","UserRejected","ChainDisconnected","newProviderError","error","errorResponse","CHAINS","hexChainId","chainId","split","unhexChainId","LOCALSTORAGE_KEY","SdkStorageKeys","SdkStorage","getValue","key","value","getSnapshot","setValue","snapshot","saveSnapshot","clear","clientId","JSON","parse","localStorage","getItem","setItem","stringify","storage","RpcMethodNames","Rpc","config","sendAndWaitRpcRequest","_sendAndWaitRpcRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","method","params","timeout","request","wrap","_callee$","_context","prev","next","sendRpcRequest","sent","waitRpcRequest","requestToken","abrupt","stop","_x","_x2","_x3","_sendRpcRequest","_callee2","_callee2$","_context2","sendRpcApiRequest","sessionId","scope","_x4","_x5","_waitRpcRequest","_callee3","_callee3$","_context3","waitForRequestResult","_x6","_x7","_sendRpcApiRequest","_callee4","response","_callee4$","_context4","fetch","pairingApiUrl","headers","body","jsonrpc","id","json","result","t0","_x8","_x9","ProviderMethodNames","Provider","_EventEmitter","_this$methods","_this$config5","isGrinderyWallet","rpc","switchChain","_ref2","_ref","chainCaip","includes","chainChanged","methods","eth_requestAccounts","_ref3","pairResult","_this$config","_this$config2","_this$config3","_pairResult","appId","eth_accounts","waitForPairingResult","pairingToken","session","t1","requestPairing","redirectMode","redirectUrl","appUrl","connectUrl","connectUrlBrowser","shortToken","pair","miniAppPairingToken","t2","_ref4","isArray","address","accountsChanged","eth_sendTransaction","_ref5","personal_sign","_ref6","_callee5","_callee5$","_context5","gws_disconnect","_callee6","_callee6$","_context6","disconnect","sessionToken","eth_chainId","_ref8","_callee7","_","_this$config4","_callee7$","_context7","wallet_addEthereumChain","_ref9","_callee8","_callee8$","_context8","wallet_switchEthereumChain","_ref10","_callee9","_callee9$","_context9","injectProvider","listenForRequestProviderEvents","announceProvider","window","addEventListener","restoreConnection","_this$config6","_this$config7","connect","restorePairing","restoreSession","isConnected","_request","_callee10","_ref11","_this$methods$method","_this$methods2","_callee10$","_context10","sendAsync","_ref12","_this$methods$method2","_this$methods3","then","res","_restorePairing","_callee11","_pairResult$session","accounts","_callee11$","_context11","namespaces","map","account","_restoreSession","_callee12","_callee12$","_context12","_this2","ethereum","providers","p","dispatchEvent","CustomEvent","detail","Object","freeze","info","provider","_this3","WalletAPI","sendApiRequest","_sendApiRequest","_window$Grindery","customUrl","Grindery","WalletSDK","walletApiUrl","Authorization","ok","getConfigFromDataAttributes","document","attributesMap","_i","_Object$entries","entries","_Object$entries$_i","attribute","elements","querySelectorAll","j","element","getAttribute","src","isGrinderySrc","_window$Grindery2","_window$Grindery3","_window$Grindery4","_window$Grindery5","_window$Grindery6","location","origin","user","_extends","detectPairingToken","getWeb3Provider","handlePairing","isWalletConnected","_connect","_disconnect","sendTransaction","_sendTransaction","signMessage","_signMessage","_switchChain","getChain","getUserWalletAddress","_getUserWalletAddress","userId","getUser","_getUser","api","setAppId","appIdUpdated","setTimeout","setConfig","requestPairingByTelegramLogin","_requestPairingByTelegramLogin","appSecret","telegramLoginInfo","pairingRequest","sendWalletApiRequest","_sendWalletApiRequest","alert","miniAppUrl","replaceAll","open","connectPage","urlParams","URLSearchParams","search","token","GrinderyWalletSDK","init"],"mappings":"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"}